<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>ZY</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="ZY">
<meta property="og:url" content="https://jyue0812.github.io/page/2/index.html">
<meta property="og:site_name" content="ZY">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="ZY">
  
    <link rel="alternate" href="/blog/atom.xml" title="ZY" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/blog/css/style.css">
</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/blog/" id="logo">ZY</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/blog/">Home</a>
        
          <a class="main-nav-link" href="/blog/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/blog/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://jyue0812.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-python基础15" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog/2018/05/21/python基础15/" class="article-date">
  <time datetime="2018-05-21T01:03:11.776Z" itemprop="datePublished">2018-05-21</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>#Lesson 15</p>
<hr>
<p>##第十六章</p>
<p>###爬虫练习</p>
<p>屌丝扒女装：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> urllib.request</span><br><span class="line"><span class="keyword">import</span> re,ssl</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">imageCrawler</span><span class="params">(url, toPath)</span>:</span></span><br><span class="line">    headers = &#123;</span><br><span class="line">        <span class="string">"User-Agent"</span>: <span class="string">"Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/59.0.3071.115 Safari/537.36"</span></span><br><span class="line">    &#125;</span><br><span class="line">    req = urllib.request.Request(url, headers=headers)</span><br><span class="line">    context = ssl._create_unverified_context()</span><br><span class="line">    response = urllib.request.urlopen(req,context=context)</span><br><span class="line">    HtmlStr = response.read().decode(<span class="string">'utf-8'</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># with open(r"yhd.html", "wb") as f:</span></span><br><span class="line">    <span class="comment">#    f.write(HtmlStr)</span></span><br><span class="line"></span><br><span class="line">    pat = <span class="string">r'&lt;img style="width:230px;height:322px" src="//(.*?)"/&gt;'</span></span><br><span class="line">    re_image = re.compile(pat, re.S)</span><br><span class="line">    imagesList = re_image.findall(HtmlStr)</span><br><span class="line">    print(imagesList)</span><br><span class="line">    num = <span class="number">1</span></span><br><span class="line">    <span class="keyword">for</span> imageUrl <span class="keyword">in</span> imagesList:</span><br><span class="line">        path = os.path.join(toPath, str(num)+<span class="string">".jpg"</span>)</span><br><span class="line">        num += <span class="number">1</span></span><br><span class="line">        <span class="comment">#把图片下载到本地存储</span></span><br><span class="line">        urllib.request.urlretrieve(<span class="string">"http://"</span>+imageUrl, filename=path)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">url = <span class="string">"http://search.yhd.com/c0-0/k%25E5%25A5%25B3%25E8%25A3%2585%2520%25E5%25A4%258F/"</span></span><br><span class="line">toPath = <span class="string">r"image"</span></span><br><span class="line">imageCrawler(url, toPath)</span><br></pre></td></tr></table></figure>
<p>##第十七章</p>
<p>###TCP</p>
<p> <img src="/blog/2018/05/21/python基础15/tcp.png" alt="tcp"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> socket</span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">客户端：创建TCP链接时，主动发起连接的叫做客户端</span></span><br><span class="line"><span class="string">服务端：接收客户端的连接</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 1、创建一个socket</span></span><br><span class="line"><span class="comment">#参数1：指定协议  AF_INET  或 AF_INET6</span></span><br><span class="line"><span class="comment">#参数2：SOCK_STREAM执行使用面向流的TCP协议</span></span><br><span class="line">sk = socket.socket(socket.AF_INET, socket.SOCK_STREAM)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2、建立连接</span></span><br><span class="line"><span class="comment">#参数：是一个元组，第一个元素为要连接的服务器的IP地址，第二个参数为端口</span></span><br><span class="line">sk.connect((<span class="string">"www.sina.com.cn"</span>,<span class="number">80</span>))</span><br><span class="line"></span><br><span class="line">sk.send(<span class="string">b'GET / HTTP/1.1\r\nHost: www.sina.com.cn\r\nConnection: close\r\n\r\n'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#等待接收数据</span></span><br><span class="line">data = []</span><br><span class="line"><span class="keyword">while</span> <span class="keyword">True</span>:</span><br><span class="line">    <span class="comment">#每次接收1K数据</span></span><br><span class="line">    tempData = sk.recv(<span class="number">1024</span>)</span><br><span class="line">    <span class="keyword">if</span> tempData:</span><br><span class="line">        data.append(tempData)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line">dataStr = (<span class="string">b''</span>.join(data)).decode(<span class="string">"utf-8"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 断开链接</span></span><br><span class="line">sk.close()</span><br><span class="line"><span class="comment">#print(dataStr)</span></span><br><span class="line"></span><br><span class="line">headers, HTML = dataStr.split(<span class="string">'\r\n\r\n'</span>, <span class="number">1</span>)</span><br><span class="line">print(headers)</span><br><span class="line"><span class="comment"># print(HTML)</span></span><br></pre></td></tr></table></figure>
<p>下面我们写个完整的客户端和服务端来进行相互通信</p>
<p>####TCP服务端</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> socket</span><br><span class="line"></span><br><span class="line"><span class="comment">#创建一个socket</span></span><br><span class="line">server = socket.socket(socket.AF_INET, socket.SOCK_STREAM)</span><br><span class="line"><span class="comment">#绑定IP端口</span></span><br><span class="line">server.bind((<span class="string">'192.168.2.102'</span>,<span class="number">8081</span>))</span><br><span class="line"><span class="comment">#监听</span></span><br><span class="line">server.listen(<span class="number">5</span>)</span><br><span class="line">print(<span class="string">"服务器启动成功……"</span>)</span><br><span class="line"><span class="comment">#等待链接</span></span><br><span class="line">clientSocket, clientAddress  = server.accept()</span><br><span class="line"></span><br><span class="line">print(<span class="string">"%s --  %s 链接成功"</span> % (str(clientSocket), clientAddress))</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="keyword">True</span>:</span><br><span class="line">  data = clientSocket.recv(<span class="number">1024</span>)</span><br><span class="line">  print(<span class="string">"客户端说："</span> + data.decode(<span class="string">"utf-8"</span>))</span><br><span class="line">  sendData = input(<span class="string">"输入返回给客户端的数据"</span>)</span><br><span class="line">  clientSocket.send(sendData.encode(<span class="string">"utf-8"</span>))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">while True:</span></span><br><span class="line"><span class="string">    #等待客户端链接</span></span><br><span class="line"><span class="string">    clientSocket, clientAddress = server.accept()</span></span><br><span class="line"><span class="string">    #启动一个线程，将当前链接的clientSocket交给线程</span></span><br><span class="line"><span class="string">'''</span></span><br></pre></td></tr></table></figure>
<p>####TCP客户端</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> socket</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">client = socket.socket(socket.AF_INET, socket.SOCK_STREAM)</span><br><span class="line">client.connect((<span class="string">"192.168.2.102"</span>, <span class="number">8081</span>))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="keyword">True</span>:</span><br><span class="line">    data = input(<span class="string">"请输入给服务器发送的数据"</span>)</span><br><span class="line">    client.send(data.encode(<span class="string">"utf-8"</span>))</span><br><span class="line">    info = client.recv(<span class="number">1024</span>)</span><br><span class="line">    print(<span class="string">"服务器说："</span>, info.decode(<span class="string">"utf-8"</span>))</span><br></pre></td></tr></table></figure>
<p>###UDP</p>
<p> <img src="/blog/2018/05/21/python基础15/udp.png" alt="s"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">TCP 是建立可靠的连接，并且通信双方都可以以流的形式发送数据。相对于TCP，UDP则是面向无连接的协议</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">使用UDP协议时，不需要建立连接，只需要知道对方的IP地址和端口号，就可以直接发送数据包。但是能不能到达就不知道了。</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">虽然UDP传输数据不可靠，但他的优点是和TCP比，速度快，对于要求不高的数据可以是用UDP</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> socket</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="comment">#这是飞秋接收消息套接字的特定格式</span></span><br><span class="line">str = <span class="string">"1_lbt4_10#32499#002481627512#0#0#0:1289671407:a:b:288:凯哥万岁"</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">udp = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)</span></span><br><span class="line"><span class="string">udp.connect(("10.0.142.206", 2425))</span></span><br><span class="line"><span class="string">udp.send(str.encode("gbk"))</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">256</span>):</span><br><span class="line">    ip = <span class="string">"10.0.142.%d"</span>%i</span><br><span class="line">    print(ip)</span><br><span class="line">    udp = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)</span><br><span class="line">    udp.connect((ip, <span class="number">2425</span>))</span><br><span class="line">    udp.send(str.encode(<span class="string">"gbk"</span>))</span><br></pre></td></tr></table></figure>
<p>来一个聊天室：</p>
<p>####服务端</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> socket</span><br><span class="line"></span><br><span class="line">udpServer = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)</span><br><span class="line">udpServer.bind((<span class="string">'10.0.142.171'</span>, <span class="number">8900</span>))</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="keyword">True</span>:</span><br><span class="line">    data, addr = udpServer.recvfrom(<span class="number">1024</span>)</span><br><span class="line">    print(<span class="string">"客户端说："</span>, data.decode(<span class="string">"utf-8"</span>))</span><br></pre></td></tr></table></figure>
<p>####客户端</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> socket</span><br><span class="line"></span><br><span class="line">client = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="keyword">True</span>:</span><br><span class="line">    data = input(<span class="string">"请输入数据"</span>)</span><br><span class="line">    client.sendto(data.encode(<span class="string">"utf-8"</span>), (<span class="string">'10.0.142.171'</span>, <span class="number">8900</span>))</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://jyue0812.github.io/2018/05/21/python基础15/" data-id="cjhfjx3dz000bw4qxo591tr7t" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-python基础14" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog/2018/05/21/python基础14/" class="article-date">
  <time datetime="2018-05-21T01:02:57.029Z" itemprop="datePublished">2018-05-21</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>#Lesson 17</p>
<hr>
<p>##第十六章</p>
<p>###网络爬虫</p>
<p>网络爬虫（又被称为网页蜘蛛，网络机器人，在FOAF社区中间，更经常的称为网页追逐者），是一种按照一定的规则，自动地抓取万维网信息的程序或者脚本。另外一些不常使用的名字还有蚂蚁、自动索引、模拟程序或者蠕虫。</p>
<p>####【1】urllib爬取网页</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> urllib.request</span><br><span class="line"></span><br><span class="line"><span class="comment"># 向指定的url地址发起请求，并返回服务器响应的数据(文件的对象)</span></span><br><span class="line">response = urllib.request.urlopen(<span class="string">"http://www.baidu.com"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#返回状态码</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> response.getcode() == <span class="number">200</span> <span class="keyword">or</span> response.getcode() == <span class="number">304</span>:</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    print(response.getcode())</span><br><span class="line">    exit()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#print(response)</span></span><br><span class="line"><span class="comment"># 读取问文件的全部内容，会把读取到的数据赋值给一个字符串变量</span></span><br><span class="line">data = response.read()</span><br><span class="line"><span class="comment"># 读取一行</span></span><br><span class="line"><span class="comment"># data = response.readline()</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#读取文件的全部内容，会把读取到的数据赋值给一个列表变量</span></span><br><span class="line"><span class="comment"># data = response.readlines()</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># print(data)</span></span><br><span class="line"><span class="comment"># print(type(data))</span></span><br><span class="line"><span class="comment"># print(len(data))</span></span><br><span class="line"><span class="comment"># print(type(data[100].decode("utf-8")))</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#将爬取到的网页写入文件</span></span><br><span class="line"><span class="keyword">with</span> open(<span class="string">r"file1.html"</span>, <span class="string">"wb"</span>) <span class="keyword">as</span> f:</span><br><span class="line">    f.write(data)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#response 属性</span></span><br><span class="line"><span class="comment">#返回当前环境的有关信息</span></span><br><span class="line"><span class="comment"># print(response.info())</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#返回当前正在爬取的URL地址</span></span><br><span class="line"><span class="comment"># print(response.geturl())</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># url = r"https://www.baidu.com/s?ie=utf-8&amp;f=3&amp;rsv_bp=0&amp;rsv_idx=1&amp;tn=baidu&amp;wd=%E5%87%AF%E5%93%A5%E5%AD%A6%E5%A0%82&amp;rsv_pq=96b2af980000cb00&amp;rsv_t=ed0aZ%2FMEmvroTfrwq5E%2FJFwohlrfGzQfpCwXWirqpFgzTvJwE9WdPgDp4Jk&amp;rqlang=cn&amp;rsv_enter=1&amp;rsv_sug3=3&amp;rsv_sug1=2&amp;rsv_sug7=100&amp;rsv_sug2=1&amp;prefixsug=%25E5%2587%25AF%25E5%2593%25A5&amp;rsp=0&amp;inputT=4668&amp;rsv_sug4=5958"</span></span><br><span class="line"><span class="comment"># print(url)</span></span><br><span class="line"><span class="comment"># #解码</span></span><br><span class="line"><span class="comment"># newUrl = urllib.request.unquote(url)</span></span><br><span class="line"><span class="comment"># print(newUrl)</span></span><br><span class="line"><span class="comment"># #编码</span></span><br><span class="line"><span class="comment"># newUrl2 = urllib.request.quote(newUrl)</span></span><br><span class="line"><span class="comment"># print(newUrl2)</span></span><br></pre></td></tr></table></figure>
<p>####【2】直接写入文件</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> urllib.request</span><br><span class="line"></span><br><span class="line"><span class="comment">#retrieve是检索的意思，它的作用是把它直接写到指定的文件中</span></span><br><span class="line">urllib.request.urlretrieve(<span class="string">"http://www.baidu.com"</span>, <span class="string">"file2.html"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#urlretrieve在执行的过程当中，会生成一些缓存</span></span><br><span class="line"><span class="comment">#清除缓存</span></span><br><span class="line">urllib.request.urlcleanup()</span><br></pre></td></tr></table></figure>
<p>####【3】模仿浏览器</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> urllib.request,gzip</span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line"><span class="keyword">import</span> chardet</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">url = <span class="string">"http://www.baidu.com"</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#模拟请求头</span></span><br><span class="line">headers = &#123;</span><br><span class="line">    <span class="string">"Accept"</span> : <span class="string">"application/json, text/javascript, */*; q=0.01"</span>,</span><br><span class="line">    <span class="string">"X-Requested-With"</span> : <span class="string">"XMLHttpRequest"</span>,</span><br><span class="line">    <span class="string">"User-Agent"</span>: <span class="string">"Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/59.0.3071.115 Safari/537.36"</span>,</span><br><span class="line">    <span class="string">"Content-Type"</span> : <span class="string">"application/x-www-form-urlencoded; charset=UTF-8"</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">#设置一个请求体</span></span><br><span class="line">req = urllib.request.Request(url,headers=headers)</span><br><span class="line"><span class="comment">#发起请求</span></span><br><span class="line">response = urllib.request.urlopen(req)</span><br><span class="line"><span class="comment">#chardet.detect检查爬取下来的字符集编码，如果encoding是none的话那么他就是一个gzip压缩格式，那么我们需要解压</span></span><br><span class="line"><span class="comment">#print(chardet.detect(response.read()))</span></span><br><span class="line"><span class="comment">#我们要先解压然后才能获取</span></span><br><span class="line">gziper = gzip.GzipFile(fileobj=response)</span><br><span class="line">data = gziper.read()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">print(data)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># agentsList = [</span></span><br><span class="line"><span class="comment">#     "Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Maxthon/4.4.3.4000 Chrome/30.0.1599.101 Safari/537.36",</span></span><br><span class="line"><span class="comment">#     "Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/59.0.3071.115 Safari/537.36",</span></span><br><span class="line"><span class="comment">#     "Mozilla/5.0 (Windows NT 5.1) AppleWebKit/535.11 (KHTML, like Gecko) Chrome/17.0.963.84 Safari/535.11 SE 2.X MetaSr 1.0"</span></span><br><span class="line"><span class="comment"># ]</span></span><br><span class="line"><span class="comment"># agentStr = random.choice(agentsList)</span></span><br><span class="line"><span class="comment"># req = urllib.request.Request(url)</span></span><br><span class="line"><span class="comment">#向请求体里添加了User-Agent</span></span><br><span class="line"><span class="comment"># req.add_header("User-Agent", agentStr)</span></span><br><span class="line"><span class="comment"># response = urllib.request.urlopen(req)</span></span><br><span class="line"><span class="comment"># print(response.read().decode("utf-8"))</span></span><br></pre></td></tr></table></figure>
<p>####【4】设置超时</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> urllib.request</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#如果网页长时间未响应，系统判断超时，无法爬取</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>, <span class="number">100</span>):</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">    <span class="comment">#0.5秒后请求超时，开始下一个</span></span><br><span class="line">        response = urllib.request.urlopen(<span class="string">"http://www.baidu.com"</span>, timeout=<span class="number">0.5</span>)</span><br><span class="line">        print(len(response.read()))</span><br><span class="line">    <span class="keyword">except</span>:</span><br><span class="line">        print(<span class="string">"请求超时，继续下一个爬取"</span>)</span><br></pre></td></tr></table></figure>
<p>####【5】http协议</p>
<p>超文本传输协议（HTTP，HyperText Transfer Protocol)是互联网上应用最为广泛的一种网络协议。所有的WWW文件都必须遵守这个标准。设计HTTP最初的目的是为了提供一种发布和接收HTML页面的方法。1960年美国人Ted Nelson构思了一种通过计算机处理文本信息的方法，并称之为超文本（hypertext）,这成为了HTTP超文本传输协议标准架构的发展根基。Ted Nelson组织协调万维网协会（World Wide Web Consortium）和互联网工程工作小组（Internet Engineering Task Force ）共同合作研究，最终发布了一系列的RFC，其中著名的RFC 2616定义了HTTP 1.1。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">使用场景：进行客户端与服务端之间的消息传递时使用</span><br><span class="line"></span><br><span class="line">GET: 通过URL网址传递信息，可以直接在URL网址上添加要传递的信息</span><br><span class="line">POST: 可以向服务器提交数据，是一种比较流行的比较安全的数据传递方式</span><br><span class="line">PUT: 请求服务器存储一个资源，通常要指定存储的位置</span><br><span class="line">DELETE: 请求服务器删除一个资源</span><br><span class="line">HEAD: 请求获取对应的HTTP报头信息</span><br><span class="line">OPTIONS:可以获取当前UTL所支持的请求类型</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>xx：指示信息--表示请求已接收，继续处理</span><br><span class="line"><span class="number">2</span>xx：成功--表示请求已被成功接收、理解、接受</span><br><span class="line"><span class="number">200</span> 表示成功了</span><br><span class="line"><span class="number">3</span>xx：重定向--要完成请求必须进行更进一步的操作</span><br><span class="line"><span class="number">304</span> 表示已经缓存了过</span><br><span class="line"><span class="number">4</span>xx：客户端错误--请求有语法错误或请求无法实现</span><br><span class="line"><span class="number">403</span> 服务器收到请求，但是拒绝提供服务</span><br><span class="line"><span class="number">404</span> 没有这个地址</span><br><span class="line"><span class="number">5</span>xx：服务器端错误--服务器未能实现合法的请求</span><br><span class="line"><span class="number">500</span> 服务器内部发生不可预期的错误</span><br><span class="line"><span class="number">503</span> 服务器当前不能处理客户端的请求，一段时间后可能恢复正常</span><br></pre></td></tr></table></figure>
<p><image src="images/http响应状态V1.png"></image></p>
<p><image src="images/http响应状态V2.png"></image></p>
<image src="images/http响应状态V3.png">

<p>####【6】get请求</p>
<p>主要是用来获取数据而使用的协议，但是它有长度限制，理论上是2048个字节，但是实际上不止（不同的浏览器不一样）。get请求是通过url传递值得。<br>get得到的数据会被浏览器缓存下来。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">特点：把数据拼接到请求路径的后面传递给服务器</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">有点：速度快</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">缺点：承载的数据量小，不安全</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> urllib.request</span><br><span class="line">url = <span class="string">"http://www.baidu.com?name=tom&amp;age=18"</span></span><br><span class="line">response = urllib.request.urlopen(url)</span><br><span class="line">data = response.read().decode(<span class="string">"utf-8"</span>)</span><br><span class="line">print(data)</span><br><span class="line">print(type(data))</span><br></pre></td></tr></table></figure>
<p>####【7】json数据解析</p>
<p>json是一种轻量的网络传输格式，相对于xml它比较的简洁，但是xml可以有字段约束，可读性更加高。</p>
<p>首先我们要引用json库，</p>
<p>它和pickle非常的相像，pickle.load(),pickle.dump()</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">概念：一种保存数据的格式</span></span><br><span class="line"><span class="string">作用：可以保存本地的json文件，页可以将json串进行传输，通常将json称为轻量级的传输方式</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">json文件组成</span></span><br><span class="line"><span class="string">&#123;&#125;     代表对象(字典)</span></span><br><span class="line"><span class="string">[]     代表列表</span></span><br><span class="line"><span class="string">:      代表键值对</span></span><br><span class="line"><span class="string">,     分隔两个部分</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"></span><br><span class="line">jsonStr = <span class="string">'&#123;"name":"tom", "age":18, "hobby":["money","power","english"], "parames":&#123;"a":1,"b":2&#125;&#125;'</span></span><br><span class="line"><span class="comment">#将json格式的字符串转为python数据类型的对象</span></span><br><span class="line">jsonData = json.loads(jsonStr,encoding=<span class="string">'utf-8'</span>)</span><br><span class="line">print(jsonData)</span><br><span class="line">print(type(jsonData))</span><br><span class="line">print(jsonData[<span class="string">"hobby"</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment">#将python数据类型的对象转为json格式的字符串</span></span><br><span class="line">jsonData2 = &#123;<span class="string">"name"</span>:<span class="string">"tom"</span>, <span class="string">"age"</span>:<span class="number">18</span>, <span class="string">"hobby"</span>:[<span class="string">"money"</span>,<span class="string">"power"</span>,<span class="string">"english"</span>], <span class="string">"parames"</span>:&#123;<span class="string">"a"</span>:<span class="number">1</span>,<span class="string">"b"</span>:<span class="number">2</span>&#125;&#125;</span><br><span class="line">jsonStr2 = json.dumps(jsonData2)</span><br><span class="line">print(jsonStr2)</span><br><span class="line">print(type(jsonStr2))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#读取本地的json文件</span></span><br><span class="line">path1 = <span class="string">r"caidanJson.json"</span></span><br><span class="line"><span class="keyword">with</span> open(path1, <span class="string">"rb"</span>) <span class="keyword">as</span> f:</span><br><span class="line">    data = json.load(f)</span><br><span class="line">    print(data)</span><br><span class="line">    <span class="comment">#字典类型</span></span><br><span class="line">    print(type(data))</span><br><span class="line"></span><br><span class="line"><span class="comment">#写本地json</span></span><br><span class="line">path2 = <span class="string">r"test.json"</span></span><br><span class="line">jsonData3 = &#123;<span class="string">"name"</span>:<span class="string">"tom"</span>, <span class="string">"age"</span>:<span class="number">18</span>, <span class="string">"hobby"</span>:[<span class="string">"money"</span>,<span class="string">"power"</span>,<span class="string">"english"</span>], <span class="string">"parames"</span>:&#123;<span class="string">"a"</span>:<span class="number">1</span>,<span class="string">"b"</span>:<span class="number">2</span>&#125;&#125;</span><br><span class="line"><span class="keyword">with</span> open(path2, <span class="string">"w"</span>) <span class="keyword">as</span> f:</span><br><span class="line">    json.dump(jsonData3, f)</span><br></pre></td></tr></table></figure>
<p>####【8】post请求</p>
<p>post请求是以包的形式提交过去的，相对get请求来说要安全一些，而且可以提交海量数据，它在提交的时候是将数据保存在request body中的。但是它不能被浏览器缓存。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">特点：把参数进行打包，单独传输</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">优点：数量大，安全(当对服务器数据进行修改时建议使用post)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">缺点：速度慢</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="keyword">import</span> urllib.request</span><br><span class="line"><span class="keyword">import</span> urllib.parse</span><br><span class="line"></span><br><span class="line">url = <span class="string">"http://www.baidu.com"</span></span><br><span class="line"><span class="comment">#将要发送的数据合成一个字典</span></span><br><span class="line"><span class="comment">#字典的键取网址里找，一般为input标签的name属性的值</span></span><br><span class="line">data = &#123;</span><br><span class="line">    <span class="string">"name"</span>:<span class="string">"tomr"</span>,</span><br><span class="line">    <span class="string">"age"</span>:<span class="number">18</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">#对要发送的数据进行打包,记住编码</span></span><br><span class="line">postData = urllib.parse.urlencode(data).encode(<span class="string">"utf-8"</span>)</span><br><span class="line"><span class="comment">#请求体</span></span><br><span class="line">req = urllib.request.Request(url, postData)</span><br><span class="line"><span class="comment">#请求</span></span><br><span class="line">req.add_header(<span class="string">"User-Agent"</span>, <span class="string">"Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Maxthon/4.4.3.4000 Chrome/30.0.1599.101 Safari/537.36"</span>)</span><br><span class="line">response = urllib.request.urlopen(req)</span><br><span class="line">print(response.read().decode(<span class="string">"utf-8"</span>))</span><br></pre></td></tr></table></figure>
<p>####【9】ajax请求</p>
<p>ajax是js里面最常用的一种异步请求方法。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> urllib.request</span><br><span class="line"><span class="keyword">import</span> ssl</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">ajaxCrawler</span><span class="params">(url)</span>:</span></span><br><span class="line">    headers = &#123;</span><br><span class="line">        <span class="string">"User-Agent"</span>:<span class="string">"Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Maxthon/4.4.3.4000 Chrome/30.0.1599.101 Safari/537.36"</span></span><br><span class="line">    &#125;</span><br><span class="line">    req = urllib.request.Request(url, headers=headers)</span><br><span class="line"></span><br><span class="line">    <span class="comment">#使用ssl创建未验证的上下文</span></span><br><span class="line">    context = ssl._create_unverified_context()</span><br><span class="line">    response = urllib.request.urlopen(req,context=context)</span><br><span class="line"></span><br><span class="line">    jsonStr = response.read().decode(<span class="string">"utf-8"</span>)</span><br><span class="line">    jsonData = json.loads(jsonStr)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> jsonData</span><br><span class="line"></span><br><span class="line">url = <span class="string">"https://movie.douban.com/j/chart/top_list?type=11&amp;interval_id=100%3A90&amp;action=&amp;start=20&amp;limit=20"</span></span><br><span class="line">info = ajaxCrawler(url)</span><br><span class="line">print(info)</span><br><span class="line"></span><br><span class="line"><span class="comment"># for i in (1,3):</span></span><br><span class="line"><span class="comment">#     url = "https://movie.douban.com/j/chart/top_list?type=11&amp;interval_id=100%3A90&amp;action=&amp;start="+ str(i * 20)+"&amp;limit=20"</span></span><br><span class="line"><span class="comment">#     info = ajaxCrawler(url)</span></span><br><span class="line"><span class="comment">#     print(info)</span></span><br></pre></td></tr></table></figure>
<p>####【10】抓取糗事百科</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> urllib.request</span><br><span class="line"><span class="keyword">import</span> re,ssl</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">jokeCrawler</span><span class="params">(url)</span>:</span></span><br><span class="line">    headers = &#123;</span><br><span class="line">        <span class="string">"User-Agent"</span>: <span class="string">"Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Maxthon/4.4.3.4000 Chrome/30.0.1599.101 Safari/537.36"</span></span><br><span class="line">    &#125;</span><br><span class="line">    req = urllib.request.Request(url,headers=headers)</span><br><span class="line">    context = ssl._create_unverified_context()</span><br><span class="line">    response = urllib.request.urlopen(req,timeout=<span class="number">10</span>,context=context)</span><br><span class="line">    HTMl = response.read().decode(<span class="string">"utf-8"</span>)</span><br><span class="line"></span><br><span class="line">    regularStr = <span class="string">r'&lt;div class="author clearfix"&gt;(.*?)&lt;span class="stats-vote"&gt;&lt;i class="number"&gt;'</span></span><br><span class="line">    re_joke = re.compile(regularStr, re.S)</span><br><span class="line">    divsList = re_joke.findall(HTMl)</span><br><span class="line">    <span class="comment"># print(divsList)</span></span><br><span class="line">    dic = &#123;&#125;</span><br><span class="line">    <span class="keyword">for</span> div <span class="keyword">in</span> divsList:</span><br><span class="line">        <span class="comment"># 用户名</span></span><br><span class="line">        re_u = re.compile(<span class="string">r"&lt;h2&gt;(.*?)&lt;/h2&gt;"</span>, re.S)</span><br><span class="line">        username = re_u.findall(div)</span><br><span class="line">        username = username[<span class="number">0</span>]</span><br><span class="line">        <span class="comment"># 段子</span></span><br><span class="line">        re_d = re.compile(<span class="string">r'&lt;div class="content"&gt;\n&lt;span&gt;(.*?)&lt;/span&gt;'</span>, re.S)</span><br><span class="line">        duanzi = re_d.findall(div)</span><br><span class="line">        duanzi = duanzi[<span class="number">0</span>]</span><br><span class="line"></span><br><span class="line">        dic[username] = duanzi</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> dic</span><br><span class="line"></span><br><span class="line">url = <span class="string">'https://www.qiushibaike.com/text/page/1/'</span></span><br><span class="line">info = jokeCrawler(url)</span><br><span class="line"><span class="keyword">for</span> k, v <span class="keyword">in</span> info.items():</span><br><span class="line">    print(k + <span class="string">"的段子：\n"</span> + v)</span><br></pre></td></tr></table></figure></image>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://jyue0812.github.io/2018/05/21/python基础14/" data-id="cjhfjx3dx000aw4qxkvp4tw6x" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-python基础13" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog/2018/05/21/python基础13/" class="article-date">
  <time datetime="2018-05-21T01:02:43.886Z" itemprop="datePublished">2018-05-21</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>#Lesson 16</p>
<hr>
<p>##第十六章</p>
<p>###【1】正则表达式</p>
<p>我们在网上扒取html的时候会有很多的标签，那么怎么把一些有规律的标签内容给获取出来了，总不能一个一个的用str.find()来一个一个找吧。</p>
<p>但是正则表达式很难学，但是却非常的有用。</p>
<p>我们想判断手机号合不合法：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">checkPhone</span><span class="params">(str)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> len(str) != <span class="number">11</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">False</span></span><br><span class="line">    <span class="keyword">elif</span> str[<span class="number">0</span>] != <span class="string">"1"</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">False</span></span><br><span class="line">    <span class="keyword">elif</span> str[<span class="number">1</span>:<span class="number">3</span>] != <span class="string">"39"</span> <span class="keyword">and</span> str[<span class="number">1</span>:<span class="number">3</span>] != <span class="string">"31"</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">False</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">3</span>, <span class="number">11</span>):</span><br><span class="line">        <span class="keyword">if</span> str[i] &lt; <span class="string">"0"</span> <span class="keyword">or</span> str[i] &gt; <span class="string">"9"</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">False</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">True</span></span><br><span class="line">print(<span class="string">'13912341234'</span>)</span><br></pre></td></tr></table></figure>
<p>这样写是不是太麻烦了。</p>
<p>用正则试一下</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">checkPhone2</span><span class="params">(str)</span>:</span></span><br><span class="line">    <span class="comment">#13912345678</span></span><br><span class="line">    pat = <span class="string">r"^1(([3578]\d)|(47))\d&#123;8&#125;$"</span></span><br><span class="line">    res = re.match(pat, str)</span><br><span class="line">    <span class="keyword">return</span> res</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">print(checkPhone2(<span class="string">"14712345678"</span>))</span><br><span class="line">print(checkPhone2(<span class="string">"13412345678"</span>))</span><br><span class="line">print(checkPhone2(<span class="string">"1391234a678"</span>))</span><br><span class="line">print(checkPhone2(<span class="string">"23912345678"</span>))</span><br><span class="line">print(checkPhone2(<span class="string">"19012345678"</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment">#&lt;_sre.SRE_Match object; span=(0, 11), match='14712345678'&gt;</span></span><br><span class="line"><span class="comment">#&lt;_sre.SRE_Match object; span=(0, 11), match='13412345678'&gt;</span></span><br><span class="line"><span class="comment">#None</span></span><br><span class="line"><span class="comment">#None</span></span><br><span class="line"><span class="comment">#None</span></span><br></pre></td></tr></table></figure>
<p>####【1】re模块</p>
<p>不同的语言均有使用正则表达式，但是各不相同。python是通过re模块来实现的</p>
<p>#####re.search()</p>
<p>search(pattern, string, flags=0)</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">参数：</span><br><span class="line">patter: 匹配的正则表达式</span><br><span class="line">string: 要匹配的字符串</span><br><span class="line">flags:标志位，用于控制正则表达式的匹配方式</span><br><span class="line">功能：扫描整个字符串，并返回第一个成功的匹配</span><br></pre></td></tr></table></figure>
<p>我们看例子：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">_str = <span class="string">'I Love ShangHai And BeiJing'</span></span><br><span class="line"></span><br><span class="line">res = re.search(<span class="string">r'ShangHai'</span>, _str)</span><br><span class="line">print(res)</span><br><span class="line"></span><br><span class="line"><span class="comment">#&lt;_sre.SRE_Match object; span=(7, 15), match='ShangHai'&gt;</span></span><br></pre></td></tr></table></figure>
<p>search()方法用于在字符串中搜索正则表达式模式第一次出现的位置，这里找到，匹配的位置是（7，12）。</p>
<font color="red">注意两点：</font>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">（<span class="number">1</span>）第一个参数是正则表达式模式，也就是你要描述的搜索规则，需要使用原始字符串来写，因为这样可以避免很多不必要的麻烦。</span><br><span class="line"></span><br><span class="line">（<span class="number">2</span>）找到后返回的范围是以下标<span class="number">0</span>开始的，这跟字符串一样。如果找不到，他就返回<span class="keyword">None</span>。</span><br></pre></td></tr></table></figure>
<p>#####re.match()</p>
<p>match(pattern, string, flags=0)</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">patter: 匹配的正则表达式</span><br><span class="line">string: 要匹配的字符串</span><br><span class="line">flags:标志位，用于控制正则表达式的匹配方式,值如下</span><br><span class="line">	re.I    忽略大小写</span><br><span class="line">	re.L    做本地户识别</span><br><span class="line">	re.M    多行匹配，影响^和$</span><br><span class="line">	re.S    是.匹配包括换行符在内的所有字符</span><br><span class="line">	re.U    根据Unicode字符集解析字符，影响\w  \W  \b   \B</span><br><span class="line">	re.X    使我们以更灵活的格式理解正则表达式</span><br><span class="line">参数：</span><br><span class="line">功能：尝试从字符串的起始位置匹配一个模式，如果不是起始位置匹配成功的话，返回<span class="keyword">None</span></span><br></pre></td></tr></table></figure>
<p>看下面的例子：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line">print(re.match(<span class="string">"www"</span>, <span class="string">"www.baiwwwdu.com"</span>).span())</span><br><span class="line">print(re.match(<span class="string">"www"</span>, <span class="string">"ww.baidu.com"</span>))</span><br><span class="line">print(re.match(<span class="string">"www"</span>, <span class="string">"baidu.wwwcom"</span>))</span><br><span class="line">print(re.match(<span class="string">"www"</span>, <span class="string">"www.baidu.com"</span>).group())</span><br><span class="line">print(re.match(<span class="string">"www"</span>, <span class="string">"wwW.baidu.com"</span>, flags=re.I))</span><br></pre></td></tr></table></figure>
<font color="red">注：match和search一旦匹配成功，就是一个match object对象，而match object对象有以下方法：</font>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">group() 返回被 RE 匹配的字符串</span><br><span class="line">start() 返回匹配开始的位置</span><br><span class="line">end() 返回匹配结束的位置</span><br><span class="line">span() 返回一个元组包含匹配 (开始,结束) 的位置</span><br><span class="line">group() 返回re整体匹配的字符串，可以一次输入多个组号，对应组号匹配的字符串。</span><br><span class="line">a. group（）返回re整体匹配的字符串，</span><br><span class="line">b. group (n,m) 返回组号为n，m所匹配的字符串，如果组号不存在，则返回indexError异常</span><br><span class="line">c.groups（）,groups() 方法返回一个包含正则表达式中所有小组字符串的元组，从 <span class="number">1</span> 到所含的小组号，通常groups()不需要参数，返回一个元组，元组中的元就是正则表达式中定义的组。</span><br></pre></td></tr></table></figure>
<p>group()例子：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line">a = <span class="string">"123abc456"</span></span><br><span class="line">print(re.search(<span class="string">"([0-9]*)([a-z]*)([0-9]*)"</span>,a).group(<span class="number">0</span>))   <span class="comment">#123abc456,返回整体</span></span><br><span class="line">print(re.search(<span class="string">"([0-9]*)([a-z]*)([0-9]*)"</span>,a).group(<span class="number">1</span>))   <span class="comment">#123</span></span><br><span class="line">print(re.search(<span class="string">"([0-9]*)([a-z]*)([0-9]*)"</span>,a).group(<span class="number">2</span>))   <span class="comment">#abc</span></span><br><span class="line">print(re.search(<span class="string">"([0-9]*)([a-z]*)([0-9]*)"</span>,a).group(<span class="number">3</span>))   <span class="comment">#456</span></span><br></pre></td></tr></table></figure>
<p>#####re.findall()</p>
<p>findall(pattern, string, flags=0)</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">patter: 匹配的正则表达式</span><br><span class="line">string: 要匹配的字符串</span><br><span class="line">flags:标志位，用于控制正则表达式的匹配方式</span><br><span class="line">功能：扫描整个字符串，并返回结果列表</span><br></pre></td></tr></table></figure>
<p>例子：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line">print(re.findall(<span class="string">"ShangHai"</span>, <span class="string">"Love shanghai!Shanghai"</span>, flags=re.I))</span><br><span class="line"></span><br><span class="line"><span class="comment">#['shanghai', 'Shanghai']</span></span><br></pre></td></tr></table></figure>
<p>#####re.compile()<br>编译正则表达式模式，返回一个对象的模式。（可以把那些常用的正则表达式编译成正则表达式对象，这样可以提高一点效率。）</p>
<p>re.compile(pattern,flags=0)</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">pattern: 编译时用的表达式字符串。</span><br><span class="line"></span><br><span class="line">flags 编译标志位，用于修改正则表达式的匹配方式，如：是否区分大小写，多行匹配等。常用的</span><br></pre></td></tr></table></figure>
<p>结合findall()使用：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line">tt = <span class="string">"Shanghai ShangHai  shanghai shangHai"</span></span><br><span class="line">rr = re.compile(<span class="string">r'\w*an\w*'</span>)</span><br><span class="line">print(rr,type(rr))</span><br><span class="line">print(rr.findall(tt))   <span class="comment">#查找所有包含'oo'的单词</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#re.compile('\\w*an\\w*') &lt;class '_sre.SRE_Pattern'&gt;</span></span><br><span class="line"><span class="comment">#['Shanghai', 'ShangHai', 'shanghai', 'shangHai']</span></span><br></pre></td></tr></table></figure>
<p>####【2】通配符</p>
<p>例如:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">_str = <span class="string">'I Love ShangHai And BeiJing'</span></span><br><span class="line"></span><br><span class="line">print(_str.find(<span class="string">'ShangHai'</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment">#7</span></span><br><span class="line">```，</span><br><span class="line">但是find()也有找不到的，那怎么办？</span><br><span class="line"></span><br><span class="line">通配符，可能有些人会熟悉一些，比如我们在linux下面找一个word类型的文件时，我们就find `*.docx`。这里的*就代表所有的意思。</span><br><span class="line"></span><br><span class="line">正则表达式也有通配符，就是一个英文点号`.`来表示，它可以匹配除了换行符以外的任何字符。</span><br><span class="line"></span><br><span class="line">```python</span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">_str = <span class="string">'I Love ShangHai And BeiJing'</span></span><br><span class="line"></span><br><span class="line">res = re.search(<span class="string">r'ShangHai'</span>, _str)</span><br><span class="line">res1 = re.search(<span class="string">r'(.)'</span>, _str)</span><br><span class="line"></span><br><span class="line">print(res)</span><br><span class="line">print(res1)</span><br><span class="line"></span><br><span class="line"><span class="comment">#&lt;_sre.SRE_Match object; span=(7, 15), match='ShangHai'&gt;</span></span><br><span class="line"><span class="comment">#&lt;_sre.SRE_Match object; span=(0, 1), match='I'&gt;</span></span><br></pre></td></tr></table></figure>
<p>一个点只代表一个字符。</p>
<p>####【3】正则表达式中常用的字符含义</p>
<p>#####1、普通字符和10个元字符：</p>
<table>
<thead>
<tr>
<th>元字符</th>
<th>用法</th>
<th>写法（以abc为例子）</th>
<th>以abc为例子(可以匹配的类型)</th>
</tr>
</thead>
<tbody>
<tr>
<td>普通字符</td>
<td>匹配自身</td>
<td>abc</td>
<td>abc</td>
</tr>
<tr>
<td>.</td>
<td>匹配任意除换行符”\n”外的字符(在DOTALL模式中也能匹配换行符</td>
<td>a.c</td>
<td>abc</td>
</tr>
<tr>
<td>\</td>
<td>转义字符，使后一个字符改变原来的意思</td>
<td>a.c;a\c</td>
<td>a.c;a\c</td>
</tr>
<tr>
<td>*</td>
<td>匹配前一个字符0或多次</td>
<td>abc*</td>
<td>abccc</td>
</tr>
<tr>
<td>+</td>
<td>匹配前一个字符1次或无限次</td>
<td>abc+</td>
<td>abccc</td>
</tr>
<tr>
<td>?</td>
<td>匹配一个字符0次或1次</td>
<td>abc?</td>
<td>ab;abc</td>
</tr>
<tr>
<td>^</td>
<td>匹配字符串开头。在多行模式[]中匹配每一行的开头</td>
<td>^abc</td>
<td>abc</td>
</tr>
<tr>
<td>\</td>
<td></td>
<td>或。匹配\</td>
<td>左右表达式任意一个，从左到右匹配，如果\</td>
<td>没有包括在()中，则它的范围是整个正则表达式</td>
<td>abc\</td>
<td>def</td>
<td>abc,def</td>
</tr>
<tr>
<td>{}</td>
<td>{m}匹配前一个字符m次，{m,n}匹配前一个字符m至n次，若省略n，则匹配m至无限次</td>
<td>ab{1,2}c</td>
<td>abbc</td>
</tr>
<tr>
<td>[]</td>
<td>字符集。对应的位置可以是字符集中任意字符。字符集中的字符可以逐个列出，也可以给出范围，如[abc]或[a-c]。[^abc]表示取反，即非abc。所有特殊字符在字符集中都失去其原有的特殊含义。用\反斜杠转义恢复特殊字符的特殊含义。</td>
<td>a[bcd]e</td>
<td>abe,ace,ade</td>
</tr>
<tr>
<td>()</td>
<td>被括起来的表达式将作为分组，从表达式左边开始没遇到一个分组的左括号“（”，编号+1.分组表达式作为一个整体，可以后接数量词。表达式中的、</td>
<td>仅在该组中有效。</td>
<td>(abc){2}，a(123\</td>
<td>456)c，abcabc，a456c</td>
</tr>
</tbody>
</table>
<hr>
<p>这里需要强调一下反斜杠\的作用：</p>
<pre><code>1)反斜杠后边跟元字符去除特殊功能；（即将特殊字符转义成普通字符）
2)反斜杠后边跟普通字符实现特殊功能；（即预定义字符）
3)引用序号对应的字组所匹配的字符串。
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line">a=re.search(<span class="string">r'(tina)(fei)haha\2'</span>,<span class="string">'tinafeihahafei tinafeihahatina'</span>).group()</span><br><span class="line">print(a)</span><br><span class="line"><span class="comment">#tinafeihahafei</span></span><br><span class="line"><span class="comment">#\2代表第二个（）中的‘fei</span></span><br></pre></td></tr></table></figure>
<p>####2、预定义字符集（可以写在字符集[…]中） </p>
<table>
<thead>
<tr>
<th>预定义字符集</th>
<th>用法</th>
<th>写法（以abc为例子）</th>
<th>以abc为例子(可以匹配的类型)</th>
</tr>
</thead>
<tbody>
<tr>
<td>\d</td>
<td>数字:[0-9]</td>
<td>a\dc</td>
<td>a1c</td>
</tr>
<tr>
<td>\D</td>
<td>非数字:[^\d]</td>
<td>a\Dc</td>
<td>abc</td>
</tr>
<tr>
<td>\s</td>
<td>匹配任何空白字符:[&lt;空格&gt;\t\r\n\f\v]</td>
<td>a\sc</td>
<td>a c</td>
</tr>
<tr>
<td>\S</td>
<td>非空白字符:[^\s]</td>
<td>a\Sc</td>
<td>abc</td>
</tr>
<tr>
<td>\w</td>
<td>匹配包括下划线在内的任何字字符:[A-Za-z0-9_]</td>
<td>a\wc</td>
<td>abc</td>
</tr>
<tr>
<td>\W</td>
<td>匹配非字母字符，即匹配特殊字符</td>
<td>a\Wc</td>
<td>a c</td>
</tr>
<tr>
<td>\A</td>
<td>仅匹配字符串开头,同^</td>
<td>\Aabc</td>
<td>abc</td>
</tr>
<tr>
<td>\Z</td>
<td>仅匹配字符串结尾，同<code>$</code></td>
<td>abc\Z</td>
<td>abc</td>
</tr>
<tr>
<td>\b</td>
<td>匹配\w和\W之间，即匹配单词边界匹配一个单词边界，也就是指单词和空格间的位置。例如， ‘er\b’ 可以匹配”never” 中的 ‘er’，但不能匹配 “verb” 中的 ‘er’。</td>
<td>\babc,\ba,\b!bc</td>
<td>空格abc空格,a!bc</td>
</tr>
<tr>
<td>\B</td>
<td>匹配非单词边界</td>
<td>a\Bbc</td>
<td>abc</td>
</tr>
</tbody>
</table>
<p>|</p>
<p>结合上面的表格看个例子：</p>
<p>匹配单个字符与数字：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">print(<span class="string">"----------匹配单个字符与数字---------"</span>)</span><br><span class="line"></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">[0123456789]     []是字符集合，表示匹配方括号中所包含的任意一个字符</span></span><br><span class="line"><span class="string">[sunck]          匹配's','u','n','c','k'中任意一个字符</span></span><br><span class="line"><span class="string">[a-z]            匹配任意小写字母</span></span><br><span class="line"><span class="string">[A-Z]            匹配任意大写字母</span></span><br><span class="line"><span class="string">[0-9]            匹配任意数字，类似[0123456789]</span></span><br><span class="line"><span class="string">[0-9a-zA-Z]      匹配任意的数字和字母</span></span><br><span class="line"><span class="string">[0-9a-zA-Z_]     匹配任意的数字、字母和下划线</span></span><br><span class="line"><span class="string">[^ ShangHai]         匹配除了ShangHai这几个字母以外的所有字符，中括号里的^称为脱字符，表示不匹配集合中的字符</span></span><br><span class="line"><span class="string">[^0-9]           匹配所有的非数字字符</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"></span><br><span class="line">print(re.findall(<span class="string">"[ShangHai]"</span>, <span class="string">"ShangHai so666 beautiful"</span>))</span><br></pre></td></tr></table></figure>
<p>锚字符(边界字符)：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line">print(<span class="string">"--------------锚字符(边界字符)-------------"</span>)</span><br><span class="line"></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">^     行首匹配，和在[]里的^不是一个意思</span></span><br><span class="line"><span class="string">$     行尾匹配</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">\A    匹配字符串开始，它和^的区别是,\A只匹配整个字符串的开头，即使在re.M模式下也不会匹配它行的行首</span></span><br><span class="line"><span class="string">\Z    匹配字符串结束，它和$的区别是,\Z只匹配整个字符串的结束，即使在re.M模式下也不会匹配它行的行尾</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">\b    匹配一个单词的边界，也就是值单词和空格间的位置</span></span><br><span class="line"><span class="string">      'er\b'可以匹配never,不能匹配nerve</span></span><br><span class="line"><span class="string">\B    匹配非单词边界</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#不区分大小写，搜索以Shanghai开头的</span></span><br><span class="line">print(re.search(<span class="string">"^ShangHai"</span>, <span class="string">"shanghai is  good"</span>,re.I))</span><br><span class="line"><span class="comment">#不区分大小写，搜索Good结尾的</span></span><br><span class="line">print(re.search(<span class="string">"Good$"</span>, <span class="string">"ShangHai is  good"</span>,re.I))</span><br><span class="line"><span class="comment">#多行模式，扫描整个字符串，以shanghai开头，并返回结果列表</span></span><br><span class="line">print(re.findall(<span class="string">"^shanghai"</span>, <span class="string">"shanghai is  good\nshanghai so beautiful"</span>, re.M))</span><br><span class="line">print(re.findall(<span class="string">"\Ashanghai"</span>, <span class="string">"shanghai is  good\nshanghai so beautiful"</span>, re.M))</span><br><span class="line">	<span class="comment">#多行模式，扫描整个字符串，以beautiful结尾，并返回结果列表</span></span><br><span class="line">print(re.findall(<span class="string">"beautiful$"</span>, <span class="string">"shanghai is  good\nshanghai so beautiful"</span>, re.M))</span><br><span class="line">print(re.findall(<span class="string">"beautiful\Z"</span>, <span class="string">"shanghai is  good\nshanghai so beautiful"</span>, re.M))</span><br><span class="line">	<span class="comment">#搜索以er为边界符</span></span><br><span class="line">print(re.search(<span class="string">r"er\b"</span>, <span class="string">"never"</span>))</span><br><span class="line">print(re.search(<span class="string">r"er\b"</span>, <span class="string">"nerve"</span>))</span><br><span class="line">	<span class="comment">#搜索er为非边界符</span></span><br><span class="line">print(re.search(<span class="string">r"er\B"</span>, <span class="string">"never"</span>))</span><br><span class="line">print(re.search(<span class="string">r"er\B"</span>, <span class="string">"nerve"</span>))</span><br></pre></td></tr></table></figure>
<p>匹配多个字符</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line">print(<span class="string">"-------------------匹配多个字符------------------------"</span>)</span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">说明：下方的x、y、z均为假设的普通字符,n、m（非负整数），不是正则表达式的元字符</span></span><br><span class="line"><span class="string">(xyz)    匹配小括号内的xyz(作为一个整体去匹配)</span></span><br><span class="line"><span class="string">x?       匹配0个或者1个x</span></span><br><span class="line"><span class="string">x*       匹配0个或者任意多个x（.* 表示匹配0个或者任意多个字符(换行符除外)）</span></span><br><span class="line"><span class="string">x+       匹配至少一个x</span></span><br><span class="line"><span class="string">x&#123;n&#125;     匹配确定的n个x（n是一个非负整数）</span></span><br><span class="line"><span class="string">x&#123;n,&#125;    匹配至少n个x</span></span><br><span class="line"><span class="string">x&#123;n,m&#125;   匹配至少n个最多m个x。注意：n &lt;= m</span></span><br><span class="line"><span class="string">x|y      |表示或，匹配的是x或y</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line">print(re.findall(<span class="string">r"a?"</span>, <span class="string">"aaabaa"</span>))<span class="comment">#非贪婪匹配(尽可能少的匹配)</span></span><br><span class="line">print(re.findall(<span class="string">r"a*"</span>, <span class="string">"aaabaa"</span>))<span class="comment">#贪婪匹配(尽可能多的匹配)</span></span><br><span class="line">print(re.findall(<span class="string">r"a+"</span>, <span class="string">"aaabaaaaaa"</span>))<span class="comment">#贪婪匹配(尽可能多的匹配)</span></span><br><span class="line">print(re.findall(<span class="string">r"a&#123;3&#125;"</span>, <span class="string">"aaabaa"</span>))</span><br><span class="line">print(re.findall(<span class="string">r"a&#123;3,&#125;"</span>, <span class="string">"aaaaabaaa"</span>))<span class="comment">#贪婪匹配(尽可能多的匹配)</span></span><br><span class="line">print(re.findall(<span class="string">r"a&#123;3,6&#125;"</span>, <span class="string">"aaaaaaaabaaa"</span>))</span><br><span class="line">print(re.findall(<span class="string">r"((s|S)hangHai)"</span>, <span class="string">"ShangHai--shanghai"</span>))</span><br></pre></td></tr></table></figure>
<p>特殊：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="comment">#需求，提取shanghai……ok,</span></span><br><span class="line">str = <span class="string">"ShangHai is good ok!shanghai so beautiful ok"</span></span><br><span class="line">print(re.findall(<span class="string">r"shanghai.*?ok"</span>, str,re.I))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">print(<span class="string">"---------------特殊-------------------"</span>)</span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">*?   +?   x?  最小匹配，通常都是尽可能多的匹配，可以使用这种解决贪婪匹配</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">(?:x)        类似(xyz),但不表示一个组</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="comment">#注释：  /*  part1  */  /*   part2  */</span></span><br><span class="line">s =<span class="string">r'/* part 1 */ code /* part 2 */'</span></span><br><span class="line">print(re.findall( <span class="string">r'/\*.*\*/'</span>, s ))</span><br><span class="line">print(re.findall( <span class="string">r'/\*.*?\*/'</span>, s ))</span><br><span class="line">print(re.findall(<span class="string">r'(/.*?/)'</span>,s))</span><br><span class="line">print(re.findall(<span class="string">r'(.*)'</span>,s))</span><br><span class="line">print(re.findall(<span class="string">r'(.*?)'</span>,s))</span><br><span class="line">print(re.findall(<span class="string">r'(?:/\*(.*?)\*/)'</span>,s))</span><br></pre></td></tr></table></figure>
<p>####【4】加深re模块学习</p>
<p>#####re.split()<br>通过正则表达式将字符串分离。如果用括号将正则表达式括起来，那么匹配的字符串也会被列入到list中返回。maxsplit是分离的次数，maxsplit=1分离一次，默认为0，不限制次数。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line">str1 = <span class="string">"ShangHai    is a good place"</span></span><br><span class="line">print(str1.split(<span class="string">" "</span>))</span><br><span class="line">print(re.split(<span class="string">r" +"</span>, str1))</span><br><span class="line"></span><br><span class="line"><span class="comment">#['ShangHai', '', '', '', 'is', 'a', 'good', 'place']</span></span><br><span class="line"><span class="comment">#['ShangHai', 'is', 'a', 'good', 'place']</span></span><br></pre></td></tr></table></figure>
<p>#####re.finditer()</p>
<p>finditer(pattern, string, flags=0)<br>参数：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">patter: 匹配的正则表达式</span><br><span class="line">string: 要匹配的字符串</span><br><span class="line">flags:标志位，用于控制正则表达式的匹配方式</span><br><span class="line">功能：与findall类似，扫描整个字符串，返回的是一个迭代器</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">str3 = <span class="string">"ShangHai is good ok!shanghai so beautiful ok"</span></span><br><span class="line">d = re.finditer(<span class="string">r"(shanghai)"</span>, str3,re.I)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> d:</span><br><span class="line">    print(i.group())</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#ShangHai</span></span><br><span class="line"><span class="comment">#shanghai</span></span><br></pre></td></tr></table></figure>
<p>#####sub()\subn()<br>re.sub(pattern, repl, string, count=0, flags=0)</p>
<p>找到 RE 匹配的所有子串，并将其用一个不同的字符串替换。可选参数 count 是模式匹配後替换的最大次数；count 必须是非负整数。缺省值是 0 表示替换所有的匹配。如果无匹配，字符串将会无改变地返回。</p>
<p>re.subn(pattern, repl, string, count=0, flags=0)</p>
<p>与re.sub方法作用一样，但返回的是包含新字符串和替换执行次数的两元组。</p>
<p>参数：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">pattern:  正则表达式(规则)</span><br><span class="line">repl:     指定的用来替换的字符串</span><br><span class="line">string:   目标字符串</span><br><span class="line">count:    最多替换次数</span><br><span class="line">功能：在目标字符串中以正则表达式的规则匹配字符串，再把他们替换成指定的字符串。可以指定替换的次数,如果不指定，替换所有的匹配字符串</span><br><span class="line"></span><br><span class="line">区别：前者返回一个被替换的字符串，后者返回一个元组，第一个元素被替换的字符串，第二个元素表示被替换的次数</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">sstr = <span class="string">"shanghai is b b   good place"</span></span><br><span class="line"><span class="comment"># print(re.sub(r"(b)", "a", sstr))</span></span><br><span class="line"><span class="comment"># print(type(re.sub(r"(b)", "a", sstr)))</span></span><br><span class="line">print(re.subn(<span class="string">r"(b)"</span>, <span class="string">"a"</span>, sstr))</span><br><span class="line">print(type(re.subn(<span class="string">r"(b)"</span>, <span class="string">"a"</span>, sstr)))</span><br></pre></td></tr></table></figure>
<p>#####?P<name></name></p>
<p>?P<name>是段落的表示，那么表示可以自己取个名称。</name></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">str6 = <span class="string">"021-56173036"</span></span><br><span class="line">m = re.match(<span class="string">r"(?P&lt;first&gt;\d&#123;3&#125;)-(?P&lt;last&gt;\d&#123;8&#125;)"</span>, str6)</span><br><span class="line"><span class="comment">#使用序号获取对应组的信息，group(0)一直代表的原始字符串</span></span><br><span class="line">print(m.group())</span><br><span class="line">print(m.group(<span class="number">1</span>))</span><br><span class="line">print(m.group(<span class="string">"first"</span>))</span><br><span class="line">print(m.group(<span class="number">2</span>))</span><br><span class="line">print(m.group(<span class="string">"last"</span>))</span><br><span class="line"><span class="comment">#查看匹配的各组的情况</span></span><br><span class="line">print(m.groups())</span><br></pre></td></tr></table></figure>
<p>###【2】urllib模块</p>
<p>python中的urllib模块中的方法<br>urllib是基于http的高层库，它有以下三个主要功能：</p>
<p>（1）request处理客户端的请求</p>
<p>（2）response处理服务端的响应</p>
<p>（3）parse会解析url</p>
<p>下面讨论的是request</p>
<p>urllib.request模块定义了一些打开URLs（一般是HTTP协议）复杂操作像是basic 和摘要模式认证，重定向，cookies等的方法和类。这个模块式模拟文件模块实现的，将本地的文件路径改为远程的url。因此函数返回的是类文件对象（file-like object）</p>
<p>urllib.request.urlopen(url, data=None, [timeout, ]*, cafile=None, capath=None, cadefault=False, context=None)</p>
<p>url可以是一个字符串形式或者Request对象</p>
<p>如果data参数有值就是用post方式响应否则默认为GET 方式</p>
<p>urllib.request 模块使用HTTP/1.1 的无连接的状态协议</p>
<p>urllib.request 模块使用HTTP/1.1 的无连接的状态协议</p>
<p>urlopen()函数返回类文件对象，提供以下内建方法：</p>
<ul>
<li><p>read() , readline() ,readlines() , fileno() , close() ：这些方法的使用方式与文件对象完全一样</p>
</li>
<li><p>info()：返回一个httplib.HTTPMessage对象，表示远程服务器返回的头信息</p>
</li>
<li><p>getcode()：返回Http状态码。（详情参考<a href="https://tools.ietf.org/html/rfc7231#section-6）" target="_blank" rel="noopener">https://tools.ietf.org/html/rfc7231#section-6）</a></p>
</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://jyue0812.github.io/2018/05/21/python基础13/" data-id="cjhfjx3du0009w4qxfz0luipz" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-python基础12" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog/2018/05/21/python基础12/" class="article-date">
  <time datetime="2018-05-21T01:02:30.160Z" itemprop="datePublished">2018-05-21</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>#Lesson 12</p>
<hr>
<p>##第十四章</p>
<p>###【9】描述符(property的原理)<br>此前提到过property()函数，现在我们来剖析一下它是怎么实现的。</p>
<p>描述符(descriptor)，用一句话来解释，描述符就是将某种特殊类型的类的实例指派给一个类的属性，那什么是特殊类型的类了？就是至少要在这个类中定义了<code>__get__()</code>、<code>__set__()</code>、<code>__delete__()</code>三个特殊方法中的任意一个。</p>
<table>
<thead>
<tr>
<th>魔术方法</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>get</strong>(self,instance,owner)</td>
<td>用于访问它的属性，它返回属性的值</td>
</tr>
<tr>
<td><strong>set</strong>(self, instance,value)</td>
<td>将在属性分配操作中调用，不返回任何内容</td>
</tr>
<tr>
<td><strong>delete</strong>(self,instance)</td>
<td>控制删除操作，不返回任何内容</td>
</tr>
</tbody>
</table>
<p>instance表示实例对象，owner是所有者的类。</p>
<p>descriptor的实例自己访问自己是不会触发<strong>get</strong>，而会触发<strong>call</strong>，只有descriptor作为其它类的属性才有意义。</p>
<p>举个例子：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyDescriptor</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__get__</span><span class="params">(self, instance, owner)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">'__get'</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__set__</span><span class="params">(self,instance,value)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">'__set__'</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__delete__</span><span class="params">(self, instance)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">'__delete__'</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Test</span>:</span></span><br><span class="line">    x = MyDescriptor()</span><br><span class="line"></span><br><span class="line">test = Test()</span><br><span class="line"></span><br><span class="line">print(test.x)</span><br><span class="line"></span><br><span class="line"><span class="comment">#__get</span></span><br></pre></td></tr></table></figure>
<p>上面的例子MyDescriptor实现了方法<code>__get__()</code>、<code>__set__()</code>、<code>__delete__()</code>，并且将它的类实例指派给Test类的属性里面，所以MyDescriptor就是所谓的描述符类。</p>
<p>在调用x属性的时候，它会自动调用<code>__get__()</code>属性，那么在从新赋值和删除都是一样的了。</p>
<p>那我们封装自己的property方法。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyProperty</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, fget=None, fset=None, fdel=None)</span>:</span></span><br><span class="line">        self.fget = fget</span><br><span class="line">        self.fset = fset</span><br><span class="line">        self.fdel = fdel</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__get__</span><span class="params">(self, instance, owner)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.fget(instance)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__set__</span><span class="params">(self, instance, value)</span>:</span></span><br><span class="line">        self.fset(instance, value)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__delete__</span><span class="params">(self, instance)</span>:</span></span><br><span class="line">        self.fdel(instance)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Test</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        self._x = <span class="keyword">None</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">getX</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self._x</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">setX</span><span class="params">(self, value)</span>:</span></span><br><span class="line">        self._x = value</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">delX</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">del</span> self._x</span><br><span class="line"></span><br><span class="line">    x = MyProperty(getX, setX, delX)</span><br><span class="line"></span><br><span class="line">test = Test()</span><br><span class="line"><span class="comment">#获取</span></span><br><span class="line">print(test._x)</span><br><span class="line"><span class="comment">#设置</span></span><br><span class="line">test.x = <span class="string">'tom'</span></span><br><span class="line">print(test._x)</span><br><span class="line"><span class="comment">#删除成功</span></span><br><span class="line"><span class="keyword">del</span> test._x</span><br><span class="line"></span><br><span class="line"><span class="comment">#None</span></span><br><span class="line"><span class="comment">#tom</span></span><br></pre></td></tr></table></figure>
<p>###【10】网上银行系统</p>
<p>见网上银行系统文件夹。</p>
<p>模拟网上银行系统，由于现在我们没有任何的数据库和缓存系统，我们所有的记录都要保存在文件中。</p>
<p>#第十五章</p>
<p>##高阶函数的使用</p>
<p>###【1】reduce()函数</p>
<p>reduce函数和我们之前学习的map函数类似。</p>
<p>reduce也是接受两个参数，一个函数f，一个list，但行为不同，reduce()传入的函数 f 必须接收两个参数，reduce()对list的每个元素反复调用函数f，并返回最终结果值。</p>
<p>例如，编写一个f函数，接收x和y，返回x和y的和：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> functools <span class="keyword">import</span> reduce</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f</span><span class="params">(x, y)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> x + y</span><br><span class="line">reduce(f, [<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">9</span>])</span><br></pre></td></tr></table></figure>
<p>调用 reduce(f, [1, 3, 5, 7, 9])时，reduce函数将做如下计算</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">先计算头两个元素：f(<span class="number">1</span>, <span class="number">3</span>)，结果为<span class="number">4</span>；</span><br><span class="line">再把结果和第<span class="number">3</span>个元素计算：f(<span class="number">4</span>, <span class="number">5</span>)，结果为<span class="number">9</span>；</span><br><span class="line">再把结果和第<span class="number">4</span>个元素计算：f(<span class="number">9</span>, <span class="number">7</span>)，结果为<span class="number">16</span>；</span><br><span class="line">再把结果和第<span class="number">5</span>个元素计算：f(<span class="number">16</span>, <span class="number">9</span>)，结果为<span class="number">25</span>；</span><br><span class="line">由于没有更多的元素了，计算结束，返回结果<span class="number">25</span>。</span><br></pre></td></tr></table></figure>
<p>上述计算实际上是对 list 的所有元素求和。虽然Python内置了求和函数sum()，但是，利用reduce()求和也很简单。</p>
<p>reduce()还可以接收第3个可选参数，作为计算的初始值。如果把初始值设为100，计算：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">reduce(f, [<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">9</span>], <span class="number">100</span>)</span><br></pre></td></tr></table></figure>
<p>结果将变为125，因为第一轮计算是：</p>
<p>计算初始值和第一个元素：f(100, 1)，结果为101。</p>
<p>###【2】sorted()函数</p>
<p>sorted函数是python的内置函数，和sort差不多，只不过sort是list的方法而已。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">#普通排序</span></span><br><span class="line">list1 = [<span class="number">4</span>,<span class="number">7</span>,<span class="number">2</span>,<span class="number">6</span>,<span class="number">3</span>]</span><br><span class="line">list2 = sorted(list1)<span class="comment">#默认升序排序</span></span><br><span class="line">print(list1)</span><br><span class="line">print(list2)</span><br><span class="line"></span><br><span class="line"><span class="comment">#按绝对值大小排序</span></span><br><span class="line">list3 = [<span class="number">4</span>,<span class="number">-7</span>,<span class="number">2</span>,<span class="number">6</span>,<span class="number">-3</span>]</span><br><span class="line"><span class="comment">#key接受函数来实现自定义排序规则</span></span><br><span class="line">list4 = sorted(list3, key=abs)</span><br><span class="line">print(list3)</span><br><span class="line">print(list4)</span><br><span class="line"></span><br><span class="line"><span class="comment">#降序</span></span><br><span class="line">list5 = [<span class="number">4</span>,<span class="number">7</span>,<span class="number">2</span>,<span class="number">6</span>,<span class="number">3</span>]</span><br><span class="line">list6 = sorted(list5, reverse=<span class="keyword">True</span>)<span class="comment">#默认升序排序</span></span><br><span class="line">print(list5)</span><br><span class="line">print(list6)</span><br><span class="line"></span><br><span class="line"><span class="comment">#函数可以自己写</span></span><br><span class="line"><span class="comment">#按照字符的长短排序</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">myLen</span><span class="params">(str)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> len(str)</span><br><span class="line">list7 = [<span class="string">'b333'</span>,<span class="string">'a1111111'</span>,<span class="string">'c22'</span>,<span class="string">'d5554'</span>]</span><br><span class="line">list8 = sorted(list7,key=myLen)<span class="comment">#默认升序排序</span></span><br><span class="line">print(list7)</span><br><span class="line">print(list8)</span><br></pre></td></tr></table></figure>
<p>###【3】冒泡排序</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">array = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">6</span>,<span class="number">5</span>,<span class="number">4</span>]</span><br><span class="line">num = <span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(len(array)):</span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> range(i):</span><br><span class="line">        num += <span class="number">1</span></span><br><span class="line">        <span class="keyword">if</span> array[j] &gt; array[j + <span class="number">1</span>]:</span><br><span class="line">            array[j], array[j + <span class="number">1</span>] = array[j + <span class="number">1</span>], array[j]</span><br><span class="line">print(array,num)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 0.0</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># 0.0</span></span><br><span class="line"><span class="comment"># 0.1</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># 0.0</span></span><br><span class="line"><span class="comment"># 0.1</span></span><br><span class="line"><span class="comment"># 0.2</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># 0.0</span></span><br><span class="line"><span class="comment"># 0.1</span></span><br><span class="line"><span class="comment"># 0.2</span></span><br><span class="line"><span class="comment"># 0.4</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># 0.0</span></span><br><span class="line"><span class="comment"># 0.1</span></span><br><span class="line"><span class="comment"># 0.2</span></span><br><span class="line"><span class="comment"># 0.4</span></span><br><span class="line"><span class="comment"># 0.5</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#[1, 2, 3, 5, 4, 6] 15</span></span><br></pre></td></tr></table></figure>
<p>while循环的：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">array = [<span class="number">1</span>, <span class="number">-2</span>, <span class="number">4</span>, <span class="number">7</span>, <span class="number">6</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">tmp = <span class="string">''</span></span><br><span class="line">start = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> len(array) == <span class="number">0</span> <span class="keyword">and</span> len(array) == <span class="number">1</span>:</span><br><span class="line">    print(array)</span><br><span class="line">    exit()</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(len(array)<span class="number">-1</span>):</span><br><span class="line">    <span class="keyword">while</span> array[i+<span class="number">1</span>] &lt; array[i]:</span><br><span class="line">        tmp = array[i+<span class="number">1</span>]</span><br><span class="line">        <span class="keyword">del</span> array[i+<span class="number">1</span>]</span><br><span class="line">        array.insert(i,tmp)</span><br><span class="line"></span><br><span class="line">print(array)</span><br><span class="line"></span><br><span class="line"><span class="comment">#[-2, 1, 4, 6, 3, 2, 3, 7]</span></span><br></pre></td></tr></table></figure>
<p>###单元测试</p>
<p>####【4】函数的单元测试</p>
<p>unittest是一个python的单元测试框架。那么它是做什么的了？</p>
<p>作用：用来对一个函数、一个类或者一个模块来进行正确性校验工作</p>
<p>1、单元测试通过了，说明我们测试的函数是正常的</p>
<p>2、单元测试不通过，说明函数功能有BUG，要么测试条件输入有误</p>
<p>看下面的例子</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> unittest</span><br><span class="line"><span class="keyword">from</span> demo <span class="keyword">import</span> mySum</span><br><span class="line"><span class="keyword">from</span> demo <span class="keyword">import</span> mySub</span><br><span class="line"></span><br><span class="line"><span class="comment">#unittest是一个继承包</span></span><br><span class="line"><span class="comment">#继承unittest包的TestCase类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Test</span><span class="params">(unittest.TestCase)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">setUp</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">"开始测试时自动调用"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">tearDown</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">"结束测试时自动调用"</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">#为了测试mySum</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">test_mySum</span><span class="params">(self)</span>:</span></span><br><span class="line">    <span class="comment">#这是一个断言，继承testcase得到的第一个是调用的函数，第二个是值</span></span><br><span class="line">        self.assertEqual(mySum(<span class="number">1</span>,<span class="number">2</span>), <span class="number">3</span>, <span class="string">"加法有误"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">test_mySub</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.assertEqual(mySub(<span class="number">2</span>,<span class="number">1</span>), <span class="number">1</span>, <span class="string">"减法有误"</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    unittest.main()</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#demo.py</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">mySum</span><span class="params">(x, y)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> x + y</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">mySub</span><span class="params">(x, y)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> x - y</span><br><span class="line"></span><br><span class="line">print(mySum(<span class="number">1</span>,<span class="number">2</span>))</span><br></pre></td></tr></table></figure>
<p>这是一个成功的案例那么我们让它失败：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#demo.py</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#我们在后面加上一个+1，这样结果就不相同了</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">mySum</span><span class="params">(x, y)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> x + y + <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">mySub</span><span class="params">(x, y)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> x - y</span><br><span class="line"></span><br><span class="line">print(mySum(<span class="number">1</span>,<span class="number">2</span>))</span><br></pre></td></tr></table></figure>
<p>再次运行</p>
<p>会报错，应为4 != 3 </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#Traceback (most recent call last):</span></span><br><span class="line"><span class="comment">#  File "/Users/ruidong/PycharmProjects/project/demo.py", line #15, in test_mySum</span></span><br><span class="line"><span class="comment">#    self.assertEqual(mySum(1,2), 3, "加法有误")</span></span><br><span class="line"><span class="comment">#AssertionError: 4 != 3 : 加法有误</span></span><br></pre></td></tr></table></figure>
<image src="images/TestCase.png">

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">一个TestCase的实例就是一个测试用例。什么是测试用例呢？就是一个完整的测试流程，包括测试前准备环境的搭建(setUp)，执行测试代码(run)，以及测试后环境的还原(tearDown)。元测试(unit test)的本质也就在这里，一个测试用例是一个完整的测试单元，通过运行这个测试单元，可以对某一个问题进行验证。</span><br><span class="line"></span><br><span class="line">而多个测试用例集合在一起，就是TestSuite，而且TestSuite也可以嵌套TestSuite。</span><br><span class="line"></span><br><span class="line">TestLoader是用来加载TestCase到TestSuite中的，其中有几个loadTestsFrom__()方法，就是从各个地方寻找TestCase，创建它们的实例，然后add到TestSuite中，再返回一个TestSuite实例。</span><br><span class="line"></span><br><span class="line">TextTestRunner是来执行测试用例的，其中的run(test)会执行TestSuite/TestCase中的run(result)方法。</span><br><span class="line"></span><br><span class="line">测试的结果会保存到TextTestResult实例中，包括运行了多少测试用例，成功了多少，失败了多少等信息。</span><br></pre></td></tr></table></figure>
<p>###【5】对类进行单元测试</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> unittest</span><br><span class="line"><span class="keyword">from</span> person <span class="keyword">import</span> Person</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Test</span><span class="params">(unittest.TestCase)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">test_init</span><span class="params">(self)</span>:</span></span><br><span class="line">        p = Person(<span class="string">"hanmeimei"</span>, <span class="number">20</span>)</span><br><span class="line">        self.assertEqual(p.name, <span class="string">"hanmeimei"</span>, <span class="string">"属性赋值有误"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">test_getAge</span><span class="params">(self)</span>:</span></span><br><span class="line">        p = Person(<span class="string">"hanmeimei"</span>, <span class="number">22</span>)</span><br><span class="line">        self.assertEqual(p.getAge(), p.age, <span class="string">"getAge函数有误"</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    unittest.main()</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#person.py</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, name, age)</span>:</span></span><br><span class="line">        self.name = name</span><br><span class="line">        self.age  = age</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">getAge</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.age</span><br></pre></td></tr></table></figure>
<p>###【6】文档测试</p>
<p>检查是否</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> doctest</span><br><span class="line"><span class="comment">#doctest模块可以提取注释中的的代码执行</span></span><br><span class="line"><span class="comment">#doctest严格按照Python交互模式的输入提取</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">mySum</span><span class="params">(x, y)</span>:</span></span><br><span class="line">    <span class="string">'''</span></span><br><span class="line"><span class="string">    get The Sum from x and Y</span></span><br><span class="line"><span class="string">    :param x: firstNum</span></span><br><span class="line"><span class="string">    :param y: SecondNum</span></span><br><span class="line"><span class="string">    :return: sum</span></span><br><span class="line"><span class="string">    注意有空格</span></span><br><span class="line"><span class="string">    example:</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; print(mySum(1,2))</span></span><br><span class="line"><span class="string">    3</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    '''</span></span><br><span class="line">    <span class="keyword">return</span> x + y</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">print(mySum(<span class="number">2</span>, <span class="number">2</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment">#进行文档测试</span></span><br><span class="line">doctest.testmod()</span><br></pre></td></tr></table></figure></image>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://jyue0812.github.io/2018/05/21/python基础12/" data-id="cjhfjx3dp0007w4qxfxhkdjux" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-python基础11" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog/2018/05/21/python基础11/" class="article-date">
  <time datetime="2018-05-21T01:02:17.583Z" itemprop="datePublished">2018-05-21</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>#Lesson 11</p>
<hr>
<p>##十四章</p>
<p>###【10】组合模式<br>我们前面学习了继承的概念，然后又学习了多继承，但是多继承里面有很多的坑，不到逼不得已是不会使用的。那么就有了组合模式来避免这样的问题。</p>
<p>案例如下，水池里面有水和乌龟</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Turtle</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,n)</span>:</span></span><br><span class="line">        self.num = n</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Fish</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,n)</span>:</span></span><br><span class="line">        self.num = n</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Pool</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,x,y)</span>:</span></span><br><span class="line"></span><br><span class="line">         self.turtle = Turtle(x)</span><br><span class="line">         self.fish = Fish(y)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">echo</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">'水池里面有%d只乌龟，%d只小鱼'</span>%(self.turtle.num,self.fish.num))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">pool = Pool(<span class="number">1</span>,<span class="number">10</span>)</span><br><span class="line">pool.echo()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#水池里面有1只乌龟，10只小鱼</span></span><br></pre></td></tr></table></figure>
<p>组合模式了就是在类里面调用其它的类，然后加以使用。</p>
<p>###【11】对象属性和类属性</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="comment"># 这里的属性实际上属于类属性(用类名来调用)</span></span><br><span class="line">    name = <span class="string">"person"</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, name)</span>:</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line">        <span class="comment">#对象属性</span></span><br><span class="line">        self.name = name</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">print(Person.name)</span><br><span class="line">per = Person(<span class="string">"tom"</span>)</span><br><span class="line"><span class="comment">#对象属性的优先级高于类属性</span></span><br><span class="line">print(per.name)</span><br><span class="line"><span class="comment">#动态的给对象添加对象属性</span></span><br><span class="line">per.age = <span class="number">18</span><span class="comment">#只针对于当前对象生效，对于类创建的其他对象没有作用</span></span><br><span class="line">print(Person.name)</span><br><span class="line">per2 = Person(<span class="string">"lilei"</span>)</span><br><span class="line"><span class="comment">#print(per2.age)  #没有age属性</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#删除对象中的name属性，在调用会使用到同名的类属性</span></span><br><span class="line"><span class="keyword">del</span> per.name</span><br><span class="line">print(per.name)</span><br><span class="line"></span><br><span class="line"><span class="comment">#注意：以后千万不要讲对象属性与类属性重名，因为对象属性会屏蔽掉类属性。但是当删除对象属性后，在使用又能使用类属性了。</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span><span class="params">(object)</span>:</span></span><br><span class="line">    num = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">a = A()</span><br><span class="line">b = A()</span><br><span class="line">c = A()</span><br><span class="line"></span><br><span class="line">print(a.num,b.num,c.num)</span><br><span class="line"></span><br><span class="line">a.num = <span class="number">100</span></span><br><span class="line"></span><br><span class="line">print(a.num,b.num,c.num)</span><br><span class="line"></span><br><span class="line">A.num = <span class="number">1000</span></span><br><span class="line"></span><br><span class="line">print(a.num,b.num,c.num)</span><br><span class="line"></span><br><span class="line"><span class="comment">#0 0 0</span></span><br><span class="line"><span class="comment">#100 0 0</span></span><br><span class="line"><span class="comment">#100 1000 1000</span></span><br></pre></td></tr></table></figure>
<p>这个例子能看出来，对实例对象a的num属性赋值后，就覆盖了原来类对象A的num属性了。</p>
<p>python中在类里面定义的属性是静态变量，相当于C、java、php等语言中的static关键字一样。类的属性是与类对象进行绑定的，并不会依赖任何它的实例对象。任何语言的对象都是这个样的。</p>
<p>###【12】什么是绑定</p>
<p>我们前面刚提到绑定，那是什么是绑定？</p>
<p>python严格按照要 类里面的方法 需要有实例才能被调用，这种限制其实就是python所谓的绑定概念。</p>
<p>我们看个例子：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">setXY</span><span class="params">(self,x,y)</span>:</span></span><br><span class="line">        self.x = x</span><br><span class="line">        self.y = y</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">echoXY</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(self.x,self.y)</span><br><span class="line">a = A()</span><br><span class="line">print(a.__dict__)</span><br><span class="line"></span><br><span class="line">a.setXY(<span class="number">1</span>,<span class="number">2</span>)</span><br><span class="line">print(a.__dict__)</span><br><span class="line"></span><br><span class="line"><span class="keyword">del</span> A  <span class="comment">#删除类对象</span></span><br><span class="line"></span><br><span class="line">a.echoXY()</span><br><span class="line"><span class="comment">#b = A()  #类对象删除了，不能再调用了</span></span><br></pre></td></tr></table></figure>
<p>###【13】前方高能：插件方式</p>
<p>利用dict来扩展对象的方法</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">PlugIn</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        self._exported_methods = []</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">plugin</span><span class="params">(self, owner)</span>:</span></span><br><span class="line">        <span class="keyword">for</span> f <span class="keyword">in</span> self._exported_methods:</span><br><span class="line">            owner.__dict__[f.__name__] = f</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">plugout</span><span class="params">(self, owner)</span>:</span></span><br><span class="line">        <span class="keyword">for</span> f <span class="keyword">in</span> self._exported_methods:</span><br><span class="line">            <span class="keyword">del</span> owner.__dict__[f.__name__]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AFeature</span><span class="params">(PlugIn)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        super().__init__()</span><br><span class="line">        self._exported_methods.append(self.get_a_value)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_a_value</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">'a feature.'</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BFeature</span><span class="params">(PlugIn)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        super().__init__()</span><br><span class="line">        self._exported_methods.append(self.get_b_value)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_b_value</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">'b feature.'</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Combine</span>:</span> <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">c = Combine()</span><br><span class="line">AFeature().plugin(c)</span><br><span class="line">BFeature().plugin(c)</span><br><span class="line"></span><br><span class="line">c.get_a_value()</span><br><span class="line">c.get_b_value()</span><br></pre></td></tr></table></figure>
<p>###【14】相关的BIF</p>
<p>类和对象相关的内置函数</p>
<p>####1、issubclass(class,classinfo)</p>
<p>如果第一个参数(class)是第二个参数(classinfo)的子类,则返回True，否则返回False；</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>)第一个类被认定为子类</span><br><span class="line"><span class="number">2</span>）classinfo可以是对象组成的元祖，只要<span class="class"><span class="keyword">class</span>是元祖中任何一个类的子类都返回<span class="title">True</span>。</span></span><br><span class="line"><span class="class">3）在其他情况下报错。</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span>:</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">C</span>:</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span><span class="params">(A)</span>:</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">tuple1 = (A,C)</span><br><span class="line">print(issubclass(B,A))</span><br><span class="line"></span><br><span class="line"><span class="comment">#True</span></span><br></pre></td></tr></table></figure>
<p>####2.isinstance(object,classinfo)</p>
<p>如果第一个参数(object)是第二个参数(classinfo)的实例对象，则返回True，否则返回False。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="number">1</span>)如果objec是classinfo的子类一个实例，也符合条件</span><br><span class="line"><span class="number">2</span>)如果第一个参数不是对象，则永远返回<span class="keyword">False</span>。</span><br><span class="line"><span class="number">3</span>)classinfo可以是类对象组成的元祖。</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span>:</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">C</span>:</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span><span class="params">(A)</span>:</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">tuple1 = (A,C)</span><br><span class="line"></span><br><span class="line">b = B()</span><br><span class="line">print(isinstance(b,tuple1))</span><br><span class="line">print(isinstance(<span class="string">'aas'</span>,str))</span><br><span class="line"></span><br><span class="line"><span class="comment">#True</span></span><br><span class="line"><span class="comment">#True</span></span><br></pre></td></tr></table></figure>
<p>####3.hasattr(object,name)</p>
<p>attr即attribute的缩写，就是属性的意思，下面讲的几个函数都是和对象的属性有关的。</p>
<p>hasatt()的作用是测试一个对象里是否有指定的属性。</p>
<p>第一个参数(object)是对象，第二个参数(name)还属性名(属性的字符串名字)</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">C</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,x = <span class="number">0</span>)</span>:</span></span><br><span class="line">        self.x = x</span><br><span class="line">c = C()</span><br><span class="line">print(hasattr(c,<span class="string">'x'</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment">#True</span></span><br></pre></td></tr></table></figure>
<p>####4、getattr(object,name[,default])</p>
<p>返回对象指定的属性值，如果指定的属性不存在，则返回default(可选参数)的值；若没有设置default参数，则抛出AttributeError异常。</p>
<p>存在则返回0</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">C</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,x = <span class="number">0</span>)</span>:</span></span><br><span class="line">        self.x = x</span><br><span class="line">c = C()</span><br><span class="line">print(getattr(c,<span class="string">'x'</span>))</span><br><span class="line">print(getattr(c,<span class="string">'y'</span>,<span class="string">'你访问的属性不存在'</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment">#0</span></span><br><span class="line"><span class="comment">#你访问的属性不存在</span></span><br></pre></td></tr></table></figure>
<p>####5、setattr(object,name,value)<br>与getattr()相对应，但是setattr()可以设置对象中指定属性的值，如果指定的属性不存在，则会新建属性并赋值。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">C</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,x = <span class="number">0</span>)</span>:</span></span><br><span class="line">        self.x = x</span><br><span class="line">c = C()</span><br><span class="line"></span><br><span class="line">setattr(c,<span class="string">'x'</span>,<span class="number">1</span>)</span><br><span class="line">print(c.x)</span><br><span class="line"></span><br><span class="line"><span class="comment">#1</span></span><br></pre></td></tr></table></figure>
<p>####6、delattr(object,name)<br>与setattr()相反，delattr()用于删除对象中指定的属性，如果属性不存在则抛出AttributeError异常。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">C</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,x = <span class="number">0</span>)</span>:</span></span><br><span class="line">        self.x = x</span><br><span class="line">c = C()</span><br><span class="line"></span><br><span class="line">print(delattr(c,<span class="string">'x'</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment">#None</span></span><br></pre></td></tr></table></figure>
<p>####7、property(fget=None,fset=None,fdel=None,doc=None)</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">C</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,x = <span class="number">0</span>)</span>:</span></span><br><span class="line">        self.x = x</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">getVar</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.x</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">setVar</span><span class="params">(self,value)</span>:</span></span><br><span class="line">        self.x = value</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">delVar</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">del</span> self.x</span><br><span class="line">    r = property(getVar,setVar,delVar)</span><br><span class="line"></span><br><span class="line">c = C(<span class="number">100</span>)</span><br><span class="line"></span><br><span class="line">print(c.r)</span><br><span class="line"></span><br><span class="line">c.r = <span class="number">2000</span></span><br><span class="line"></span><br><span class="line">print(c.r)</span><br><span class="line"></span><br><span class="line"><span class="keyword">del</span> c.r</span><br></pre></td></tr></table></figure>
<p>property()函数的作用就是可以设置属性的属性，就是给一个属性指定3个方法。</p>
<p>等学完了魔术方法就知道它是怎么运行的了。</p>
<p>##魔术方法(魔法方法)</p>
<p>我们在前面的内容里面已经接触过魔术方法了，比如<code>__init__</code>,<code>__del__</code>,<code>__dict__</code>.</p>
<p>那么什么是魔术方法了？</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>)总是被下划线包围</span><br><span class="line"><span class="number">2</span>)魔术方法是加强python的面向对象的</span><br><span class="line"><span class="number">3</span>)它在适当的时候总是能被调用</span><br></pre></td></tr></table></figure>
<p>###【1】<code>__slots__</code>‘属性’</p>
<p><code>__slots__</code>它的作用就是限制类中可以动态添加指定的属性名和方法名。</p>
<p>使用了<code>__slots__</code>后<code>__dict__</code>就不能再使用了，因为<code>__dict__</code>也可以给动态添加类中的属性值。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span>:</span></span><br><span class="line">    age = <span class="string">'1'</span></span><br><span class="line">    __slots__ = [<span class="string">'func'</span>,<span class="string">'name'</span>]</span><br><span class="line"></span><br><span class="line">a = A()</span><br><span class="line"></span><br><span class="line">a.name = <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">func</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">123</span></span><br><span class="line"></span><br><span class="line">a.func = func</span><br><span class="line"></span><br><span class="line">print(a.func())</span><br><span class="line"></span><br><span class="line"><span class="comment">#a.sex = 'male'</span></span><br></pre></td></tr></table></figure>
<p>###【2】<code>__new__(cls[, ...])</code></p>
<p><code>__new__()</code>才是在一个对象实例化的时候第一个调用的方法。它和其它的魔术方法不同，他的第一个参数不是self(本对象），而是这个类本生(cls)，而其它的参数会直接传递给<code>__init__()</code>方法的。</p>
<p><code>__new__()</code>方法需要返回一个实例对象，通常是cls这个类实例化的对象，当然你也可以返回其它对象。</p>
<p><code>__new__</code>方法平时很少去重写它，一般让python用默认的方案去执行它就可以了。一般<code>__new__</code>在整个继承链中有一个就可以了，一种情况下需要重写这个魔术方法，就是集成了一个不可变类型的时候。</p>
<p>如果子类中没有定义new()方法，那么会自动调用其父类的new()方法来制造实例。</p>
<p>而如果新式类中重写了new()方法，那么你可以自由选择任意一个的其他的新式类（必定要是 新式类，只有新式类必定都有new()，因为所有新式类都是object的后代，而经典类则没有new() 方法）的new()方法来制造实例，包括这个新式类的所有前代类和后代类，只要它们不会造成递归死 循环。具体看以下代码解释：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span><span class="params">(str)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__new__</span><span class="params">(cls,string)</span>:</span></span><br><span class="line">        print(<span class="string">'new'</span>)</span><br><span class="line">        str1 = string.upper()</span><br><span class="line">        <span class="keyword">return</span> str.__new__(cls,str1)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,string)</span>:</span></span><br><span class="line">        print(<span class="string">'ok'</span>)</span><br><span class="line"></span><br><span class="line">a = A(<span class="string">"hello shanghai "</span>)</span><br><span class="line">print(a)</span><br><span class="line"></span><br><span class="line"><span class="comment">#new</span></span><br><span class="line"><span class="comment">#ok</span></span><br><span class="line"><span class="comment">#HELLO SHANGHAI</span></span><br></pre></td></tr></table></figure>
<font color="red">注意：千万不要用自己笨类去调用<code>__new__</code>，这样会死造成循环。</font>

<p>###【3】@property</p>
<p>在绑定属性时，如果我们直接把属性暴露出去，虽然写起来很简单，但是，没办法检查参数，导致可以把类属性随便改；</p>
<p>那么我们就会想到私有属性的定义，私有属性在调用和修改的时候需要加太长的调用规则<code>_类名__属性</code>，这样一来也挺麻烦的，所以我们给每个私有属性定义两个方法</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">myCls</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.__name = <span class="string">'tom'</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">getName</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.__name</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">setName</span><span class="params">(self,val)</span>:</span></span><br><span class="line">        self.__name = val</span><br><span class="line"></span><br><span class="line">m = myCls()</span><br><span class="line">print(m.getName())</span><br><span class="line">m.setName(<span class="string">'jack'</span>)</span><br><span class="line">print(m.getName())</span><br></pre></td></tr></table></figure>
<p>还有一种更加简单的方法就是@property</p>
<p>还记得装饰器（decorator）可以给函数动态加上功能吗？对于类的方法，装饰器一样起作用。Python内置的@property装饰器就是负责把一个方法变成属性调用的：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">myCls</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.__name = <span class="string">'tom'</span></span><br><span class="line"></span><br><span class="line"><span class="meta">    @property</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">name</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.__name</span><br><span class="line"></span><br><span class="line"><span class="meta">    @name.setter</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">name</span><span class="params">(self,val)</span>:</span></span><br><span class="line">        self.__name = val</span><br><span class="line"></span><br><span class="line">m = myCls()</span><br><span class="line">print(m.name)</span><br><span class="line">m.name = <span class="string">'jack'</span></span><br><span class="line">print(m.name)</span><br></pre></td></tr></table></figure>
<p>注意到这个神奇的@property，我们在对实例属性操作的时候，就知道该属性很可能不是直接暴露的，而是通过getter和setter方法来实现的。</p>
<p>还可以定义只读属性，只定义getter方法，不定义setter方法就是一个只读属性：</p>
<p>@property的实现比较复杂，我们先考察如何使用。把一个getter方法变成属性，只需要加上@property就可以了，此时，@property本身又创建了另一个装饰器@score.setter，负责把一个setter方法变成属性赋值，于是，我们就拥有一个可控的属性操作：</p>
<p>###【4】工厂函数</p>
<p>现在有一个新的名词需要大家记住：工厂函数，大家现在可能没听过，但是我们早就接触到了，知识那个时候我们还没有学习过类和对象，那个时候说了也白说。</p>
<p>python2.2以后，对类和类型进行了统一，做法就是将int()、float()、str()、list()这些转换为工厂函数。</p>
<p>我们看个例子：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">print(type(len))</span><br><span class="line">print(type(dir))</span><br><span class="line">print(type(list))</span><br><span class="line">print(type(int))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#&lt;class 'builtin_function_or_method'&gt;</span></span><br><span class="line"><span class="comment">#&lt;class 'builtin_function_or_method'&gt;</span></span><br><span class="line"><span class="comment">#&lt;class 'type'&gt;</span></span><br><span class="line"><span class="comment">#&lt;class 'type'&gt;</span></span><br></pre></td></tr></table></figure>
<p>普通的BIF应该是<class 'builtin_function_or_method'="">，而工厂函数是<class 'type'="">，大家有没有很眼熟，在哪里见过。</class></class></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span>:</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">print(type(A))</span><br><span class="line"></span><br><span class="line"><span class="comment">#&lt;class 'type'&gt;</span></span><br></pre></td></tr></table></figure>
<p>它也是type类型，也就是类对象，也就是所谓的工厂函数，那么工厂函数就是一个类对象，当调用类对象的时候，它返回的是一个实例对象：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">a = int(<span class="string">'123'</span>)</span><br><span class="line">b = int(<span class="string">'345'</span>)</span><br><span class="line">print(a+b)</span><br><span class="line"></span><br><span class="line"><span class="comment">#468</span></span><br></pre></td></tr></table></figure>
<p>当在求a + b等于多少的时候，事实上python就是讲两个对象进行相加操作。</p>
<p>现在是不是豁然开朗，原来实例对象是可以进行运算的！其实早该发现这个问题了，python中无处不对象。</p>
<p>###【5】算术运算符</p>
<p>python的魔术方法还提供了自定义对象的数值处理，通过对下面这些魔术方法的重写，可以自定义任何对象的算术运算。</p>
<p> <img src="/blog/2018/05/21/python基础11/算术.png" alt="算术"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">#不同的类型用加法会有不同的解释</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_int</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, num)</span>:</span></span><br><span class="line">        self.num = num</span><br><span class="line">    <span class="comment">#运算符重载</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__add__</span><span class="params">(self, other)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> _int(self.num + other.num)</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__str__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">"num = "</span> + str(self.num)</span><br><span class="line">per1 = _int(<span class="number">1</span>)</span><br><span class="line">per2 = _int(<span class="number">2</span>)</span><br><span class="line">print(per1 + per2)<span class="comment">#per1 + per2 ==== per1.__add__(per2)</span></span><br><span class="line"><span class="comment">#print(per1.__add__(per2))</span></span><br><span class="line">print(per1)</span><br><span class="line">print(per2)</span><br><span class="line"></span><br><span class="line"><span class="comment">#num = 3</span></span><br><span class="line"><span class="comment">#num = 1</span></span><br><span class="line"><span class="comment">#num = 2</span></span><br></pre></td></tr></table></figure>
<font color="red">注意下面的例子：</font>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_int</span><span class="params">(int)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__add__</span><span class="params">(self, other)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self + other</span><br><span class="line"></span><br><span class="line">a = _int(<span class="number">1</span>)</span><br><span class="line">b = _int(<span class="number">2</span>)</span><br><span class="line">print(a+b)</span><br><span class="line"></span><br><span class="line"><span class="comment">#RecursionError: maximum recursion depth exceeded while calling a Python object</span></span><br></pre></td></tr></table></figure>
<p>看这个例子，变成了无限递归，为什么？注意add里面，写的是 <code>return self + other</code>，self代表这个类，每次都会调用<code>__add__</code>方法，这样就变成死递归了。怎么解决？</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_int</span><span class="params">(int)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__add__</span><span class="params">(self, other)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> int(self) + other</span><br><span class="line"></span><br><span class="line">a = _int(<span class="number">1</span>)</span><br><span class="line">b = _int(<span class="number">4</span>)</span><br><span class="line">print(a+b)</span><br><span class="line"></span><br><span class="line"><span class="comment">#5</span></span><br></pre></td></tr></table></figure>
<p>###【7】短信接口</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">#接口类型 秒嘀科技 短信验证码</span></span><br><span class="line"><span class="comment">#账户注册 http://www.miaodiyun.com</span></span><br><span class="line"><span class="comment">#注意事项：</span></span><br><span class="line"><span class="comment">#（1）调用期间要在 秒嘀的控制台 添加好短信模板</span></span><br><span class="line"><span class="comment">#（2）ACCOUNT SID和AUTH TOKEN 在 控制台-&gt;用户中心-&gt;账户管理-&gt;开发者中心查看</span></span><br><span class="line"><span class="comment">#（3）该代码仅供接入秒嘀科技验证码短信接口参考使用，如若接入其它公司短信产品要按照该产品规定；</span></span><br><span class="line"></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">格式拼接</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">accountSid = a14f6bfd43ce44c9b019de57f4e2de4b &amp; smsContent =【秒嘀科技】您的验证码是345678，30</span></span><br><span class="line"><span class="string">分钟输入有效。</span></span><br><span class="line"><span class="string">&amp; to = 13896543210 &amp; timestamp = 20150821100312 &amp; sig = a14f6bfd43ue44c9b019du57f4e2ee4r &amp; respDataType = JSON</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> http <span class="keyword">import</span> client</span><br><span class="line"><span class="keyword">from</span> urllib <span class="keyword">import</span> request,parse</span><br><span class="line"><span class="keyword">from</span> random <span class="keyword">import</span> randint</span><br><span class="line"><span class="keyword">import</span> hashlib</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">sendSMs</span>:</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,to = str<span class="params">(<span class="number">17621044208</span>)</span>)</span>:</span></span><br><span class="line">        self.accountSid = <span class="string">'43ca172021e8420fbbda5741d097c37d'</span></span><br><span class="line">        self.authToken  = <span class="string">'97c65cbf25ee4602806edf8eb01771e6'</span></span><br><span class="line">        self.verificationCode = randint(<span class="number">999</span>,<span class="number">10000</span>)</span><br><span class="line">        self.smsContent = <span class="string">'【仁雨科技】尊敬的用户，您正在进行登陆验证，您的验证码为：&#123;%d&#125;,有效时间为3分钟。为了您的信息安全，请妥善保管好您的验证码。'</span>%self.verificationCode</span><br><span class="line">        self.to = to</span><br><span class="line">        self.timestamp = time.strftime(<span class="string">"%Y%m%d%H%M%S"</span>, time.localtime())</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">encryption</span><span class="params">(self)</span>:</span></span><br><span class="line"></span><br><span class="line">        self.sig = self.accountSid + self.authToken +self.timestamp</span><br><span class="line">        md5 = hashlib.md5()</span><br><span class="line">        md5.update(self.sig.encode(<span class="string">'utf-8'</span>))  <span class="comment"># 注意转码</span></span><br><span class="line">        self.sig = md5.hexdigest()</span><br><span class="line">        self.respDataType  = <span class="string">'JSON'</span></span><br><span class="line">        <span class="keyword">del</span> self.verificationCode,self.authToken  <span class="comment">#这两个就没有用了</span></span><br><span class="line">        sDict = self.__dict__</span><br><span class="line">        params = parse.urlencode(sDict)</span><br><span class="line">        <span class="keyword">return</span> params</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">sendMsg</span><span class="params">(self)</span>:</span></span><br><span class="line">        host = <span class="string">'api.miaodiyun.com'</span></span><br><span class="line">        postUrl = <span class="string">'/20150822/industrySMS/sendSMS'</span></span><br><span class="line">        headers = &#123;<span class="string">"Content-type"</span>: <span class="string">"application/x-www-form-urlencoded;charset:utf-8;"</span>, <span class="string">"Accept"</span>: <span class="string">"text/plain"</span>&#125;</span><br><span class="line">        connect = client.HTTPConnection(host,port = <span class="number">80</span>,timeout=<span class="number">30</span>)</span><br><span class="line">        params = self.encryption()</span><br><span class="line">        a=connect.request(<span class="string">"POST"</span>, postUrl, params, headers)</span><br><span class="line">        response = connect.getresponse()</span><br><span class="line">        response_str = response.read()</span><br><span class="line">        connect.close()</span><br><span class="line">        <span class="keyword">return</span> response_str</span><br><span class="line"></span><br><span class="line">s = sendSMs(<span class="number">18626070896</span>)</span><br><span class="line">print(s.sendMsg())</span><br></pre></td></tr></table></figure>
<p>###【8】发送邮件</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> smtplib</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> email.mime.text <span class="keyword">import</span> MIMEText</span><br><span class="line"><span class="keyword">from</span> email.mime.multipart <span class="keyword">import</span> MIMEMultipart</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SendMail</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, message = <span class="string">'用户'</span>, title = <span class="string">'仁雨科技'</span>, to = [<span class="string">'this_my_email@126.com'</span>])</span>:</span></span><br><span class="line">        <span class="comment"># SMTP服务器</span></span><br><span class="line">        self.SMTPServer = <span class="string">"smtp.126.com"</span></span><br><span class="line">        <span class="comment"># 发邮件的地址</span></span><br><span class="line">        self.sender = <span class="string">"this_my_email@126.com"</span></span><br><span class="line">        <span class="comment"># 发送者邮箱的密码</span></span><br><span class="line">        self.passwd = <span class="string">"rd911123"</span></span><br><span class="line">        <span class="comment">#指定的信息(某某用户)</span></span><br><span class="line">        self.message = message</span><br><span class="line">        <span class="comment">#邮件的标题</span></span><br><span class="line">        self.title = title</span><br><span class="line">        <span class="comment">#发送给谁</span></span><br><span class="line">        <span class="keyword">if</span> isinstance(to,list):</span><br><span class="line">            self.to = to</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="string">'请输入list类型'</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">_html</span><span class="params">(self)</span>:</span></span><br><span class="line">        message = <span class="string">'''</span></span><br><span class="line"><span class="string">            &lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="string">            &lt;html lang="zh-CN"&gt;</span></span><br><span class="line"><span class="string">              &lt;head&gt;</span></span><br><span class="line"><span class="string">                &lt;meta charset="utf-8"&gt;</span></span><br><span class="line"><span class="string">                &lt;meta http-equiv="X-UA-Compatible" content="IE=edge"&gt;</span></span><br><span class="line"><span class="string">                &lt;meta name="viewport" content="width=device-width, initial-scale=1"&gt;</span></span><br><span class="line"><span class="string">                &lt;!-- 上述3个meta标签*必须*放在最前面，任何其他内容都*必须*跟随其后！--&gt;</span></span><br><span class="line"><span class="string">                &lt;title&gt;Bootstrap 101 Template&lt;/title&gt;</span></span><br><span class="line"><span class="string">            </span></span><br><span class="line"><span class="string">                &lt;!-- Bootstrap --&gt;</span></span><br><span class="line"><span class="string">                &lt;!--&lt;link href="http://www.mantoman.cn/static/bootstrap/css/bootstrap.min.css" rel="stylesheet"&gt;--&gt;</span></span><br><span class="line"><span class="string">            </span></span><br><span class="line"><span class="string">                &lt;!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries --&gt;</span></span><br><span class="line"><span class="string">                &lt;!-- WARNING: Respond.js doesn't work if you view the page via file:// --&gt;</span></span><br><span class="line"><span class="string">                &lt;!--[if lt IE 9]&gt;</span></span><br><span class="line"><span class="string">                  &lt;script src="https://cdn.bootcss.com/html5shiv/3.7.3/html5shiv.min.js"&gt;&lt;/script&gt;</span></span><br><span class="line"><span class="string">                  &lt;script src="https://cdn.bootcss.com/respond.js/1.4.2/respond.min.js"&gt;&lt;/script&gt;</span></span><br><span class="line"><span class="string">                &lt;![endif]--&gt;</span></span><br><span class="line"><span class="string">              &lt;/head&gt;</span></span><br><span class="line"><span class="string">              &lt;body&gt;</span></span><br><span class="line"><span class="string">                &lt;div style="padding-left:100px;padding-top:48px;padding-bottom:48px;margin-bottom: 30px;color: inherit;background-color: #eee;box-sizing: border-box;display: block;font-size: 14px;line-height: 1.42857143;"&gt;</span></span><br><span class="line"><span class="string">                    &lt;div class="container"&gt;</span></span><br><span class="line"><span class="string">            </span></span><br><span class="line"><span class="string">                        &lt;h1&gt;仁雨科技邮箱验证!&lt;/h1&gt;</span></span><br><span class="line"><span class="string">                        &lt;h3&gt;尊敬的%s，感谢您在仁雨科技注册帐户！激活帐户需要点击下面的链接!&lt;/h3&gt;</span></span><br><span class="line"><span class="string">                        &lt;p&gt;&lt;a class="btn btn-primary btn-lg" role="button" href="http://www.baidu.com" style='padding: 10px 16px;font-size: 18px;line-height: 1.3333333;border-radius: 6px;color: #fff;background-color: #337ab7;border-color: #2e6da4;display: inline-block;margin-bottom: 0;text-align: center;white-space: nowrap;touch-action: manipulation;cursor: pointer;vertical-align: middle;user-select: none;background-image: none;border: 1px solid transparent;text-decoration: none;box-sizing: border-box;-webkit-tap-highlight-color: rgba(0,0,0,0);box-sizing: border-box;'&gt;</span></span><br><span class="line"><span class="string">                         百度&lt;/a&gt;</span></span><br><span class="line"><span class="string">                        &lt;/p&gt;</span></span><br><span class="line"><span class="string">                        &lt;br /&gt;</span></span><br><span class="line"><span class="string">                        &lt;h3&gt;Python改变世界！&lt;/h3&gt;</span></span><br><span class="line"><span class="string">                    &lt;/div&gt;</span></span><br><span class="line"><span class="string">                &lt;/div&gt;</span></span><br><span class="line"><span class="string">              &lt;/body&gt;</span></span><br><span class="line"><span class="string">                &lt;!-- jQuery (necessary for Bootstrap's JavaScript plugins) --&gt;</span></span><br><span class="line"><span class="string">                &lt;script src="https://cdn.bootcss.com/jquery/1.12.4/jquery.min.js"&gt;&lt;/script&gt;</span></span><br><span class="line"><span class="string">                &lt;!-- Include all compiled plugins (below), or include individual files as needed --&gt;</span></span><br><span class="line"><span class="string">                &lt;script src="js/bootstrap.min.js"&gt;&lt;/script&gt;</span></span><br><span class="line"><span class="string">            &lt;/html&gt;</span></span><br><span class="line"><span class="string">        '''</span>%self.message</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> message</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">sendmail</span><span class="params">(self)</span>:</span></span><br><span class="line">        msg = self._html()</span><br><span class="line">        <span class="comment">#转换成邮件文本</span></span><br><span class="line">        msg = MIMEText(msg,<span class="string">'html'</span>,<span class="string">'utf-8'</span>)</span><br><span class="line">        <span class="comment">#邮件的标题</span></span><br><span class="line">        msg[<span class="string">"Subject"</span>] = self.title</span><br><span class="line">        <span class="comment">#发送者信息</span></span><br><span class="line">        msg[<span class="string">'From'</span>] = self.sender</span><br><span class="line">        <span class="comment"># 创建SMTP服务器</span></span><br><span class="line">        mailServer = smtplib.SMTP(self.SMTPServer, <span class="number">25</span>)</span><br><span class="line">        <span class="comment"># 登陆邮箱</span></span><br><span class="line">        mailServer.login(self.sender, self.passwd)</span><br><span class="line">        <span class="comment"># 发送邮件</span></span><br><span class="line">        mailServer.sendmail(self.sender, self.to, msg.as_string())</span><br><span class="line">        <span class="comment"># 退出邮箱</span></span><br><span class="line">        mailServer.quit()</span><br><span class="line"></span><br><span class="line">s = SendMail()</span><br><span class="line">s.sendmail()</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://jyue0812.github.io/2018/05/21/python基础11/" data-id="cjhfjx3dr0008w4qxlmgw3s74" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-python基础10" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog/2018/05/21/python基础10/" class="article-date">
  <time datetime="2018-05-21T01:02:04.260Z" itemprop="datePublished">2018-05-21</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>#Lesson 10</p>
<hr>
<p>##第十四章</p>
<p>###给大家介绍“对象”</p>
<p>现代的编程语言里面无处不提到对象的，然而初学者并不知道什么是对象，那我们下面一点一点的剖析：</p>
<p>我们之前所学习的编程方式都属于面向过程，什么是面向过程了？</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>)自上而下顺序执行，逐步求精；</span><br><span class="line"><span class="number">2</span>)其程序结构是按功能划分为若干个基本模块，这些模块形成一个树状结构；</span><br><span class="line"><span class="number">3</span>)各模块之间的关系尽可能简单，在功能上相对独立；</span><br><span class="line"><span class="number">4</span>)每一模块内部均是由顺序、选择和循环三种基本结构组成；</span><br><span class="line"><span class="number">5</span>)其模块化实现的具体方法是使用子程序。</span><br><span class="line"><span class="number">6</span>)程序流程在写程序时就已决定。</span><br></pre></td></tr></table></figure>
<p>那么面向对象是什么样的了？</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="number">1</span>)把数据及对数据的操作方法放在一起，作为一个相互依存的整体——对象。</span><br><span class="line"><span class="number">2</span>)对同类对象抽象出其共性，形成类。</span><br><span class="line"><span class="number">3</span>)类中的大多数数据，只能用本类的方法进行处理。</span><br><span class="line"><span class="number">4</span>)类通过一个简单的外部接口与外界发生关系，对象与对象之间通过消息进行通信。</span><br><span class="line"><span class="number">5</span>)程序流程由用户在使用中决定。</span><br></pre></td></tr></table></figure>
<p>理解面向对象：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="number">1</span>)面向对象是相对面向过程而言</span><br><span class="line"><span class="number">2</span>)面向对象和面向过程都是一种思想</span><br><span class="line"><span class="number">3</span>)面向过程</span><br><span class="line">	强调的是功能行为</span><br><span class="line">	关注的是解决问题需要哪些步骤 </span><br><span class="line"><span class="number">4</span>)面向对象</span><br><span class="line">	将功能封装进对象，强调具备了功能的对象</span><br><span class="line">	关注的是解决问题需要哪些对象 </span><br><span class="line"><span class="number">5</span>)面向对象是基于面向过程的。</span><br></pre></td></tr></table></figure>
<p>我们说把大象塞进冰箱：</p>
<p> <img src="/blog/2018/05/21/python基础10/理解.png" alt="理解"></p>
<p>在我们显示生活中我们如何运用面向对象的了？</p>
<p>比如说打电话：</p>
<p>我们会想到手机：手机有品牌，下面有型号，还要分配制，手机的最大功能是打电话……</p>
<p>比如说驾驶</p>
<p>我们会想到汽车: 汽车一样有品牌，系列，配制。汽车的主要功能就是行驶……</p>
<p>面向对象的特点：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>)是一种符合人们思考习惯的思想</span><br><span class="line"><span class="number">2</span>)可以将复杂的事情简单化</span><br><span class="line"><span class="number">3</span>)将程序员从执行者转换成了指挥者</span><br><span class="line"></span><br><span class="line"><span class="number">4</span>)完成需求时：</span><br><span class="line">	先要去找具有所需的功能的对象来用。</span><br><span class="line">	如果该对象不存在，那么创建一个具有所需功能的对象。</span><br></pre></td></tr></table></figure>
<p> <img src="/blog/2018/05/21/python基础10/比较.png" alt="比较"></p>
<p>我们讲到面向对象了，就离不开类，函数把普通的代码块打包，而现在又出现了一个类，它可以把函数打包。</p>
<p>类和对象的关系怎么理解，我们说的“汽车”，这个范围很大，它就是类，因为它们是一类的东西。比如说 宝马 5系 528 它就是对象，因为对象是实际存在的东西。</p>
<p>####类的定义</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>）生活中描述事物无非就是描述事物的名称/属性和行为。</span><br><span class="line">	如：人有身高，体重等属性，有说话，打架等行为。</span><br><span class="line"><span class="number">2</span>）Python中用类来描述事物也是如此</span><br><span class="line">	属性：对应类中的成员变量。</span><br><span class="line">	行为：对应类中的成员方法。</span><br><span class="line"><span class="number">3</span>）定义类其实在定义类中的成员(成员变量和成员方法)</span><br><span class="line"> 	拥有相同（或者类似）属性和行为的对象都可以抽像出一个类</span><br></pre></td></tr></table></figure>
<p>####类的设计</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">只关心<span class="number">3</span>样东西</span><br><span class="line">	事物名称（类名）：人（Person）</span><br><span class="line">	属性：身高（height）、年龄（age）</span><br><span class="line">	行为（功能）：跑（run）、打架（fight）</span><br></pre></td></tr></table></figure>
<p>###【1】类：对象=属性 + 方法</p>
<p>我们命名方法：</p>
<p>在类里面的变量改口叫属性，函数叫方法。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">类名：见名之意，首字母大写，其他遵循驼峰原则</span><br><span class="line">属性：见名之意，其他遵循驼峰原则</span><br><span class="line">行为(方法/功能)：见名之意，其他遵循驼峰原则</span><br></pre></td></tr></table></figure>
<p>我们定义第一个类,一个人的类：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">#  object:基类，超类，所有类的父类，一般没有合适的父类就写object</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Peroson</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="comment"># 定义属性(定义变量)</span></span><br><span class="line">    name = <span class="string">"tom"</span></span><br><span class="line">    age = <span class="number">25</span></span><br><span class="line">    height = <span class="number">175</span></span><br><span class="line">    sex = <span class="string">'male'</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 定义方法(定义函数)</span></span><br><span class="line">    <span class="comment"># 注意：方法的参数必须以self当第一个参数</span></span><br><span class="line">    <span class="comment"># self代表类的实例(某个对象)，默认是自己(当前类)</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">run</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">"run"</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">eat</span><span class="params">(self, food)</span>:</span></span><br><span class="line">        print(<span class="string">"eat"</span> + food)</span><br><span class="line"></span><br><span class="line">P = Peroson();  <span class="comment">#创造一个人 对象</span></span><br><span class="line">print(P)</span><br><span class="line">P.run()</span><br><span class="line">print(P.name)</span><br><span class="line"></span><br><span class="line"><span class="comment">#&lt;__main__.Peroson object at 0x103b1f908&gt;</span></span><br><span class="line"><span class="comment">#run</span></span><br><span class="line"><span class="comment">#tom</span></span><br></pre></td></tr></table></figure>
<p>以上代码就是一个’人’的类，定义了它的属性<code>name,age,height,sex</code>,它的行为<code>run()，eat()</code>。</p>
<p>有了类就可以创造对象，<code>P = Peroson()</code>就是创建一个对象，这个对象就是这个这个类的实例，也叫实例对象。</p>
<p>###【2】实例化多个对象</p>
<p>我们刚才在上面只实例化了一次，我们再实例化一个看看</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"> <span class="comment">#            object:基类，超类，所有类的父类，一般没有合适的父类就写object</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Peroson</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="comment"># 定义属性(定义变量)</span></span><br><span class="line">    name = <span class="string">""</span></span><br><span class="line">    age = <span class="number">0</span></span><br><span class="line">    height = <span class="number">0</span></span><br><span class="line">    weight = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 定义方法(定义函数)</span></span><br><span class="line">    <span class="comment"># 注意：方法的参数必须以self当第一个参数</span></span><br><span class="line">    <span class="comment"># self代表类的实例(某个对象)</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">run</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">"run"</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">eat</span><span class="params">(self, food)</span>:</span></span><br><span class="line">        print(<span class="string">"eat"</span> + food)</span><br><span class="line"></span><br><span class="line">P1 = Peroson()</span><br><span class="line">print(id(P1))</span><br><span class="line">P2 = Peroson()</span><br><span class="line">print(id(P2))</span><br><span class="line"></span><br><span class="line"><span class="comment">#4363254136</span></span><br><span class="line"><span class="comment">#4363254192</span></span><br></pre></td></tr></table></figure>
<p>我们看上面的例子可以发现实例化两次，两个存储的id不一样，这个就好比是，P1 = 1，P2 = 2一样，每次实例一次都是一个新的对象，就是新的‘人’，这个当然你可以通过想象，两个人不可能一样。</p>
<p>###【3】访问对象的属性和方法</p>
<p>访问属性</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">语法： 对象名.属性名</span><br><span class="line"></span><br><span class="line">赋值： 对象名.属性名 = 新值</span><br></pre></td></tr></table></figure>
<p>我们看下面这个例子：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span><span class="params">(object)</span>:</span></span><br><span class="line">    name = <span class="string">''</span></span><br><span class="line">    age = <span class="number">0</span></span><br><span class="line">    height = <span class="number">0</span></span><br><span class="line">    sex = <span class="string">''</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">openDoor</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">"我已经打开了冰箱门"</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">fillEle</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">"我已经把大象装进冰箱了"</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">closeDoor</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">"我已经关闭了冰箱门"</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">myinfo</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(self.__dict__)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">P = Person()</span><br><span class="line"><span class="comment">#给这个人添加一些属性</span></span><br><span class="line">P.name = <span class="string">'tom'</span>  </span><br><span class="line">P.age  = <span class="number">25</span></span><br><span class="line">P.height = <span class="number">175</span></span><br><span class="line">P.sex = <span class="string">'male'</span></span><br><span class="line">print(P.name,P.age,P.height,P.sex)  <span class="comment">#普通的访问</span></span><br><span class="line">print(P.__dict__)  <span class="comment">#对象.__dict__， 以dict的形式返回这个对象的属性</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#tom 25 175 male</span></span><br><span class="line"><span class="comment">#&#123;'name': 'tom', 'age': 25, 'height': 175, 'sex': 'male'&#125;</span></span><br></pre></td></tr></table></figure>
<p>调用方法</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">语法： 对象名.属性名(参数列表)</span><br></pre></td></tr></table></figure>
<p>看下面例子：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span><span class="params">(object)</span>:</span></span><br><span class="line">    name = <span class="string">''</span></span><br><span class="line">    age = <span class="number">0</span></span><br><span class="line">    height = <span class="number">0</span></span><br><span class="line">    sex = <span class="string">''</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">openDoor</span><span class="params">(self,name)</span>:</span></span><br><span class="line">        print(<span class="string">"%s已经打开了冰箱门"</span>%name)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">fillEle</span><span class="params">(self,name)</span>:</span></span><br><span class="line">        print(<span class="string">"%s已经把大象装进冰箱了"</span>%name)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">closeDoor</span><span class="params">(self,name)</span>:</span></span><br><span class="line">        print(<span class="string">"%s已经关闭了冰箱门"</span>%name)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">P = Person()</span><br><span class="line">P.name = <span class="string">'tom'</span></span><br><span class="line">P.age  = <span class="number">25</span></span><br><span class="line">P.height = <span class="number">175</span></span><br><span class="line">P.sex = <span class="string">'male'</span></span><br><span class="line">P.openDoor(P.name)</span><br><span class="line">P.fillEle(P.name)</span><br><span class="line">P.closeDoor(P.name)</span><br><span class="line"></span><br><span class="line"><span class="comment">#tom已经打开了冰箱门</span></span><br><span class="line"><span class="comment">#tom已经把大象装进冰箱了</span></span><br><span class="line"><span class="comment">#tom已经关闭了冰箱门</span></span><br></pre></td></tr></table></figure>
<p>###【4】构造函数</p>
<p>目前来看我们所有创建的person的属性是一样的，这样有点不符合我们日常的逻辑。比如有些人有一些特质，我们可以把这个特质当做是他的一个属性，没有这个特质的人视为没有这个属性。</p>
<p>那我们用原来的知识点事是没有办法完成的，所以我们用构造函数来解决这个问题。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">构造函数：__init__(), 在创建类的时候回自动调用这个魔术方法</span><br></pre></td></tr></table></figure>
<font color="red"> 注意：类里面如果不写构造函数的话，会默认添加一个空的构造函数。</font>

<p>空的构造函数:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span><span class="params">(object)</span>:</span></span><br><span class="line">    name = <span class="string">''</span></span><br><span class="line">    age = <span class="number">0</span></span><br><span class="line">    height = <span class="number">0</span></span><br><span class="line">    sex = <span class="string">''</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">openDoor</span><span class="params">(self,name)</span>:</span></span><br><span class="line">        print(<span class="string">"%s已经打开了冰箱门"</span>%name)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">fillEle</span><span class="params">(self,name)</span>:</span></span><br><span class="line">        print(<span class="string">"%s已经把大象装进冰箱了"</span>%name)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">closeDoor</span><span class="params">(self,name)</span>:</span></span><br><span class="line">        print(<span class="string">"%s已经关闭了冰箱门"</span>%name)</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">P = Person()</span><br></pre></td></tr></table></figure>
<p>那我们用<code>__init__()</code>结合dict动态创建属性</p>
<p><code>__dict__</code>是以字典的形式返回当前对象的所有属性和值。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span><span class="params">(object)</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">openDoor</span><span class="params">(self,name)</span>:</span></span><br><span class="line">        print(<span class="string">"%s已经打开了冰箱门"</span>%name)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">fillEle</span><span class="params">(self,name)</span>:</span></span><br><span class="line">        print(<span class="string">"%s已经把大象装进冰箱了"</span>%name)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">closeDoor</span><span class="params">(self,name)</span>:</span></span><br><span class="line">        print(<span class="string">"%s已经关闭了冰箱门"</span>%name)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, **params)</span>:</span>  <span class="comment">#收集参数过来的是一个dict</span></span><br><span class="line">        <span class="keyword">for</span> key,val <span class="keyword">in</span> params.items():</span><br><span class="line">            self.__dict__[key]=val</span><br><span class="line"></span><br><span class="line">P = Person(name = <span class="string">'tom'</span>,age = <span class="number">25</span>)</span><br><span class="line">print(P.__dict__)</span><br><span class="line"></span><br><span class="line"><span class="comment">#&#123;'name': 'tom', 'age': 25&#125;</span></span><br></pre></td></tr></table></figure>
<p>这种方法就是玩，在实际开发中熟悉都是定义好的。</p>
<p>####【5】self是什么</p>
<p>我们发现每个方法里都有一个self，其实很多语言都有类似self的用法，python的<code>self</code>相当C++的this指针。</p>
<p>self代表当前实例，谁调用它，他就是谁。也就是那个对象。它自能在类里面使用。</p>
<p><code>self.__class__</code>代表本类名。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="string">'''这是一个人的类'''</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, **params)</span>:</span>  <span class="comment">#收集参数过来的是一个dict</span></span><br><span class="line">        <span class="keyword">for</span> key,val <span class="keyword">in</span> params.items():</span><br><span class="line">            self.__dict__[key] = val</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">openDoor</span><span class="params">(self,name)</span>:</span></span><br><span class="line">        print(<span class="string">"%s已经打开了冰箱门"</span>%name)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">fillEle</span><span class="params">(self,name)</span>:</span></span><br><span class="line">        print(<span class="string">"%s已经把大象装进冰箱了"</span>%name)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">closeDoor</span><span class="params">(self,name)</span>:</span></span><br><span class="line">        print(<span class="string">"%s已经关闭了冰箱门"</span>%name)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">printVar</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(self.name)</span><br><span class="line">        print(self.__class__)</span><br><span class="line">        print(self.__doc__)</span><br><span class="line"></span><br><span class="line">P = Person(name = <span class="string">'tom'</span>,age = <span class="number">25</span>)</span><br><span class="line">P.printVar()</span><br><span class="line"></span><br><span class="line">P1 = Person(name = <span class="string">'jack'</span>,sex = <span class="string">'male'</span>)</span><br><span class="line">P1.printVar()</span><br><span class="line"></span><br><span class="line"><span class="comment">#tom</span></span><br><span class="line"><span class="comment">#class '__main__.Person'&gt;</span></span><br><span class="line"><span class="comment">#这是一个人的类</span></span><br><span class="line"><span class="comment">#jack</span></span><br><span class="line"><span class="comment">#&lt;class '__main__.Person'&gt;</span></span><br><span class="line"><span class="comment">#这是一个人的类</span></span><br></pre></td></tr></table></figure>
<p>self 它不是关键字，但是在指定对象使用self的准确性确实很棒。</p>
<p>###【6】析构函数</p>
<p>析构函数<code>__del__()</code>  释放对象的时候自动调用的</p>
<p>理论上我们内存堆区的内存需要去手动的去开辟，手动的去释放的。但是python自己有垃圾回收机制，比如说那个对象不用了，python会自己把它释放掉，这是引用记录器的原理。</p>
<p>当程序执行结束了会自动释放。</p>
<p>我们看下面的例子：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="string">'''这是一个人的类'''</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, **params)</span>:</span>  <span class="comment">#收集参数过来的是一个dict</span></span><br><span class="line">        <span class="keyword">for</span> key,val <span class="keyword">in</span> params.items():</span><br><span class="line">            self.__dict__[key] = val</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">openDoor</span><span class="params">(self,name)</span>:</span></span><br><span class="line">        print(<span class="string">"%s已经打开了冰箱门"</span>%name)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">fillEle</span><span class="params">(self,name)</span>:</span></span><br><span class="line">        print(<span class="string">"%s已经把大象装进冰箱了"</span>%name)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">closeDoor</span><span class="params">(self,name)</span>:</span></span><br><span class="line">        print(<span class="string">"%s已经关闭了冰箱门"</span>%name)</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">__del__</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(self.name,<span class="string">'释放'</span>)</span><br><span class="line"></span><br><span class="line">P1 = Person(name= <span class="string">'P1'</span>, age= <span class="number">25</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#del P1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#在函数里定义的对象，会在函数结束时自动释放，这样可以用来减少内存空间的浪费</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">func</span><span class="params">()</span>:</span></span><br><span class="line">    P2 = Person(name= <span class="string">'P2'</span>,sex= <span class="string">'male'</span>)</span><br><span class="line"></span><br><span class="line">func()</span><br><span class="line"></span><br><span class="line"><span class="comment">#while是死循环，这样的话程序没有结束，内存不会释放</span></span><br><span class="line"><span class="keyword">while</span> <span class="number">1</span>:</span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></table></figure>
<p>###【7】<code>__repr__</code>和<code>__str__</code>函数</p>
<p>这两个信息是将类的信息重写的魔术方法或者说魔法方法。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">重写：将函数重写定义写一遍</span><br><span class="line"></span><br><span class="line">__str__():在调用<span class="keyword">print</span>打印对象时自动调用，是给用户用的，是一个描述对象的方法。</span><br><span class="line">__repr__()：是给机器用的，在Python解释器里面直接敲对象名在回车后调用的方法</span><br><span class="line">注意：在没有str时，且有repr,str = repr</span><br></pre></td></tr></table></figure>
<p>我们一般在打印一个类的时候，只能得到一个类信息，我们修改一下用上面的那个例子：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="string">'''这是一个人的类'''</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, **params)</span>:</span>  <span class="comment">#收集参数过来的是一个dict</span></span><br><span class="line">        <span class="keyword">for</span> key,val <span class="keyword">in</span> params.items():</span><br><span class="line">            self.__dict__[key] = val</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">openDoor</span><span class="params">(self,name)</span>:</span></span><br><span class="line">        print(<span class="string">"%s已经打开了冰箱门"</span>%name)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">fillEle</span><span class="params">(self,name)</span>:</span></span><br><span class="line">        print(<span class="string">"%s已经把大象装进冰箱了"</span>%name)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">closeDoor</span><span class="params">(self,name)</span>:</span></span><br><span class="line">        print(<span class="string">"%s已经关闭了冰箱门"</span>%name)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">P = Person(name= <span class="string">'P'</span>, age= <span class="number">25</span>)</span><br><span class="line"></span><br><span class="line">print(P)</span><br><span class="line"></span><br><span class="line"><span class="comment">#&lt;__main__.Person object at 0x103d1f828&gt;</span></span><br></pre></td></tr></table></figure>
<p>现在我们str来重写它：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#我们现在的需求是打印类名就可以得到属性值</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="string">'''这是一个人的类'''</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, **params)</span>:</span>  <span class="comment">#收集参数过来的是一个dict</span></span><br><span class="line">        <span class="keyword">for</span> key,val <span class="keyword">in</span> params.items():</span><br><span class="line">            self.__dict__[key] = val</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">openDoor</span><span class="params">(self,name)</span>:</span></span><br><span class="line">        print(<span class="string">"%s已经打开了冰箱门"</span>%name)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">fillEle</span><span class="params">(self,name)</span>:</span></span><br><span class="line">        print(<span class="string">"%s已经把大象装进冰箱了"</span>%name)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">closeDoor</span><span class="params">(self,name)</span>:</span></span><br><span class="line">        print(<span class="string">"%s已经关闭了冰箱门"</span>%name)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__str__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">'这是一个构造人的类'</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">P = Person(name= <span class="string">'tom'</span>, age= <span class="string">'25'</span>,sex= <span class="string">'male'</span>)</span><br><span class="line"></span><br><span class="line">print(P)</span><br><span class="line"></span><br><span class="line"><span class="comment">#这是一个构造人的类</span></span><br></pre></td></tr></table></figure>
<font color="red">注意：返回的类型只能是字符类型的，是其它类型的就报错</font>

<p>###【8】访问限制</p>
<p>访问限制就是不让变量在外部被访问，也就是私有属性。</p>
<p>一般编程语言都有public(公共的)和private(私有的)和protected(受保护的)关键字，但是python没有类似的关键字来进行修饰。</p>
<p>为了实现类似的私有变量的特性，python内部采用了name mangling(名字改遍)的技术，只用在变量或者函数的名字前加上了“__“两个下划线，那么函数和变量就变成了私有的,在外部是找不到的。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,name)</span>:</span></span><br><span class="line">        self.__name= name</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">getName</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(self.__name)</span><br><span class="line"></span><br><span class="line">P = Person(<span class="string">'tom'</span>)</span><br><span class="line"><span class="comment">#P.getName()   #这是在内部访问的</span></span><br><span class="line">print(P.__name)</span><br><span class="line"></span><br><span class="line"><span class="comment">#AttributeError: 'Person' object has no attribute '__name'</span></span><br></pre></td></tr></table></figure>
<p>私有的变量只能在本类里面使用。但是python是 名字改编，就是对变量名动一下手脚而已，实际上在外部你使用”_类名__变量名“就可以访问到私有的变量了：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,name)</span>:</span></span><br><span class="line">        self.__name= name</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__getName</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(self.__name)</span><br><span class="line"></span><br><span class="line">P = Person(<span class="string">'tom'</span>)</span><br><span class="line">print(P._Person__name)</span><br><span class="line">P._Person__getName()</span><br><span class="line"></span><br><span class="line"><span class="comment">#tom</span></span><br><span class="line"><span class="comment">#tom</span></span><br></pre></td></tr></table></figure>
<p>注意：Python目前的私有机制是伪私有，Python的类没有权限这么一说，所有的方法和属性都可以被外部调用。</p>
<p>###【8】继承</p>
<p>我们发现每个<code>class 类名（object）</code>的小括号里面都有一个object，它是什么了？</p>
<p>直接继承object类的类在某种程度上可以理解为是顶级类。这个小括号可以不带，object也可以不写，它会默认该类是顶级类。那么这个object就是父类或者是基类或超类。</p>
<p>那什么是继承了？比如说你可以继承你父母的财产，那么类也可以，它是拟人化的，它也可以有父类，但是没有母类这一说法，这比较像西方的文化。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span>:</span></span><br><span class="line">    Walk = <span class="number">1</span></span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">'我是一个人'</span>)        </span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__str__</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">'我是人类'</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">eat</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">'我会吃东西'</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">createHuman</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">'创造了一个人类'</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">walkAbout</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">'我走动了%d步'</span>%self.Walk</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span><span class="params">(Person)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(self.eat(),self.walkAbout())</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">S = Student()</span><br><span class="line">print(Student)</span><br><span class="line"></span><br><span class="line"><span class="comment">#我会吃东西 我走动了1步</span></span><br><span class="line"><span class="comment">#&lt;class '__main__.Student'&gt;</span></span><br></pre></td></tr></table></figure>
<p>通过上面的例子发现父类的<code>__init__</code>和<code>__str__</code>没有被自动调用,因为自己有一个<code>__init__</code>和<code>__str__</code>,所以父类的构造函数是不能自己调用的。那怎么调用了？</p>
<p>如果你想调用的话也是可以的，自己手动去调用。</p>
<p>但是，你不能使用<code>self.__init__</code>,这样会报错的。使用一个新的函数<code>super()</code>：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span>:</span></span><br><span class="line">    Walk = <span class="number">1</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">'我是一个人'</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__str__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">'我是人类'</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">eat</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">'我会吃东西'</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">createHuman</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">'创造了一个人类'</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">walkAbout</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">'我走动了%d步'</span>%self.Walk</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span><span class="params">(Person)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(self.eat(),self.walkAbout())</span><br><span class="line">        super().__init__()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__str__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> super().__str__()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">S = Student()</span><br><span class="line">print(S)</span><br><span class="line"></span><br><span class="line"><span class="comment">#我会吃东西 我走动了1步</span></span><br><span class="line"><span class="comment">#我是一个人</span></span><br><span class="line"><span class="comment">#我是人类</span></span><br></pre></td></tr></table></figure>
<p>super()函数能够自动去寻找父类的方法，而且还为我们传入父类的self参数，这样就不需要做这些事情了。</p>
<p>这样看可能更加直观：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span><span class="params">(object)</span>:</span></span><br><span class="line">    Walk = <span class="number">1</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">'我是一个人'</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__str__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">'我是人类'</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">eat</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">'我会吃东西'</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">createHuman</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">'创造了一个人类'</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">walkAbout</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">'我走动了%d步'</span>%self.Walk</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">secret</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">"it's a secret"</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Father</span><span class="params">(Person)</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">'我是你的父亲'</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__str__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">'我是你爸爸'</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">eat</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">'我喜欢吃排骨'</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">createHuman</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">'创了你'</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">walkAbout</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">'我走动了%d步'</span>%self.Walk</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">secret</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">"我只是藏了私房钱"</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span><span class="params">(Father)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        print( super().eat(),super().walkAbout())</span><br><span class="line">        super().__init__()</span><br><span class="line">        super().secret()     </span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__str__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">'我是学生'</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">eat</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">'我喜欢吃辣条'</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">createHuman</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">'我还小'</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">walkAbout</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">'我走动了%d步'</span> % self.Walk</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">secret</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">"我上课偷偷玩手机"</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">S = Student()</span><br><span class="line">print(S)</span><br><span class="line"></span><br><span class="line"><span class="comment">#我喜欢吃排骨 我走动了1步</span></span><br><span class="line"><span class="comment">#我是你的父亲</span></span><br><span class="line"><span class="comment">#我只是藏了私房钱</span></span><br><span class="line"><span class="comment">#我是学生</span></span><br></pre></td></tr></table></figure>
<p>上面这个例子可以看出，Student使用super()，只调用了父类属性和方法。</p>
<p>那么不喜欢父类的属性和方法，我就是要调用爷爷或者在往上的层级，那怎么用了？</p>
<p>调用父级以上的层级</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">语法  父类名.调用方法(self)</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span><span class="params">(object)</span>:</span></span><br><span class="line">    Walk = <span class="number">1</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">'我是一个人'</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__str__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">'我是人类'</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">eat</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">'我会吃东西'</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">createHuman</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">'创造了一个人类'</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">walkAbout</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">'我走动了%d步'</span>%self.Walk</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">secret</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">"it's a secret"</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Father</span><span class="params">(Person)</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">'我是你的父亲'</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__str__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">'我是你爸爸'</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">eat</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">'我喜欢吃排骨'</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">createHuman</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">'创了你'</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">walkAbout</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">'我走动了%d步'</span>%self.Walk</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">secret</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">"我只是藏了私房钱"</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span><span class="params">(Father)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        print( Person.eat(self),Person.walkAbout(self))</span><br><span class="line">        Person.__init__(self)</span><br><span class="line">        Person.secret(self)      <span class="comment">#调用指定的层级</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__str__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">'我是学生'</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">eat</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">'我喜欢吃辣条'</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">createHuman</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">'我还小'</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">walkAbout</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">'我走动了%d步'</span> % self.Walk</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">secret</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">"我上课偷偷玩手机"</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">S = Student()</span><br><span class="line">print(S)</span><br><span class="line"></span><br><span class="line"><span class="comment">#我会吃东西 我走动了1步</span></span><br><span class="line"><span class="comment">#我是一个人</span></span><br><span class="line"><span class="comment">#it's a secret</span></span><br><span class="line"><span class="comment">#我是学生</span></span><br></pre></td></tr></table></figure>
<p>那么用<code>Person().eat()</code>可以吗？</p>
<p>也可以但是这样算是实例化在调用了，每次实例化都会调用一次<code>__init__</code>这样会达不到预期的效果。</p>
<p>###【9】多继承</p>
<p>很多的语言都是不支持多继承的，比如php、java、C，它们都只能模拟多继承，通过interface（接口）来模拟，但是python直接就可以多继承。</p>
<p>这里你继承你老爸和你老叔的房子为例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Father</span><span class="params">(object)</span>:</span></span><br><span class="line">    F_house = <span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Uncle</span><span class="params">(object)</span>:</span></span><br><span class="line">    U_house = <span class="number">3</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MeMe</span><span class="params">(Father,Uncle)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(self.F_house + self.U_house)</span><br><span class="line">MeMe()</span><br><span class="line"></span><br><span class="line"><span class="comment">#5</span></span><br></pre></td></tr></table></figure>
<p>但是有个问题，如果两个父类方法的属性名重复，方法名重复会怎么办样</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Father</span><span class="params">(object)</span>:</span></span><br><span class="line">    house = <span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Uncle</span><span class="params">(object)</span>:</span></span><br><span class="line">    house = <span class="number">3</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MeMe</span><span class="params">(Father,Uncle)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(self.house + super().house)</span><br><span class="line">MeMe()</span><br><span class="line"></span><br><span class="line"><span class="comment">#4</span></span><br></pre></td></tr></table></figure>
<p>不管是继承下来的，还是父类找到的都是<code>Father</code>这个类的属性，不是名字的关系，是优先选择排在小括号<code>MeMe(Father,Uncle)</code>前面的那个类。</p>
<p>解决方案，直接使用类名：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Father</span><span class="params">(object)</span>:</span></span><br><span class="line">    house = <span class="number">2</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">money</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> <span class="number">10000000</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Uncle</span><span class="params">(object)</span>:</span></span><br><span class="line">    house = <span class="number">3</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">money</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> <span class="number">10000000</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MeMe</span><span class="params">(Father,Uncle)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(Father.house + Uncle.house)</span><br><span class="line">        print(Father.money(self) + Uncle.money(self))</span><br><span class="line">MeMe()</span><br><span class="line"></span><br><span class="line"><span class="comment">#5</span></span><br><span class="line"><span class="comment">#20000000</span></span><br></pre></td></tr></table></figure>
<font color="red">注意：多继承有个菱形继承陷阱，看下面例子：</font>

<p>D的两个父类(B,C)都继承了A类，这样的话就形成了代码的冗余，继承等于在内存的堆区里面把父类的所有东西都拷贝一份然后在保存在另外一个堆区。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">"进入A…"</span>)</span><br><span class="line">        print(<span class="string">"离开A…"</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span><span class="params">(A)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">"进入B…"</span>)</span><br><span class="line">        A.__init__(self)</span><br><span class="line">        print(<span class="string">"离开B…"</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">C</span><span class="params">(A)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">"进入C…"</span>)</span><br><span class="line">        A.__init__(self)</span><br><span class="line">        print(<span class="string">"离开C…"</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">D</span><span class="params">(B, C)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">"进入D…"</span>)</span><br><span class="line">        B.__init__(self)</span><br><span class="line">        C.__init__(self)</span><br><span class="line">        print(<span class="string">"离开D…"</span>)</span><br><span class="line"></span><br><span class="line">D()</span><br></pre></td></tr></table></figure>
<p> <img src="/blog/2018/05/21/python基础10/菱形.png" alt="菱形"></p>
<p>多重继承容易导致钻石继承的问题，上面代码实例化D类后我们发现A被前后进入了两次，有的人会说无所谓，我女朋友都不止了……</p>
<p>这有什么危害了，比如说A类有个<code>time.sleep(60)</code>，每次都进去是不是运行的非常慢，而且还非常的耗费效率。</p>
<p>你可以使用python的 方法解析顺序(MRO),这个使用C3算法，反正很复杂，就是说在避免一个类被多次调用的前提下，使用广度优先和从左到右的原则去寻找需要的属性和方法。</p>
<p>不管怎么样<code>object</code>都是金字塔的顶层</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">print(D.__mro__)</span><br><span class="line"></span><br><span class="line">(&lt;class '__main__.D'&gt;, &lt;class '__main__.B'&gt;, &lt;class '__main__.C'&gt;, &lt;class '__main__.A'&gt;, &lt;class 'object'&gt;)</span><br></pre></td></tr></table></figure>
<p>我们可以只取一个类的<code>__init__</code>，或者说使用super(),它会默认取小括号前面一个类的内容：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">"进入A…"</span>)</span><br><span class="line">        print(<span class="string">"离开A…"</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span><span class="params">(A)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">"进入B…"</span>)</span><br><span class="line">        super().__init__()</span><br><span class="line">        print(<span class="string">"离开B…"</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">C</span><span class="params">(A)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">"进入C…"</span>)</span><br><span class="line">        super().__init__()</span><br><span class="line">        print(<span class="string">"离开C…"</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">D</span><span class="params">(B, C)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">"进入D…"</span>)</span><br><span class="line">        super().__init__()</span><br><span class="line">        print(<span class="string">"离开D…"</span>)</span><br><span class="line">D()</span><br></pre></td></tr></table></figure>
<font color="red">所以使用多继承要小心！！！</font>


<p>##作业人开枪射击子弹</p>
<p>三个条件，人，枪，弹夹</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://jyue0812.github.io/2018/05/21/python基础10/" data-id="cjhfjx3dn0006w4qxqoxmhlla" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-python基础8" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog/2018/05/21/python基础8/" class="article-date">
  <time datetime="2018-05-21T01:01:40.804Z" itemprop="datePublished">2018-05-21</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>#第十二章</p>
<hr>
<p>##【8】对序列的文件操作:泡菜（pickle）</p>
<p>文件的写入只能写入普通的字符，对于list、tuple、dict、set这些类型无法写入，所以只能使用二进制写入，但是‘wb’使用了以后一直在报错<code>TypeError: write() argument must be str, not tuple</code></p>
<p>那怎么办：</p>
<p>python给我们提供了pickle模块,它几乎可以把所有python的对象转化为二进制的形式存放，这个过程称为picking，那么二进制转换为对象就是unpicking.</p>
<p>python的pickle模块实现了基本的数据序列和反序列化。通过pickle模块的序列化操作我们能够将程序中运行的对象信息保存到文件中去，永久存储；通过pickle模块的反序列化操作，我们能够从文件中创建上一次程序保存的对象。</p>
<p>基本接口：</p>
<p>pickle.dump(obj, file, [,protocol])</p>
<p>注解：将对象obj保存到文件file中去。　　　　　</p>
<p>protocol为序列化使用的协议版本，0：ASCII协议，所序列化的对象使用可打印的ASCII码表示；1：老式的二进制协议；2：2.3版本引入的新二进制协议，较以前的更高效。其中协议0和1兼容老版本的python。protocol默认值为0。</p>
<p>file：对象保存到的类文件对象。file必须有write()接口， file可以是一个以’w’方式打开的文件或者一个StringIO对象或者其他任何实现write()接口的对象。如果protocol&gt;=1，文件对象需要是二进制模式打开的。</p>
<p>pickle.load(file)</p>
<p>注解：从file中读取一个字符串，并将它重构为原来的python对象。</p>
<p>file:类文件对象，有read()和readline()接口。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> pickle   <span class="comment">#引入数据持久性模块</span></span><br><span class="line"></span><br><span class="line">myList = (<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="string">"sunck is a good man"</span>)</span><br><span class="line">path = <span class="string">r"C:\Users\xlg\Desktop\Python-1704\day08\1-文件读写\file6.txt"</span></span><br><span class="line">f = open(path, <span class="string">"wb"</span>)</span><br><span class="line">pickle.dump(myList, f)</span><br><span class="line">f.close()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#读取</span></span><br><span class="line">f1 = open(path, <span class="string">"rb"</span>)</span><br><span class="line">tempList= pickle.load(f1)</span><br><span class="line">print(tempList)</span><br><span class="line">f1.close()</span><br></pre></td></tr></table></figure>
<p>###【9】编码和解码</p>
<p>如果中文字符在写入文件的时候没有设置<code>utf-8</code>或者<code>gbk</code>、<code>gb2312</code>等中文字符集，那么读取的时候就是2进制的。<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">path = <span class="string">'wdemo.txt'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> open(path, <span class="string">"wb"</span>) <span class="keyword">as</span> f1:</span><br><span class="line">    str = <span class="string">"你好上海，你好千锋"</span></span><br><span class="line">    f1.write(str.encode(<span class="string">"utf-8"</span>)) </span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> open(path, <span class="string">"rb"</span>) <span class="keyword">as</span> f2:</span><br><span class="line">    data = f2.read()</span><br><span class="line">    print(data)</span><br><span class="line">    print(type(data))</span><br><span class="line">    newData = data.decode(<span class="string">"utf-8"</span>)</span><br><span class="line">    print(newData)</span><br><span class="line">    print(type(newData))</span><br></pre></td></tr></table></figure></p>
<p>###【10】文件系统（os模块）</p>
<p>接下来我们讲一个Python里面十分有用的模块，什么是模块？其实我们每一个.py的文件都是一个模块。python自身带有非常多使用的模块，在日常编程中，如果能够熟练地掌握它们，将事半功倍。</p>
<p>首先要介绍的高大上的OS模块，OS就是Operating System的缩写，意思是操作系统。很多的文件系统的访问都是通过OS模块来实现的。我们所知道的windows、Mac OS、UNIX、Linux等,对于这些系统的底层实现起来也是不一样的，因此你就需要考虑用到哪个模块了。</p>
<p>但是python是跨平台的语言，也就是说，同样的源码在不同的操作系统不需要修改同样可以实现。有了OS模块，不需要关心什么操作系统下使用什么模块，OS会帮你选择正确的模块并调用。</p>
<table>
<thead>
<tr>
<th>函数名</th>
<th>使用方法</th>
</tr>
</thead>
<tbody>
<tr>
<td>os.getcwd()</td>
<td>获得当前工作目录</td>
</tr>
<tr>
<td>os.curdir</td>
<td>返回当前目录（’.’)</td>
</tr>
<tr>
<td>os.environ</td>
<td>获取当前环境变量</td>
</tr>
<tr>
<td>os.environ.get(path)</td>
<td>获取指定的环境变量</td>
</tr>
<tr>
<td>os.listdir(path)：</td>
<td>列出dirname下的目录和文件</td>
</tr>
<tr>
<td>os.mkdir(path):</td>
<td>创建单层目录，如果目录已经存在抛出异常</td>
</tr>
<tr>
<td>os.makedirs(.path)</td>
<td>递归创建多级目录，如果目录已经存在抛出异常（E:\a\b和E:\a\c不会冲突)</td>
</tr>
<tr>
<td>os.remove(path)</td>
<td>删除文件</td>
</tr>
<tr>
<td>os.rmdir(path)</td>
<td>删除单层目录，如果目录非空则抛出异常</td>
</tr>
<tr>
<td>os.removedirs(path)</td>
<td>递归删除目录，从子目录到父目录逐个删除，遇到目录非空则抛出异常</td>
</tr>
<tr>
<td>os.rename(new,old)</td>
<td>将文件的old重命名为new</td>
</tr>
<tr>
<td>os.system(command)</td>
<td>运行系统的shell命令</td>
</tr>
<tr>
<td>以下是：</td>
<td>支持路径操作中常用到的一些定义支持所有平台</td>
</tr>
<tr>
<td>os.curdir</td>
<td>指代当前目录（’.’）</td>
</tr>
<tr>
<td>os.pardir</td>
<td>指代上一级目录(‘..’)</td>
</tr>
<tr>
<td>os.sep</td>
<td>输出操作系统特定的路径分隔符（windons下是\，linux下是/）</td>
</tr>
<tr>
<td>os.linesp</td>
<td>当前平台使用的终止符（（windons下是\r\n，linux下是\n）</td>
</tr>
<tr>
<td>os.name</td>
<td>指定当前的操作系统（包括’posix’,’nt’,’mac’,’os2’,’ce’,’java’)</td>
</tr>
</tbody>
</table>
<p>####1.getcwd()<br>得当前工作目录  </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line">print(os.getcwd())</span><br><span class="line"></span><br><span class="line"><span class="comment">#C:\\Python36</span></span><br></pre></td></tr></table></figure>
<p>####2.chdir()<br>改变工作目录</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line">os.chdir(<span class="string">'C:\\Python27'</span>)</span><br><span class="line">print(os.getcwd())</span><br><span class="line"></span><br><span class="line"><span class="comment">#C:\\Python27</span></span><br></pre></td></tr></table></figure>
<p>####3、system()<br>运行系统命令</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line">os.system(<span class="string">'clear'</span>)  <span class="comment">#清理命令行屏幕上的所有过去输入的信息</span></span><br></pre></td></tr></table></figure>
<p>####4、walk()<br>非常有用的函数，可以用来指定遍历指定路径下的所有子目录，并返回一个三元祖的结果：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> os.walk(<span class="string">'/Users/ruidong/www'</span>):</span><br><span class="line">    print(i)</span><br></pre></td></tr></table></figure>
<p>####5.os.path模块<br>这是另一个强大的模块，它可以完成一些路径操作。</p>
<table>
<thead>
<tr>
<th>函数名</th>
<th>使用方法</th>
</tr>
</thead>
<tbody>
<tr>
<td>os.path.abspath(path)</td>
<td>#返回绝对路径</td>
</tr>
<tr>
<td>os.path.basename(path)</td>
<td>#返回文件名</td>
</tr>
<tr>
<td>os.path.dirname(path)</td>
<td>#返回文件路径</td>
</tr>
<tr>
<td>os.path.join(path1[, path2[, …]])</td>
<td>#把目录和文件名合成一个路径</td>
</tr>
<tr>
<td>os.path.split(path)</td>
<td>#把路径分割成dirname和basename，返回一个元组</td>
</tr>
<tr>
<td>os.path.splitext(path)</td>
<td>#分割路径，返回路径名和文件扩展名的元组</td>
</tr>
<tr>
<td>os.path.getsize(path)</td>
<td>#返回文件大小，如果文件不存在就返回错误</td>
</tr>
<tr>
<td>os.path.getatime(path)</td>
<td>#返回最后一次访问的时间。</td>
</tr>
<tr>
<td>os.path.getctime(path)</td>
<td>#返回文件的创建时间</td>
</tr>
<tr>
<td>os.path.getmtime(path)</td>
<td>#返回在此path下最后一次修改的时间。</td>
</tr>
<tr>
<td>以下函数返回的是</td>
<td>True或False</td>
</tr>
<tr>
<td>os.path.exists(path)</td>
<td>#路径存在则返回True,否则回False</td>
</tr>
<tr>
<td>os.path.samefile(path1, path2)</td>
<td>#判断两个变量是不是指向同一个文件</td>
</tr>
<tr>
<td>os.path.isabs(path)</td>
<td>#判断指定路径是否是绝对路径</td>
</tr>
<tr>
<td>os.path.isdir(path)</td>
<td>#判断指定路径是否存在且是个目录</td>
</tr>
<tr>
<td>os.path.isfile(path)</td>
<td>#判断指定路径是否存在且是个文件</td>
</tr>
<tr>
<td>os.path.islink(path)</td>
<td>#判断指定路径是否存在且是一个符号链接</td>
</tr>
<tr>
<td>os.path.ismount(path)</td>
<td>#判断指定目录是否存在且是个挂载点</td>
</tr>
</tbody>
</table>
<p>#####os.path.join（）</p>
<p>这里的join和BIF里面的join不是一回事，它是将路径名和文件名组合成一个完整的路径。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line">_path = <span class="string">r'/Users/ruidong/www'</span></span><br><span class="line"></span><br><span class="line">_file = <span class="string">r'demo.txt'</span></span><br><span class="line"></span><br><span class="line">final_path = os.path.join(_path,_file)</span><br><span class="line"></span><br><span class="line">print(final_path)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#/Users/ruidong/www/demo.txt</span></span><br></pre></td></tr></table></figure>
<p>####split()和splitext()<br>split()和splitext()函数都用于分割路劲，split()函数分割路径和文件名，而splitext()用于分割文件名和后缀名。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line">_path = <span class="string">r'/Users/ruidong/www/demo.txt'</span></span><br><span class="line"></span><br><span class="line">print(os.path.split(_path))</span><br><span class="line">print(os.path.splitext(_path))</span><br><span class="line"></span><br><span class="line"><span class="comment">#('/Users/ruidong/www', 'demo.txt')</span></span><br><span class="line"><span class="comment">#('/Users/ruidong/www/demo', '.txt')</span></span><br></pre></td></tr></table></figure>
<p>###【11】栈和队列</p>
<p>collections是Python内建的一个集合模块，提供了许多有用的集合类。</p>
<p>使用list存储数据时，按索引访问元素很快，但是插入和删除元素就很慢了，因为list是线性存储，数据量大的时候，插入和删除效率很低。</p>
<p>deque是为了高效实现插入和删除操作的双向列表，适合用于队列和栈：</p>
<p>####栈</p>
<p>栈（stack）又名堆栈，它是一种运算受限的线性表。其限制是仅允许在表的一端进行插入和删除运算。这一端被称为栈顶，相对地，把另一端称为栈底。向一个栈插入新元素又称作进栈、入栈或压栈，它是把新元素放到栈顶元素的上面，使之成为新的栈顶元素；从一个栈删除元素又称作出栈或退栈，它是把栈顶元素删除掉，使其相邻的元素成为新的栈顶元素。</p>
<p>栈的原则就是先进后出</p>
<image src="images/stack.jpg">

<p>我们用一个列表来模拟压栈：</p>
<p>我们列表的最后一个元素就是栈顶</p>
<p>第一个元素就是栈底</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#用队列集合模拟栈运行</span></span><br><span class="line"><span class="keyword">import</span> collections</span><br><span class="line"><span class="comment">#创建一个队列 ,用于模拟栈的运行</span></span><br><span class="line">queue = collections.deque()</span><br><span class="line">print(queue)</span><br><span class="line"></span><br><span class="line"><span class="comment">#进栈(存数据)</span></span><br><span class="line">queue.append(<span class="string">"A"</span>)</span><br><span class="line">print(queue)</span><br><span class="line">queue.append(<span class="string">"B"</span>)</span><br><span class="line">print(queue)</span><br><span class="line">queue.append(<span class="string">"C"</span>)</span><br><span class="line">print(queue)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#出栈(取数据)</span></span><br><span class="line">res1 = queue.pop()</span><br><span class="line">print(<span class="string">"res1 ="</span>, res1)</span><br><span class="line">print(queue)</span><br><span class="line">res2 = queue.pop()</span><br><span class="line">print(<span class="string">"res2 ="</span>, res2)</span><br><span class="line">print(queue)</span><br><span class="line">res3 = queue.pop()</span><br><span class="line">print(<span class="string">"res3 ="</span>, res3)</span><br><span class="line">print(queue)</span><br></pre></td></tr></table></figure>
<p>####队列</p>
<p>队列是一种特殊的线性表，特殊之处在于它只允许在表的前端（front）进行删除操作，而在表的后端（rear）进行插入操作，和栈一样，队列是一种操作受限制的线性表。进行插入操作的端称为队尾，进行删除操作的端称为队头。</p>
<p>它的原则是先进先出</p>
<image src="images/deque.png">

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> collections</span><br><span class="line"></span><br><span class="line"><span class="comment">#创建一个队列</span></span><br><span class="line">queue = collections.deque()</span><br><span class="line">print(queue)</span><br><span class="line"></span><br><span class="line"><span class="comment">#进队(存数据)</span></span><br><span class="line">queue.append(<span class="string">"A"</span>)</span><br><span class="line">print(queue)</span><br><span class="line">queue.append(<span class="string">"B"</span>)</span><br><span class="line">print(queue)</span><br><span class="line">queue.append(<span class="string">"C"</span>)</span><br><span class="line">print(queue)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#出队(取数据)</span></span><br><span class="line">res1 = queue.popleft()</span><br><span class="line">print(<span class="string">"res1 ="</span>, res1)</span><br><span class="line">print(queue)</span><br><span class="line">res2 = queue.popleft()</span><br><span class="line">print(<span class="string">"res2 ="</span>, res2)</span><br><span class="line">print(queue)</span><br><span class="line">res3 = queue.popleft()</span><br><span class="line">print(<span class="string">"res3 ="</span>, res3)</span><br><span class="line">print(queue)</span><br></pre></td></tr></table></figure>
<p>我们的栈和队列了其实就是学习一种思想，包裹之前的递归都是一中程序的思想</p>
<p>####课堂小案例，结合文件</p>
<p>遍历目录</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">getALlDir</span><span class="params">(path,sp = <span class="string">'  '</span>)</span>:</span></span><br><span class="line">    filesList = os.listdir(path)</span><br><span class="line">    sp += <span class="string">'  '</span></span><br><span class="line">    <span class="keyword">for</span> fileName <span class="keyword">in</span> filesList:</span><br><span class="line">        filesAbsPath = os.path.join(path, fileName)</span><br><span class="line">        <span class="keyword">if</span> os.path.isdir(filesAbsPath):</span><br><span class="line">            print(sp + <span class="string">'目录：'</span>,fileName)</span><br><span class="line">            getALlDir(filesAbsPath,sp)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            print(sp + <span class="string">'文件：'</span>,fileName)</span><br><span class="line"></span><br><span class="line">getALlDir(<span class="string">r'/Users/ruidong/PycharmProjects'</span>)</span><br></pre></td></tr></table></figure>
<p>##第十三章</p>
<p>###【1】时间可以改变一切：time模块</p>
<hr>
<p>在我们平常的代码中，经常需要和时间打交道。在Python中，与时间处理相关的模块有：time、datetime以及calendar。学会计算时间，对程序的调优非常重要，可以在程序中狂打时间戳，来具体判断程序中哪一块耗时最多，从而找到程序调优的重心处。这里先来讲一个time模块。<br>在开始前，先说明几点：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>、在Python中，通常有这几种方式表示时间：时间戳、格式化的时间字符串、元组（struct_time 共九种元素）。由于Python的time模块主要是调用C库实现的，所以在不同的平台可能会有所不同。</span><br><span class="line"><span class="number">2</span>、时间戳（timestamp）的方式：时间戳表示是从<span class="number">1970</span>年<span class="number">1</span>月<span class="number">1</span>号 <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>开始到现在按秒计算的偏移量。查看一下type(time.time())的返回值类型，可以看出是float类型。返回时间戳的函数主要有time()、clock()等。</span><br><span class="line"><span class="number">3</span>、UTC（世界协调时），就是格林威治天文时间，也是世界标准时间。在中国为UTC+<span class="number">8</span>。DST(夏令时)：是一种节约能源而人为规定时间制度，在夏季调快<span class="number">1</span>个小时。</span><br><span class="line"><span class="number">4</span>、元组方式：struct_time元组共有<span class="number">9</span>个元素，返回struct_time的函数主要有gmtime()，localtime()，strptime()。</span><br></pre></td></tr></table></figure>
<p>使用该模块中的函数时，必须先引入该模块（import time） </p>
<p>####1、时间戳<br>python中的时间戳是以秒为单位的，它是一个浮点类型的数据。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="comment">#时间戳</span></span><br><span class="line">print(time.time())</span><br><span class="line"><span class="comment">#毫秒时间戳，</span></span><br><span class="line">print(time.time() * <span class="number">1000</span>)</span><br><span class="line"><span class="comment">#毫秒时间戳取整</span></span><br><span class="line">print(int(time.time() * <span class="number">1000</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment">#1510884320.13084</span></span><br><span class="line"><span class="comment">#1510884320130.936</span></span><br><span class="line"><span class="comment">#1510884320130</span></span><br></pre></td></tr></table></figure>
<p>####2、struct_time元祖结构格式<br>time.localtime(secs)<br>将一个时间戳转换为当前时区的struct_time，即时间数组格式的时间</p>
<p>如果secs参数未提供，则以当前时间为准（即会默认调用time.time()）。 </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#没有传入参数</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line">print(time.localtime())</span><br><span class="line"></span><br><span class="line"><span class="comment">#time.struct_time(tm_year=2017, tm_mon=11, tm_mday=17, tm_hour=10, tm_min=14, tm_sec=2, tm_wday=4, tm_yday=321, tm_isdst=0)</span></span><br><span class="line">``` </span><br><span class="line"></span><br><span class="line">```python</span><br><span class="line"><span class="comment">#传入参数的</span></span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line">out_time = time.time() - (<span class="number">60</span> * <span class="number">60</span> * <span class="number">24</span> * <span class="number">365</span> *<span class="number">2</span>)</span><br><span class="line">print(int(out_time))</span><br><span class="line">print(time.localtime(<span class="number">1447812614</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment">#1447812789</span></span><br><span class="line"><span class="comment">#time.struct_time(tm_year=2015, tm_mon=11, tm_mday=18, tm_hour=10, tm_min=10, tm_sec=14, tm_wday=2, tm_yday=322, tm_isdst=0)</span></span><br></pre></td></tr></table></figure>
<p>####3、将一个时间戳转换为UTC时区的struct_time </p>
<p>time.gmtime([secs]) </p>
<p>time.gmtime() 函数将一个时间戳转换为UTC时区（0时区）的struct_time，可选的参数sec表示从1970-1-1 00:00:00以来的秒数。其默认值为time.time()，函数返回time.struct_time类型的对象。（struct_time是在time模块中定义的表示时间的对象）。<br>如果secs参数未提供，则以当前时间为准。 </p>
<p>sec – 转换为time.struct_time类型的对象的秒数</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#注意它是0时区，就是说比我们的时间少了8个小时</span></span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line">print(time.gmtime())</span><br><span class="line"></span><br><span class="line"><span class="comment">#time.struct_time(tm_year=2017, tm_mon=11, tm_mday=17, tm_hour=2, tm_min=18, tm_sec=12, tm_wday=4, tm_yday=321, tm_isdst=0)</span></span><br></pre></td></tr></table></figure>
<p>####4、time.mktime(t)：将一个struct_time转化为时间戳 </p>
<p>time.mktime(t) 函数执行与gmtime(), localtime()相反的操作，它接收struct_time对象作为参数,返回用秒数表示时间的浮点数。<br>如果输入的值不是一个合法的时间，将触发 OverflowError 或 ValueError。<br>参数：</p>
<p>t – 结构化的时间或者完整的9位元组元素</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line">print(time.mktime(time.localtime()))</span><br><span class="line"></span><br><span class="line"><span class="comment">#1510885313.0</span></span><br></pre></td></tr></table></figure>
<p>####5、让程序睡一会</p>
<p>time.sleep(secs)：线程推迟指定的时间运行<br>线程睡眠指定时间，单位为妙。</p>
<p>secs：为数值类型的整数或浮点数。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>,<span class="number">6</span>):</span><br><span class="line">    print(i)</span><br><span class="line">    time.sleep(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#5秒以后触发</span></span><br><span class="line">print(<span class="string">"节日快乐"</span>)</span><br></pre></td></tr></table></figure>
<p>####6、time.clock()<br>这个函数， 函数以浮点数计算的秒数返回当前的CPU时间。用来衡量不同程序的耗时，比time.time()更有用。在不同的系统上含义不同。在NUix系统上，它返回的是“进程时间”，它是用妙表示的浮点数（时间戳）。而在Windows中，第一次调用，返回的是进程运行时实际时间。而第二次之后的调用是自第一次调用以后到现在的运行时间。<br>返回值<br>该函数有两个功能：</p>
<p>（1）在第一次调用的时候，返回的是程序运行的实际时间；<br>（2）第二次之后的调用，返回的是自第一次调用后,到这次调用的时间间隔在win32系统下，这个函数返回的是真实时间（wall time），而在Unix/Linux下返回的是CPU时间。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line">print(time.clock())</span><br><span class="line">print(time.clock())</span><br><span class="line"></span><br><span class="line"><span class="comment">#0.066535</span></span><br><span class="line"><span class="comment">#0.0666</span></span><br></pre></td></tr></table></figure>
<p>####7、time.asctime( [t] )<br>把一个表示时间的元组或者struct_time表示为 ‘Sun Aug 23 14:31:59 2015’ 这种形式。如果没有给参数，会将time.localtime()作为参数传入。<br>参数：</p>
<p>t – 9个元素的元组或者通过函数 gmtime() 或 localtime() 返回的时间值</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line">local = time.localtime()</span><br><span class="line">asc = time.asctime(local)</span><br><span class="line"></span><br><span class="line">print(asc)</span><br><span class="line"></span><br><span class="line">Fri Nov <span class="number">17</span> <span class="number">10</span>:<span class="number">41</span>:<span class="number">46</span> <span class="number">2017</span></span><br></pre></td></tr></table></figure>
<p>####8、time.ctime([secs])<br>把一个时间戳（按秒计算的浮点数）转化为time.asctime()的形式。如果未指定参数，将会默认使用time.time()作为参数。它的作用相当于time.asctime(time.localtime(secs))<br>参数：</p>
<p>secs – 要转换为字符串时间的秒数</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line">print(time.ctime())</span><br><span class="line"></span><br><span class="line"><span class="comment">#Fri Nov 17 10:44:43 2017</span></span><br></pre></td></tr></table></figure>
<p>####9、格式化时间<br>time.strftime( format [, t] ) </p>
<p>返回字符串表示的当地时间。 </p>
<p>把一个代表时间的元组或者struct_time（如由time.localtime()和time.gmtime()返回）转化为格式化的时间字符串，格式由参数format决定。如果未指定，将传入time.localtime()。如果元组中任何一个元素越界，就会抛出ValueError的异常。函数返回的是一个可读表示的本地时间的字符串。<br>参数：</p>
<p>format：格式化字符串</p>
<p>t ：可选的参数是一个struct_time对象</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">%a  本地星期名称的简写（如星期四为Thu）      </span><br><span class="line">%A  本地星期名称的全称（如星期四为Thursday）      </span><br><span class="line">%b  本地月份名称的简写（如八月份为agu）    </span><br><span class="line">%B  本地月份名称的全称（如八月份为august）       </span><br><span class="line">%c  本地相应的日期和时间的字符串表示（如：<span class="number">15</span>/<span class="number">08</span>/<span class="number">27</span> <span class="number">10</span>:<span class="number">20</span>:<span class="number">06</span>）       </span><br><span class="line">%d  一个月中的第几天（<span class="number">01</span> - <span class="number">31</span>）  </span><br><span class="line">%f  微秒（范围<span class="number">0.999999</span>）    </span><br><span class="line">%H  一天中的第几个小时（<span class="number">24</span>小时制，<span class="number">00</span> - <span class="number">23</span>）       </span><br><span class="line">%I  第几个小时（<span class="number">12</span>小时制，<span class="number">0</span> - <span class="number">11</span>）       </span><br><span class="line">%j  一年中的第几天（<span class="number">001</span> - <span class="number">366</span>）     </span><br><span class="line">%m  月份（<span class="number">01</span> - <span class="number">12</span>）    </span><br><span class="line">%M  分钟数（<span class="number">00</span> - <span class="number">59</span>）       </span><br><span class="line">%p  本地am或者pm的相应符      </span><br><span class="line">%S  秒（<span class="number">00</span> - <span class="number">61</span>）    </span><br><span class="line">%U  一年中的星期数。（<span class="number">00</span> - <span class="number">53</span>星期天是一个星期的开始。）第一个星期天之    前的所有天数都放在第<span class="number">0</span>周。     </span><br><span class="line">%w  一个星期中的第几天（<span class="number">0</span> - <span class="number">6</span>，<span class="number">0</span>是星期天）    </span><br><span class="line">%W  和%U基本相同，不同的是%W以星期一为一个星期的开始。    </span><br><span class="line">%x  本地相应日期字符串（如<span class="number">15</span>/<span class="number">08</span>/<span class="number">01</span>）     </span><br><span class="line">%X  本地相应时间字符串（如<span class="number">08</span>:<span class="number">08</span>:<span class="number">10</span>）     </span><br><span class="line">%y  去掉世纪的年份（<span class="number">00</span> - <span class="number">99</span>）两个数字表示的年份       </span><br><span class="line">%Y  完整的年份（<span class="number">4</span>个数字表示年份）</span><br><span class="line">%z  与UTC时间的间隔（如果是本地时间，返回空字符串）</span><br><span class="line">%Z  时区的名字（如果是本地时间，返回空字符串）       </span><br><span class="line">%%  ‘%’字符</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line">local_time = time.localtime()</span><br><span class="line"></span><br><span class="line">format_time = time.strftime(<span class="string">'%Y年%m月%d日 %H：%M：%S'</span>,local_time)</span><br><span class="line"></span><br><span class="line">print(format_time)</span><br><span class="line"><span class="comment">#注意月份是小m（%m），分钟是大M（%M）。年是大写</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#2017年11月17日 10：51：10</span></span><br></pre></td></tr></table></figure>
<p>你也可以玩拼接</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line">local_time = time.localtime()</span><br><span class="line"></span><br><span class="line">print(str(local_time.tm_year) + <span class="string">"年"</span> + str(local_time.tm_mon) + <span class="string">"月"</span> + str(local_time.tm_mday) + <span class="string">"日"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#2017年11月17日</span></span><br></pre></td></tr></table></figure>
<p>获取当前时间的时分秒</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line">local_time = time.localtime()</span><br><span class="line"></span><br><span class="line">print(time.strftime(<span class="string">'%H:%M:%S'</span>,local_time))</span><br><span class="line"></span><br><span class="line"><span class="comment">#10:55:44</span></span><br></pre></td></tr></table></figure>
<p>获取当前时间的格式化时间</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line">t = time.localtime()</span><br><span class="line"></span><br><span class="line">print(time.strftime(<span class="string">'%F %T'</span>,t)) <span class="comment">#简写</span></span><br><span class="line">print(time.strftime(<span class="string">'%Y-%m-%d %H:%M:%S %p'</span>,t)) <span class="comment"># am 还是 pm</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#2017-11-17 11:23:57</span></span><br><span class="line"><span class="comment">#2017-11-17 11:23:57 AM</span></span><br></pre></td></tr></table></figure>
<p>####10、将格式字符串转化成struct_time.</p>
<p>time.strptime(string[,format]) </p>
<p>该函数是time.strftime()函数的逆操作。time strptime() 函数根据指定的格式把一个时间字符串解析为时间元组。所以函数返回的是struct_time对象。<br>参数：</p>
<p>string ：时间字符串<br>format：格式化字符串</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> time,datetime</span><br><span class="line"></span><br><span class="line"><span class="comment">#创建一个时间字符串变量stime</span></span><br><span class="line">stime = <span class="string">"2015-08-24 13:01:30"</span></span><br><span class="line"></span><br><span class="line">formattime = time.strptime(stime,<span class="string">"%Y-%m-%d %H:%M:%S"</span>)</span><br><span class="line"></span><br><span class="line">print(formattime)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#遍历返回的时间元组序列</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> formattime :</span><br><span class="line">    print(i,end=<span class="string">' '</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#time.struct_time(tm_year=2015, tm_mon=8, tm_mday=24, tm_hour=13, tm_min=1, tm_sec=30, tm_wday=0, tm_yday=236, tm_isdst=-1)</span></span><br><span class="line"><span class="comment">#2015 8 24 13 1 30 0 236 -1</span></span><br></pre></td></tr></table></figure>
<font color="red">注意:在使用strptime()函数将一个指定格式的时间字符串转化成元组时，参数format的格式必须和string的格式保持一致，如果string中日期间使用“-”分隔，format中也必须使用“-”分隔，时间中使用冒号“:”分隔，后面也必须使用冒号分隔，否则会报格式不匹配的错误。</font>

<p>###【2】学会操控时间：datetime模块</p>
<hr>
<p> Python提供了多个内置模块用于操作日期时间，像calendar，time，datetime。time模块我在之前的文章已经有所介绍，它提供 的接口与C标准库time.h基本一致。相比于time模块，datetime模块的接口则更直观、更容易调用。今天就来讲讲datetime模块。</p>
<p> datetime模块定义了两个常量：datetime.MINYEAR和datetime.MAXYEAR，分别表示datetime所能表示的最 小、最大年份。其中，MINYEAR = 1，MAXYEAR = 9999。（对于偶等玩家，这个范围已经足够用矣~~）</p>
<p>datetime模块定义了下面这几个类：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">datetime.date：表示日期的类。常用的属性有year, month, day；</span><br><span class="line">datetime.time：表示时间的类。常用的属性有hour, minute, second, microsecond；</span><br><span class="line">datetime.datetime：表示日期时间。</span><br><span class="line">datetime.timedelta：表示时间间隔，即两个时间点之间的长度。</span><br><span class="line">datetime.tzinfo：与时区有关的相关信息。（这里不详细充分讨论该类，感兴趣的童鞋可以参考python手册）</span><br></pre></td></tr></table></figure>
<p>今天我们讲讲datetime的基本的几种方法：</p>
<p>####1. 获取当前datetime</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> datetime</span><br><span class="line">print(datetime.datetime.now())</span><br><span class="line"></span><br><span class="line"><span class="comment">#2017-11-17 14:42:01.175940</span></span><br></pre></td></tr></table></figure>
<p>####2. 获取当天date</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> datetime</span><br><span class="line">print(datetime.date.today())</span><br><span class="line"></span><br><span class="line"><span class="comment">#2017-11-17</span></span><br></pre></td></tr></table></figure>
<p>####3. 获取明天/前N天 /或者昨天<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> datetime</span><br><span class="line">print(datetime.date.today())</span><br><span class="line">print(datetime.date.today() + datetime.timedelta(days=<span class="number">1</span>))</span><br><span class="line">print(datetime.date.today() + datetime.timedelta(days=<span class="number">-1</span>))</span><br><span class="line">print(datetime.date.today() - datetime.timedelta(days=<span class="number">1</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment">#2017-11-17</span></span><br><span class="line"><span class="comment">#2017-11-18</span></span><br><span class="line"><span class="comment">#2017-11-16</span></span><br></pre></td></tr></table></figure></p>
<p>####4、获取当天开始和结束时间(00:00:00 23:59:59)<br>datetime.combine(date, time)：根据date和time，创建一个datetime对象；</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> datetime</span><br><span class="line"></span><br><span class="line">print(datetime.datetime.combine(datetime.date.today(), datetime.time.min))</span><br><span class="line">print(datetime.datetime.combine(datetime.date.today(), datetime.time.max))</span><br><span class="line">print((str(datetime.datetime.combine(datetime.date.today(), datetime.time.max)).split(<span class="string">'.'</span>))[<span class="number">0</span>])  <span class="comment">#转换成str类型的舍去毫秒值</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#2017-11-17 00:00:00</span></span><br><span class="line"><span class="comment">#2017-11-17 23:59:59.999999</span></span><br><span class="line"><span class="comment">#2017-11-17 23:59:59</span></span><br></pre></td></tr></table></figure>
<p>####5. 获取两个datetime的时间差</p>
<p>total_seconds()把两时间集转换成总秒数</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">print((datetime.datetime(<span class="number">2018</span>,<span class="number">1</span>,<span class="number">13</span>,<span class="number">12</span>,<span class="number">0</span>,<span class="number">0</span>) - datetime.datetime.now()).total_seconds())</span><br><span class="line"></span><br><span class="line"><span class="comment">#4912373.883664</span></span><br></pre></td></tr></table></figure>
<p>####6.关系转换 </p>
<p>#####datetime =&gt; string </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> datetime</span><br><span class="line"></span><br><span class="line">date_to_str = datetime.datetime.now().strftime(<span class="string">"%Y-%m-%d %H:%M:%S"</span>)</span><br><span class="line"></span><br><span class="line">print(date_to_str,type(date_to_str))</span><br><span class="line"></span><br><span class="line"><span class="comment">#22014-12-31 18:20:10 &lt;class 'datetime.datetime'&gt;</span></span><br></pre></td></tr></table></figure>
<p>#####string =&gt; datetime</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> datetime</span><br><span class="line"></span><br><span class="line">str_to_date = datetime.datetime.strptime(<span class="string">"2014-12-31 18:20:10"</span>, <span class="string">"%Y-%m-%d %H:%M:%S"</span>)</span><br><span class="line"></span><br><span class="line">print(str_to_date,type(str_to_date))</span><br><span class="line"></span><br><span class="line"><span class="comment">#2014-12-31 18:20:10 &lt;class 'datetime.datetime'&gt;</span></span><br></pre></td></tr></table></figure>
<p>#####datetime =&gt; timetuple (time.struct_time格式)</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> datetime</span><br><span class="line"></span><br><span class="line">date_to_timetuple = datetime.datetime.now().timetuple()</span><br><span class="line"></span><br><span class="line">print(date_to_timetuple,type(date_to_timetuple))</span><br><span class="line"></span><br><span class="line"><span class="comment">#time.struct_time(tm_year=2017, tm_mon=11, tm_mday=17, tm_hour=16, tm_min=31, tm_sec=2, tm_wday=4, tm_yday=321, tm_isdst=-1) &lt;class 'time.struct_time'&gt;</span></span><br></pre></td></tr></table></figure>
<p>#####timetuple  =&gt; datetime</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> datetime,time</span><br><span class="line">now = time.localtime() <span class="comment">#struct_time类型</span></span><br><span class="line">print(now)</span><br><span class="line">now = time.strftime(<span class="string">"%F %T"</span>,ls)  <span class="comment">#先转成timestamp时间格式,转成字符串</span></span><br><span class="line">print(now,type(now))</span><br><span class="line">now = datetime.datetime.strptime(now, <span class="string">"%Y-%m-%d %H:%M:%S"</span>)</span><br><span class="line">print(now,type(now))</span><br></pre></td></tr></table></figure>
<p>#####datetime =&gt; timestamp </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> datetime,time</span><br><span class="line"></span><br><span class="line">now = datetime.datetime.now()</span><br><span class="line">timestamp = time.mktime(now.timetuple())</span><br><span class="line">print(timestamp,type(timestamp))</span><br><span class="line"></span><br><span class="line"><span class="comment">#1510908711.0 &lt;class 'float'&gt;</span></span><br></pre></td></tr></table></figure>
<p>#####timestamp =&gt; datetime</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> datetime</span><br><span class="line"></span><br><span class="line">datetime = datetime.datetime.fromtimestamp(<span class="number">1421077403.0</span>)</span><br><span class="line">print(datetime,type(datetime))</span><br><span class="line"></span><br><span class="line"><span class="comment">#2015-01-12 23:43:23 &lt;class 'datetime.datetime'&gt;</span></span><br></pre></td></tr></table></figure>
<p>####7. 获取本周/本月/上月最后一天 和第一天</p>
<p>本周</p>
<p>date.weekday()：返回weekday，如果是星期一，返回0；如果是星期2，返回1，以此类推；</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> datetime</span><br><span class="line"></span><br><span class="line">today = datetime.date.today()</span><br><span class="line">print(today)</span><br><span class="line"></span><br><span class="line">one = today - datetime.timedelta(today.weekday())</span><br><span class="line">print(one)  <span class="comment">#本周第一天</span></span><br><span class="line"></span><br><span class="line">two = today + datetime.timedelta(<span class="number">6</span>-today.weekday())</span><br><span class="line">print(two)  <span class="comment">#本周最后一天</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#2017-11-17</span></span><br><span class="line"><span class="comment">#2017-11-13</span></span><br><span class="line"><span class="comment">#2017-11-19</span></span><br></pre></td></tr></table></figure>
<p>本月</p>
<p>cale是python的日历模块</p>
<p>calendar.monthrange(year,month) </p>
<p>返回两个整数。第一个是该月的星期几的日期码，第二个是该月的日期码。日从0（星期一）到6（星期日）;月从1到12。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> calendar,datetime</span><br><span class="line">today = datetime.date.today()</span><br><span class="line">_,last_day_num = calendar.monthrange(today.year,today.month)</span><br><span class="line">print(last_day_num)</span><br><span class="line">last_day = datetime.date(today.year, today.month,last_day_num)</span><br><span class="line">print(last_day)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#_,取可迭代序列的最后一个值，但是不能取中间的，舍弃如果是三个那么就是_,_,</span></span><br><span class="line"><span class="comment">#30</span></span><br><span class="line"><span class="comment">#2017-11-30</span></span><br></pre></td></tr></table></figure>
<p>获取上个月的最后一天</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> datetime</span><br><span class="line"></span><br><span class="line">today = datetime.date.today()</span><br><span class="line">print(today)</span><br><span class="line">first = datetime.date(day=<span class="number">1</span>, month=today.month, year=today.year)</span><br><span class="line">print(first)</span><br><span class="line">lastMonth = first - datetime.timedelta(days=<span class="number">1</span>)</span><br><span class="line">print(lastMonth)</span><br><span class="line"></span><br><span class="line"><span class="comment">#2017-11-17</span></span><br><span class="line"><span class="comment">#2017-11-01</span></span><br><span class="line"><span class="comment">#2017-10-31</span></span><br></pre></td></tr></table></figure>
<p>上个月的最好一天（跨年）</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> datetime,time</span><br><span class="line"></span><br><span class="line">today = datetime.datetime.strptime(<span class="string">'2017-01-01'</span>,<span class="string">"%Y-%m-%d"</span>)</span><br><span class="line">print(today)</span><br><span class="line">first = datetime.date(day=<span class="number">1</span>, month=today.month, year=today.year)</span><br><span class="line">print(first)</span><br><span class="line">lastMonth = first - datetime.timedelta(days=<span class="number">1</span>)</span><br><span class="line">print(lastMonth)</span><br><span class="line"></span><br><span class="line"><span class="comment">#2017-01-01 00:00:00</span></span><br><span class="line"><span class="comment">#2017-01-01</span></span><br><span class="line"><span class="comment">#2016-12-31</span></span><br></pre></td></tr></table></figure>
<p>###【3】时间的书籍：calendar（日历模块）<br>——————</p>
<p>####1、日历<br>ccalendar(year,w=2,l=1,c=6)<br>返回一个多行字符串格式的year年年历，3个月一行，间隔距离为c。 每日宽度间隔为w字符。每行长度为21<em> W+18+2</em> C。l是每星期行数。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> calendar</span><br><span class="line">print(calendar.calendar(<span class="number">2017</span>))</span><br></pre></td></tr></table></figure>
<p>####2、获取每周的开始值<br>firstweekday()<br>返回当前每周起始日期的设置。默认情况下，首次载入caendar模块时返回0，即星期一。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> calendar</span><br><span class="line">print(calendar.firstweekday())</span><br><span class="line"></span><br><span class="line"><span class="comment">#0</span></span><br></pre></td></tr></table></figure>
<p>####3、判断是否是润年<br>calendar.isleap(year)<br>是闰年返回True，否则为false。</p>
<font color="red">注意：只能是整数，否则会报错</font>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> calendar</span><br><span class="line">print(calendar.isleap(<span class="number">2020</span>))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#True</span></span><br></pre></td></tr></table></figure>
<p>####4、返回在两个年数时间轴之间的闰年总数。<br>calendar.leapdays(y1,y2)<br>返回在Y1，Y2两年之间的闰年总数。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> calendar</span><br><span class="line">print(calendar.leapdays(<span class="number">-1000</span>,<span class="number">2017</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment">#732</span></span><br></pre></td></tr></table></figure>
<p>####5、返回指定月的日历</p>
<p>calendar.month(year,month,w=2,l=1) </p>
<p>返回一个多行字符串格式的year年month月日历，两行标题，一周一行。每日宽度间隔为w字符。每行的长度为7* w+6。l是每星期的行数。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> calendar</span><br><span class="line">print(calendar.month(<span class="number">2017</span>,<span class="number">11</span>))</span><br></pre></td></tr></table></figure>
<p>####6、返回指定月的瑞列表</p>
<p>calendar.monthcalendar(year,month) </p>
<p>返回一个整数的单层嵌套列表。每个子列表装载代表一个星期的整数。Year年month月外的日期都设为0;范围内的日子都由该月第几日表示，从1开始。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> calendar</span><br><span class="line">print(calendar.monthcalendar(<span class="number">2017</span>,<span class="number">11</span>) )</span><br><span class="line"></span><br><span class="line"><span class="comment">#[[0, 0, 1, 2, 3, 4, 5], [6, 7, 8, 9, 10, 11, 12], [13, 14, 15, 16, 17, 18, 19], [20, 21, 22, 23, 24, 25, 26], [27, 28, 29, 30, 0, 0, 0]]</span></span><br></pre></td></tr></table></figure>
<p>####7、返回指定月的最后一天的星期码和日期码</p>
<p>calendar.monthrange(year,month) </p>
<p>返回一个元祖。第一个是该月的星期几的日期码，第二个是该月的最后一天日期码。日从0（星期一）到6（星期日）;月从1到12。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> calendar</span><br><span class="line">time1 = calendar.monthrange(<span class="number">2017</span>,<span class="number">11</span>)</span><br><span class="line">print(time1,type(time1))</span><br><span class="line"></span><br><span class="line"><span class="comment">#(2, 30) &lt;class 'tuple'&gt;</span></span><br></pre></td></tr></table></figure>
<p>####8、返回指定日期的星期码</p>
<p>calendar.weekday(year,month,day) </p>
<p>返回给定日期的日期码。0（星期一）到6（星期日）。月份为 1（一月） 到 12（12月）。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> calendar</span><br><span class="line">print(calendar.weekday(<span class="number">2017</span>,<span class="number">11</span>,<span class="number">17</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment">#4</span></span><br></pre></td></tr></table></figure>
<p>####9、设置一周里那一天作为第一天</p>
<p>calendar.setfirstweekday(weekday) </p>
<p>设置每周的起始日期码。0（星期一）到6（星期日）。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> calendar</span><br><span class="line">print(calendar.firstweekday())</span><br><span class="line">calendar.setfirstweekday(calendar.SUNDAY)</span><br><span class="line">print(calendar.firstweekday())</span><br><span class="line"></span><br><span class="line"><span class="comment">#0</span></span><br><span class="line"><span class="comment">#6</span></span><br></pre></td></tr></table></figure>
<p>####10、将tupletime转成时间戳</p>
<p>calendar.timegm(tupletime) </p>
<p>和time.gmtime相反：接受一个时间元组形式，返回该时刻的时间辍（1970纪元后经过的浮点秒数）。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> calendar,time</span><br><span class="line"></span><br><span class="line">now = time.localtime()</span><br><span class="line">date = calendar.timegm(now)</span><br><span class="line">print(date)</span><br><span class="line"></span><br><span class="line"><span class="comment">#1510940959</span></span><br></pre></td></tr></table></figure></image></image>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://jyue0812.github.io/2018/05/21/python基础8/" data-id="cjhfjx3em000kw4qxpau4rw3d" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-python基础7" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog/2018/05/21/python基础7/" class="article-date">
  <time datetime="2018-05-21T01:01:24.691Z" itemprop="datePublished">2018-05-21</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>#Lesson 7</p>
<hr>
<p>##第十章</p>
<p>###【3】装饰器和生成器</p>
<p>####生成器<br>我们知道通过列表生成式，我们可以直接创建列表。但是了会受到内存的限制，列表容量肯定是受限制的。而且，创建一个包含100元个元素的列表，不仅占用内存空间，如果我们仅仅需要访问前面几个元素，那后面绝大多素元素占用的空间白白浪费了。</p>
<p>所以，如果列表元素可以按照某种算法推算出来的话，那我们是否可以在循环的过程中不断推算出后续的元素呢？这样就不必创建完整的list，从而节约大量的空间。在python中，这一种一边循环一边计算的的机制，称为生成器（generator）。</p>
<p>第一类：生成器函数：还是使用 def 定义函数，但是，使用yield而不是return语句返回结果。yield语句一次返回一个结果，在每个结果中间，挂起函数的状态，以便下次从它离开的地方继续执行。</p>
<p>如下案例加以说明：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 使用next()生成斐波那契数列</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">Fib</span><span class="params">(max)</span>:</span></span><br><span class="line">    n, a, b = <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span></span><br><span class="line">    <span class="keyword">while</span> n &lt; max:</span><br><span class="line">        <span class="keyword">yield</span> b</span><br><span class="line">        a, b = b, a + b</span><br><span class="line">        n = n + <span class="number">1</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">'亲！没有数据了...'</span></span><br><span class="line"><span class="comment"># 调用方法，生成出10个数来</span></span><br><span class="line">f=Fib(<span class="number">10</span>)</span><br><span class="line"><span class="comment"># 使用一个循环捕获最后return 返回的值，保存在异常StopIteration的value中</span></span><br><span class="line">list1 = []</span><br><span class="line"><span class="keyword">while</span>  <span class="keyword">True</span>:</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        x = next(f)</span><br><span class="line">        list1.append(x)</span><br><span class="line">    <span class="keyword">except</span> StopIteration <span class="keyword">as</span> e:</span><br><span class="line">        print(<span class="string">"生成器最后的返回值是："</span>,e.value)</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line">print(list1)</span><br></pre></td></tr></table></figure>
<p>第二类：生成器表达式：类似于列表推导，只不过是把一对大括号[]变换为一对小括号()。但是，生成器表达式是按需产生一个生成器结果对象，要想拿到每一个元素，就需要循环遍历。</p>
<p>如下案例加以说明：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">generator1 = [ i*i <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">10</span>)]</span><br><span class="line">generator2 = ( i*i <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">10</span>))</span><br><span class="line">print(generator1)</span><br><span class="line">print(generator2)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> generator2:</span><br><span class="line">	print(i)</span><br><span class="line"></span><br><span class="line"><span class="comment">#[0, 1, 4, 9, 16, 25, 36, 49, 64, 81]</span></span><br><span class="line"><span class="comment">#&lt;generator object &lt;genexpr&gt; at 0x10452a0a0&gt;</span></span><br></pre></td></tr></table></figure>
<p>####装饰器<br>内衣可以遮羞，但是到了寒冷的季节它无法抵御严寒，于是聪明的人类发明了棉衣棉裤，给我们提供了保暖的功效，装饰器就像棉衣棉裤一样，在不影响内衣的作用下，还能给我们提供另一种功效.</p>
<p>概念：是一个闭包，把一个函数当做参数,返回一个替代版的函数，本质上就是一个返回函数的函数</p>
<p>简单的装饰器</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#简单的装饰器</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">func1</span><span class="params">()</span>:</span></span><br><span class="line">    print(<span class="string">"上海好啊！！！"</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">outer</span><span class="params">(func)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">inner</span><span class="params">()</span>:</span></span><br><span class="line">        print(<span class="string">"*******************"</span>)</span><br><span class="line">        func()</span><br><span class="line">    <span class="keyword">return</span> inner</span><br><span class="line"><span class="comment">#f是函数func1的加强版本</span></span><br><span class="line">f = outer(func1)()</span><br></pre></td></tr></table></figure>
<p>复杂一点的装饰器</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">outer</span><span class="params">(func)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">inner</span><span class="params">(age)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> age &lt; <span class="number">0</span>:</span><br><span class="line">            age = <span class="number">0</span></span><br><span class="line">        func(age)</span><br><span class="line">    <span class="keyword">return</span> inner</span><br><span class="line"></span><br><span class="line"><span class="comment">#使用@符号将装饰器应用到函数</span></span><br><span class="line"><span class="comment">#@python2.4支持使用@符号</span></span><br><span class="line"><span class="meta">@outer   #相当于say = outer(say)</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">say</span><span class="params">(age)</span>:</span></span><br><span class="line">    print(<span class="string">"he is %d years old"</span> % (age))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">say(<span class="number">-10</span>)</span><br></pre></td></tr></table></figure>
<p>通用一点的装饰器</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">outer</span><span class="params">(func)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">inner</span><span class="params">(*args, **kwargs)</span>:</span></span><br><span class="line">        <span class="comment">#添加修改的功能</span></span><br><span class="line">        print(<span class="string">"&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;"</span>)</span><br><span class="line">        <span class="keyword">return</span> func(*args, **kwargs)</span><br><span class="line">    <span class="keyword">return</span> inner</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@outer #say = outer(say)</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">say</span><span class="params">(name, age)</span>:</span> <span class="comment">#函数的参数力理论上是无限制的，但实际上最好不要超过6、7个</span></span><br><span class="line">    print(<span class="string">"my name is %s, I am %d years old"</span> % (name, age))</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"aaaa"</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">say(<span class="string">"tom"</span>, <span class="number">18</span>)</span><br></pre></td></tr></table></figure>
<p>###偏函数<br>functools，用于高阶函数：指那些作用于函数或者返回其它函数的函数，通常只要是可以被当做函数调用的对象就是这个模块的目标。</p>
<p>在Python 2.7 中具备如下方法，</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">cmp_to_key，将一个比较函数转换关键字函数；</span><br><span class="line"></span><br><span class="line">partial，针对函数起作用，并且是部分的；</span><br><span class="line"></span><br><span class="line">reduce，与python内置的reduce函数功能一样；</span><br><span class="line"></span><br><span class="line">total_ordering，在类装饰器中按照缺失顺序，填充方法；</span><br><span class="line"></span><br><span class="line">update_wrapper，更新一个包裹（wrapper）函数，使其看起来更像被包裹（wrapped）的函数；</span><br><span class="line"></span><br><span class="line">wraps，可用作一个装饰器，简化调用update_wrapper的过程；</span><br></pre></td></tr></table></figure>
<p>偏函数的实现：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> functools</span><br><span class="line"></span><br><span class="line">print(int(<span class="string">"1010"</span>, base = <span class="number">2</span>)) <span class="comment">#设置成2进制</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">int2</span><span class="params">(str, base = <span class="number">2</span>)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> int(str, base)</span><br><span class="line">print(int2(<span class="string">"1011"</span>))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#partial把一个参数固定住，形成一个新的函数</span></span><br><span class="line">int3 = functools.partial(int, base = <span class="number">2</span>)</span><br><span class="line">print(int3(<span class="string">"111"</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment">#那么现在int3默认就是返回2进制的</span></span><br></pre></td></tr></table></figure>
<p>##第十一章</p>
<hr>
<p>###【1】你不可能总是对的</p>
<p>我们是人，不是神，所以我们经常会犯错，就算你是个经验丰富的程序员，也不能保证你写的代码百分之百的没有问题。</p>
<p>另外作为一个合格的程序员，再编程的时候你要记住一点，就是永远都不要相信你的用户。要把他们想象成熊孩子，把他们想象成黑客，这样你才能写出安全稳定的程序。</p>
<p>我们看例子：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">var = float(input(<span class="string">'请输入一个数字:'</span>))</span><br><span class="line">print(var)</span><br><span class="line"></span><br><span class="line"><span class="comment">#请输入一个数字:q</span></span><br><span class="line"><span class="comment">#ValueError: could not convert string to float: 'q'</span></span><br></pre></td></tr></table></figure>
<p>上面这个例子就报错了ValueError异常，那么python会抛出那些异常了</p>
<p><image src="images/错误代码1.png" width="500"></image></p>
<p><image src="images/错误代码2.png" width="500"></image></p>
<image src="images/错误代码3.png" width="500">

<p>####1、AssertionError:断言语句(assert)失败</p>
<p>assert 关键字 在前面的章节里面讲过了，在测试程序的时候使用</p>
<p>它在条件不成立的情况下抛出 AssertionError</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">var = float(input(<span class="string">'请输入一个数字'</span>))</span><br><span class="line"><span class="keyword">assert</span> var&lt;<span class="number">0</span></span><br><span class="line">print(var)</span><br><span class="line"></span><br><span class="line"><span class="comment">#请输入一个数字100</span></span><br><span class="line"><span class="comment">#AssertionError</span></span><br></pre></td></tr></table></figure>
<p>####2、AttributeError:尝试访问位置的对象属性</p>
<p>当试图访问的对象属性不存在时抛出异常：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">list1 = []</span><br><span class="line">list1.shanghai</span><br><span class="line"></span><br><span class="line"><span class="comment">#AttributeError: 'list' object has no attribute 'china'</span></span><br></pre></td></tr></table></figure>
<p>####3、IndexError:索引超出范围</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">list1 = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line">list1[<span class="number">3</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">#IndexError: list index out of range</span></span><br></pre></td></tr></table></figure>
<p>####4、KeyError:字典中没有这个键</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">list1 = &#123;<span class="number">1</span>:<span class="number">2</span>,<span class="number">3</span>:<span class="number">4</span>&#125;</span><br><span class="line">list1[<span class="number">6</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">#KeyError: 6</span></span><br></pre></td></tr></table></figure>
<p>####5、TypeError:不同类型间的无效操作</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="number">1</span> + <span class="string">'1'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#TypeError: unsupported operand type(s) for +: 'int' and 'str'</span></span><br></pre></td></tr></table></figure>
<p>####ZeroDivsionError:除数为零</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="number">5</span> / <span class="number">0</span></span><br><span class="line"></span><br><span class="line">ZeroDivisionError: division by zero</span><br></pre></td></tr></table></figure>
<p>###【2】try-except语句</p>
<p>格式如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">	检测范围</span><br><span class="line"><span class="keyword">except</span> Exception [<span class="keyword">as</span> reason]:</span><br><span class="line">	出现异常的代码</span><br></pre></td></tr></table></figure>
<p>举个例子：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    var = int(input(<span class="string">'请输入一个数字：'</span>))</span><br><span class="line">    print(var)</span><br><span class="line"><span class="keyword">except</span> ValueError:</span><br><span class="line">    print(<span class="string">'输入错误'</span>)</span><br><span class="line">    </span><br><span class="line"><span class="comment">#请输入一个数字：q</span></span><br><span class="line"><span class="comment">#输入错误   </span></span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line"><span class="comment">#当然也可以这样写，错误信息会更加准确    </span></span><br><span class="line"><span class="comment">#except ValueError as reason:</span></span><br><span class="line"><span class="comment">#    print('输入错误,错误原因:'+ str(reason))</span></span><br></pre></td></tr></table></figure>
<p>####针对不同的异常设置多个except</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    var = int(input(<span class="string">'请输入一个数字：'</span>))</span><br><span class="line">    rel = var + <span class="string">'1'</span></span><br><span class="line">    print(rel)</span><br><span class="line"><span class="keyword">except</span> ValueError <span class="keyword">as</span> reason:</span><br><span class="line">    print(<span class="string">'输入错误,错误原因:'</span>+ str(reason))</span><br><span class="line"><span class="keyword">except</span> TypeError <span class="keyword">as</span> reason:</span><br><span class="line">    print(<span class="string">'输入错误,错误原因:'</span> + str(reason))</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line"><span class="comment">#请输入一个数字：1</span></span><br><span class="line"><span class="comment">#输入错误,错误原因:unsupported operand type(s) for +: 'int' and 'str'</span></span><br></pre></td></tr></table></figure>
<p>####捕获所有异常</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    var = int(input(<span class="string">'请输入一个数字：'</span>))</span><br><span class="line">    rel = var + <span class="string">'1'</span></span><br><span class="line">    print(rel)</span><br><span class="line"><span class="keyword">except</span>:</span><br><span class="line">    print(<span class="string">'报错了'</span>)</span><br><span class="line">    </span><br><span class="line"><span class="comment">#请输入一个数字：q</span></span><br><span class="line"><span class="comment">#报错了</span></span><br></pre></td></tr></table></figure>
<p>###【3】try-finally语句</p>
<p>这里我们使用打开文件作为例子，因为文件打开了不管报不报错都需要关闭。</p>
<p>文件操作在后续内容会讲到</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    f = open(<span class="string">'我是一个不存在的文件.txt'</span>) <span class="comment">#打开文件</span></span><br><span class="line">    print(f.read())</span><br><span class="line"><span class="keyword">except</span>:</span><br><span class="line">    print(<span class="string">'出错了'</span>)  <span class="comment">#在没有finally的时候报错了就会被终止</span></span><br><span class="line"><span class="keyword">finally</span>:</span><br><span class="line">    <span class="comment">#f.close()   #关闭文件,这里给大家看的，注释去掉会报错</span></span><br><span class="line">    print(<span class="string">'关闭文件成功'</span>)</span><br></pre></td></tr></table></figure>
<p>在try没有报错的情况下，会跳到finally里面执行代码。</p>
<p>try报错了，会执行except，在执行finally。</p>
<p>finally就是确保无论如何都要被执行的。</p>
<p>###【4】raise语句</p>
<p>它的作用是随时随地抛出一个异常，可以带参数。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">raise</span> ZeroDivisionError</span><br><span class="line"></span><br><span class="line"><span class="comment">#raise TypeError('类型错误')</span></span><br></pre></td></tr></table></figure>
<p>###【5】丰富的else语句</p>
<p>这里的else说的不是if-else那个玩意。</p>
<p>不过if-else也可以抛出异常,我们已经玩过了，比如说是不是大于某个数。</p>
<p>例子：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    int(<span class="string">'abc'</span>)</span><br><span class="line"><span class="keyword">except</span> ValueError <span class="keyword">as</span> reason:</span><br><span class="line">    print(<span class="string">'出错了，错误原因是：'</span> + str(reason))</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    print(<span class="string">'没有问题'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#出错了，错误原因是：invalid literal for int() with base 10: 'abc'</span></span><br></pre></td></tr></table></figure>
<p>上面的这个例子else中代码没有执行，因为else是在try中没有问题的情况下执行的。</p>
<p>###【6】简洁的with语句<br>我们上面讲过了finally，在文件读取的时候可以用它来关闭文件，想想又要打开又要关闭，太烦人，那么我们的<code>with</code>就可以上场了，在你忘记关闭文件的时候它会自动帮你关上。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="keyword">with</span> open(<span class="string">'我是一个不存在的文件.txt'</span>) <span class="keyword">as</span> f:</span><br><span class="line">        print(f.read())</span><br><span class="line"><span class="keyword">except</span> OSError <span class="keyword">as</span> reason:</span><br><span class="line">    print(<span class="string">'挂啦！原因是:'</span> + str(reason))</span><br></pre></td></tr></table></figure>
<p>这样写是不是方便多了，也不怕忘记关闭文件。</p>
<p>##第十二章</p>
<hr>
<p>###【1】文件恒久远，一个永流传<br>大多数的程序都是遵循，输入-&gt;处理-&gt;输出的模型，首先接受输入数据，然后按照要求进行处理，最后输出结果。可能以后你的需求就不止这些了，你可能需要你的程序可以去自动的分析系统的日志，然后分析结果在保存作为一个新的日志，这时候就需要用到文件了。</p>
<p>或者说你在IDLE中写程序，突然一个不对劲，电脑蓝屏了，在开机，你的代码都没了，但是在pycharm中为什么就不会了，因为必须要新建一个文件，然后你写的时候自动存储在文件里，文件是写在硬盘上的。</p>
<p>在你编写代码的时候，操作系统为了更快的做出响应，会把当前的数据全部保存在内存中，因为内存和CPU之间的数据传输是最快的，比硬盘和CPU快多了。但是内存的不足就是一断电就玩完了。</p>
<p>文件的格式我们也见过很多，windows 的.exe .txt还有我们python 的.py等等，这些都是文件。</p>
<p>####字符串类型和字节类型</p>
<p>字符串类型向字节类型转化称之为编码  encode</p>
<p>字节类型向字符串类型转化称之为解码  decode</p>
<font color="red">注意编解码格式一定要保持一致，如果是程序会报错，如果是编辑器查看，直接乱码</font>

<p>常用的字符集都是什么意思</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">ascii  </span><br><span class="line">	这玩意就是美国搞的一套标准，用的是一个字节，用了其中的<span class="number">0</span><span class="number">-127</span>表示了所有的老外用的东西</span><br><span class="line">ansi </span><br><span class="line">	这玩意用两个字节，叫做扩展的ascii码，<span class="number">128</span><span class="number">-0xffff</span></span><br><span class="line">gbk  </span><br><span class="line">	扩展的国标，在gb2312的基础上又多了好多的繁体字xxx，兼容gb2312 </span><br><span class="line">gb2312 </span><br><span class="line">	这玩意是中国搞了一套自己编解码（韩国搞了一套自己的、日本也搞了一套自己的）</span><br><span class="line">	对应的中国的ansi </span><br><span class="line">utf<span class="number">-8</span>   </span><br><span class="line">	互联网兴起了，迫切需要统一的编码，utf<span class="number">-8</span>就在unicode的基础上规定了存储和读取的方式，他存储的时候是变化的，如果存储英文字母，其使用的是<span class="number">1</span>个字节，如果用来存储汉字，占用<span class="number">3</span>个字节</span><br><span class="line">unicode</span><br><span class="line">	是一套国际标准，称之为万国码，也是两个字节</span><br><span class="line">	并没有真正的执行起来，而且也没有规定怎么存储和读取</span><br></pre></td></tr></table></figure>
<font color="red">注意：以后你要用的话，应该都是utf-8无bom的格式，如果碰到了gbk，你要自己会转化相应的格式</font>

<p>###【2】打开文件</p>
<p>在python中，使用open()这个函数来打开文件返回文件对象：</p>
<p>open(file,mode = ‘r’,buffering = -1,encoding = None,errors = None,newline = None,closefd = True,opener = None)</p>
<p>open()这个函数有很多参数，但作为初学者来说，只需要知道第一个和第二个参数就可以了。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">file：              要打开的文件名，需加路径(除非是在当前目录)。唯一强制参数</span><br><span class="line">mode：              文件打开的模式</span><br><span class="line">buffering：         设置buffer（取值为<span class="number">0</span>,<span class="number">1</span>,&gt;<span class="number">1</span>）</span><br><span class="line">encoding：          返回数据的编码（一般为UTF8或GBK）</span><br><span class="line">errors：            报错级别（一般为strict，ignore）</span><br><span class="line">newline：           用于区分换行符(只对文本模式有效，可以取的值有<span class="keyword">None</span>,<span class="string">'\n'</span>,<span class="string">'\r'</span>,<span class="string">''</span>,<span class="string">'\r\n'</span>)</span><br><span class="line">closefd：           传入的file参数类型（缺省为<span class="keyword">True</span>）</span><br></pre></td></tr></table></figure>
<p>mode对照表：</p>
<table>
<thead>
<tr>
<th>打开模式</th>
<th>执行操作</th>
</tr>
</thead>
<tbody>
<tr>
<td>r</td>
<td>以只读方式打开文件。文件的指针将会放在文件的开头。这是默认模式。</td>
</tr>
<tr>
<td>rb</td>
<td>以二进制格式打开一个文件用于只读。文件指针将会放在文件的开头。这是默认模式。</td>
</tr>
<tr>
<td>r+</td>
<td>打开一个文件用于读写。文件指针将会放在文件的开头。</td>
</tr>
<tr>
<td>rb+</td>
<td>以二进制格式打开一个文件用于读写。文件指针将会放在文件的开头。</td>
</tr>
<tr>
<td>w</td>
<td>打开一个文件只用于写入。如果该文件已存在则将其覆盖。如果该文件不存在，创建新文件。</td>
</tr>
<tr>
<td>wb</td>
<td>以二进制格式打开一个文件只用于写入。如果该文件已存在则将其覆盖。如果该文件不存在，创建新文件。</td>
</tr>
<tr>
<td>w+</td>
<td>打开一个文件用于读写。如果该文件已存在则将其覆盖。如果该文件不存在，创建新文件。</td>
</tr>
<tr>
<td>wb+</td>
<td>以二进制格式打开一个文件用于读写。如果该文件已存在则将其覆盖。如果该文件不存在，创建新文件。</td>
</tr>
<tr>
<td>a</td>
<td>打开一个文件用于追加。如果该文件已存在，文件指针将会放在文件的结尾。也就是说，新的内容将会被写入到已有内容之后。如果该文件不存在，创建新文件进行写入。</td>
</tr>
<tr>
<td>ab</td>
<td>以二进制格式打开一个文件用于追加。如果该文件已存在，文件指针将会放在文件的结尾。也就是说，新的内容将会被写入到已有内容之后。如果该文件不存在，创建新文件进行写入。</td>
</tr>
<tr>
<td>a+</td>
<td>打开一个文件用于读写。如果该文件已存在，文件指针将会放在文件的结尾。文件打开时会是追加模式。如果该文件不存在，创建新文件用于读写。</td>
</tr>
<tr>
<td>ab+</td>
<td>以二进制格式打开一个文件用于追加。如果该文件已存在，文件指针将会放在文件的结尾。如果该文件不存在，创建新文件用于读写。</td>
</tr>
</tbody>
</table>
<p>例子：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">path = <span class="string">r"C:\Users\xlg\Desktop\Python-1704\day07\5-文件读写\file1.txt"</span></span><br><span class="line"><span class="comment">#ignore  忽略错误</span></span><br><span class="line"><span class="comment">#f = open(path, "r", encoding="utf-8", errors="ignore")</span></span><br><span class="line">f = open(path, <span class="string">"r"</span>, encoding=<span class="string">"utf-8"</span>)</span><br></pre></td></tr></table></figure>
<p>###【3】文件对象的方法</p>
<p>打开文件并获取文件对象以后，就可以利用文件对象的一些方法对文件进行读取或修改等操作。</p>
<table>
<thead>
<tr>
<th>文件对象方法</th>
<th>执行操作</th>
</tr>
</thead>
<tbody>
<tr>
<td>close()</td>
<td>关闭文件</td>
</tr>
<tr>
<td>read(size =-1)</td>
<td>从文件读取size个字符，当未给定或者给定负值的时候，读取剩余的所有的字符，然后作为字符返回</td>
</tr>
<tr>
<td>reading()</td>
<td>从文件中读取一整行字符</td>
</tr>
<tr>
<td>write()</td>
<td>将字符串str写入文件</td>
</tr>
<tr>
<td>writelines(seq)</td>
<td>向文件写入字符串序列seq，seq应该是一个返回字符串的可迭代对象</td>
</tr>
<tr>
<td>seek(offset,from)</td>
<td>在文件中移入文件指针，从from(0代表文件起始位置，1代表当前位置，2代表文件末尾)偏移offset个字节</td>
</tr>
<tr>
<td>tell()</td>
<td>返回当前在文件中的位置</td>
</tr>
</tbody>
</table>
<p>###【4】文件的关闭</p>
<p>close()方法用于关闭文件。如果是C语言的话，我在这里一定会强调一万次关闭的，如果你不关闭的话，别人想要读写就会无法完成 。不关闭文件会导致（other）无法再次已写的方式打开，以前是连只读的方式都不行。而python拥有垃圾回收机制，会在文件对象的引用此计数降至零的时候自动关闭文件。</p>
<p>但是并不代表可以不关闭文件，如果你对文件进行写入操作的话，那么应该在完成写入之后关闭文件。因为python可能会缓存你写入的数据，如果中途发生类似断电之类的事故，那些缓存的数据根本就不会写入到文件中。所以，为了安全起见，要养成使用完文件后立即关闭的好习惯。</p>
<p>###【5】文件的读取和定位</p>
<p>文件的读取方法很多，可以使用文件对象read()和readline()方法，也可以直接list(f)或者直接使用迭代来读取。</p>
<p>read()方法是按字节来的去，如果不设置字节数，那么会全部读取。tell()方法会告诉你当前文件的指针位置。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">f = open(<span class="string">r'/Users/ruidong/PycharmProjects/project/demo.txt'</span>)</span><br><span class="line">print(f.read())</span><br><span class="line">print(f.tell())</span><br><span class="line">f.close()</span><br></pre></td></tr></table></figure>
<p>刚刚提到文件指针是个什么玩意？你可以认为它是一个书签，起到定位的作用。使用seek()方法可以调整文件指针的位置。seek（offset，from）方法有两个参数。</p>
<p>也就是文件读取了多少以后，会生成指针，只能向后读，不能再读取已度去过的，除非使用seek()重新调整指针。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">from</span>  表示从(<span class="number">0</span>代表当前文件起始位置，<span class="number">1</span>代表当前位置，<span class="number">2</span>代表文件末尾)偏移 offset字节。</span><br></pre></td></tr></table></figure>
<p>因此，将文件指针设置到文件起始位置，使用seek(0,0)即可：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">f = open(<span class="string">r'/Users/ruidong/PycharmProjects/project/demo.txt'</span>)</span><br><span class="line">print(f.read())</span><br><span class="line">print(f.tell())</span><br><span class="line">f.seek(<span class="number">0</span>,<span class="number">0</span>)</span><br><span class="line">print(<span class="string">'\n********************\n'</span>)</span><br><span class="line">print(f.read())</span><br><span class="line">f.close()</span><br></pre></td></tr></table></figure>
<p>readline()方法用于在文件中读取一整行，就是从文件指针的位置向后读取，直到遇到换行符(\n)结束。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">f = open(<span class="string">r'/Users/ruidong/PycharmProjects/project/demo.txt'</span>)</span><br><span class="line">print(f.readline())</span><br><span class="line">print(f.readline())</span><br><span class="line">f.close()</span><br></pre></td></tr></table></figure>
<p>此前介绍过列表强大，说什么都可以往里面放，这不，也可以把整个文件的内容放到列表中：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">f = open(<span class="string">r'/Users/ruidong/PycharmProjects/project/demo.txt'</span>)</span><br><span class="line">lines = list(f)</span><br><span class="line"><span class="keyword">for</span> each_line <span class="keyword">in</span> lines:</span><br><span class="line">    print(each_line)</span><br><span class="line">f.close()</span><br></pre></td></tr></table></figure>
<p>这样写是没有问题的，但是了感觉像是非要用酒精烧开水，水能烧的开，但是效率不高。文件本来就是可以迭代的。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">f = open(<span class="string">r'/Users/ruidong/PycharmProjects/project/demo.txt'</span>)</span><br><span class="line"><span class="keyword">for</span> each_line <span class="keyword">in</span> f:</span><br><span class="line">    print(each_line)</span><br><span class="line">f.close()</span><br></pre></td></tr></table></figure>
<p>###【6】文件的写入</p>
<p>如果需要写入文件，请确保之前的打开模式有‘w’或者‘a’或者多带上‘+’，否者在写入的时候回出错：</p>
<p>open 没有 ‘w’那些可写入的操作符或报错：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line">os.system(<span class="string">'touch wdemo.txt'</span>)  <span class="comment">#在当前文件夹下新建一个wdemo.txt文件</span></span><br><span class="line">f = open(<span class="string">r'/Users/ruidong/PycharmProjects/project/wdemo.txt'</span>)</span><br><span class="line">f.write(<span class="string">'这是一个神奇的地方'</span>)</span><br><span class="line">f.close()</span><br><span class="line"></span><br><span class="line"><span class="comment">#io.UnsupportedOperation: not writable</span></span><br></pre></td></tr></table></figure>
<p>使用‘r+’读写模式，但是要注意‘r+’或者是‘w’会把原来的文件内容给删除。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">f = open(<span class="string">r'/Users/ruidong/PycharmProjects/project/wdemo.txt'</span>,<span class="string">'r+'</span>)</span><br><span class="line">f.write(<span class="string">'这是一个神奇的地方'</span>)</span><br><span class="line">f.close()</span><br></pre></td></tr></table></figure>
<p>如果是追加的话，要不然会造成血淋淋的教训，那就要使用‘a’操作符打开：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">f = open(<span class="string">r'/Users/ruidong/PycharmProjects/project/wdemo.txt'</span>,<span class="string">'a+'</span>)</span><br><span class="line">f.write(<span class="string">'\n这是一个美丽的地方'</span>)</span><br><span class="line">f.close()</span><br></pre></td></tr></table></figure>
<p>将序列单行写入</p>
<p>writelines() 方法用于向文件中写入一序列的字符串。<br>这一序列字符串可以是由迭代对象产生的，如一个字符串列表。<br>换行需要制定换行符 \n。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">f = open(<span class="string">"wdemo.txt"</span>, <span class="string">"w"</span>)</span><br><span class="line"></span><br><span class="line">seq = [<span class="string">'千锋教育\n'</span>,<span class="string">'python'</span>]</span><br><span class="line">f.writelines(seq)</span><br></pre></td></tr></table></figure>
<p>####刷新缓冲区域</p>
<p>文件在写入的时候斌没有直接写入，而是在内存中，只有我们执行f.close()关闭文件以后，它才会写入。</p>
<p>如果想不关闭文件直接写入，那么使用f.flush(),它的作用是立即将内存上的数据写入硬盘。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">f = open(<span class="string">'wdemo.txt'</span>,<span class="string">'w'</span>)</span><br><span class="line">f.write(<span class="string">'niahoa'</span>)</span><br><span class="line">f.flush()</span><br></pre></td></tr></table></figure>
<p>###【7】一个文件案例</p>
<p>下面我们做个案例对record.txt文件进行分割，规则如下：</p>
<p>（1）将千锋吴彦祖的对话单独保存为boy_*.txt的文件(去掉‘千锋吴彦祖’)</p>
<p>（2）将千锋客服的对话单独保存为girl_*.txt的文件(去掉‘千锋吴彦祖’)</p>
<p>（3）文件中总共有三段对话，分别保存为boy_1（2、3）.txt、girl_1（2、3）.txt</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#record.txt</span></span><br><span class="line"></span><br><span class="line">千锋客服:吴彦祖，今天有客户问你有没有女朋友？</span><br><span class="line">千锋吴彦祖:咦？？</span><br><span class="line">千锋客服:我跟她说你有女朋友了！</span><br><span class="line">千锋吴彦祖:。。。。。。</span><br><span class="line">千锋客服:她让你分手后考虑下她！然后我说:<span class="string">"您要买个优盘，我就帮您留意下~"</span></span><br><span class="line">千锋吴彦祖:然后呢？</span><br><span class="line">千锋客服:她买了两个，说发一个货就好~</span><br><span class="line">千锋吴彦祖:呃。。。。。。你真牛！</span><br><span class="line">千锋客服:那是，谁让我是千锋最可爱的客服嘛~</span><br><span class="line">千锋吴彦祖:下次有人想调戏你我不阻止~</span><br><span class="line">千锋客服:滚！！！</span><br><span class="line">================================================================================</span><br><span class="line">千锋客服:千锋吴彦祖，有个好评很好笑哈。</span><br><span class="line">千锋吴彦祖:哦？</span><br><span class="line">千锋客服:<span class="string">"有了吴彦祖，以后妈妈再也不用担心我的学习了~"</span></span><br><span class="line">千锋吴彦祖:哈哈哈，我看到丫，我还发微博了呢~</span><br><span class="line">千锋客服:嗯嗯，我看了你的微博丫~</span><br><span class="line">千锋吴彦祖:哟西~</span><br><span class="line">千锋客服:那个有条回复“左手拿著彦祖，右手拿著打火機，哪裡不會點哪裡，so easy ^_^”</span><br><span class="line">千锋吴彦祖:T_T</span><br><span class="line">================================================================================</span><br><span class="line">千锋客服:千锋吴彦祖，今天一个会员想找你</span><br><span class="line">千锋吴彦祖:哦？什么事？</span><br><span class="line">千锋客服:他说你一个学生月薪已经超过<span class="number">12</span>k了！！</span><br><span class="line">千锋吴彦祖:哪里的？</span><br><span class="line">千锋客服:上海的</span><br><span class="line">千锋吴彦祖:那正常，哪家公司？</span><br><span class="line">千锋客服:他没说呀。</span><br><span class="line">千锋吴彦祖:哦</span><br><span class="line">千锋客服:老大，为什么我工资那么低啊？？是时候涨涨工资了！！</span><br><span class="line">千锋吴彦祖:啊，你说什么？我在外边呢，这里好吵吖。。。。。。</span><br><span class="line">千锋客服:滚！！！</span><br></pre></td></tr></table></figure>
<p>代码如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">#思路：</span></span><br><span class="line"><span class="comment">#我们首先知道我们要把三段对话分别分成boy_1、2、3和girl_1、2、3，一共是6个文件</span></span><br><span class="line"><span class="comment">#我没知道每段对话都是以'==='组成的</span></span><br><span class="line"><span class="comment">#我们列表的的写入需要用到writeline()</span></span><br><span class="line"><span class="comment">#我们的文件用完以后需要关闭</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">save_file</span><span class="params">(boy,girl,count)</span>:</span></span><br><span class="line">    file_name_boy = <span class="string">'boy'</span> + str(count) + <span class="string">'.txt'</span></span><br><span class="line">    file_name_girl = <span class="string">'girl'</span> + str(count) + <span class="string">'.txt'</span></span><br><span class="line">    boy_file = open(file_name_boy,<span class="string">'w'</span>)</span><br><span class="line">    girl_file = open(file_name_girl,<span class="string">'w'</span>)</span><br><span class="line">    boy_file.writelines(boy)</span><br><span class="line">    girl_file.writelines(girl)</span><br><span class="line">    boy_file.close()</span><br><span class="line">    girl_file.close()</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">split_file</span><span class="params">()</span>:</span></span><br><span class="line">    boy = []</span><br><span class="line">    girl = []</span><br><span class="line">    count = <span class="number">1</span></span><br><span class="line">    f = open(<span class="string">r'/Users/ruidong/PycharmProjects/project/record.txt'</span>)</span><br><span class="line">    <span class="keyword">for</span> eachLine <span class="keyword">in</span> f:</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> eachLine.startswith(<span class="string">'='</span>):</span><br><span class="line">            (role,line_spoken) = eachLine.split(<span class="string">':'</span>,<span class="number">1</span>)</span><br><span class="line">            <span class="keyword">if</span> role == <span class="string">"千锋吴彦祖"</span>:</span><br><span class="line">                boy.append(line_spoken)</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> role == <span class="string">"千锋客服"</span>:</span><br><span class="line">                girl.append(line_spoken)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            save_file(boy,girl,count)</span><br><span class="line">            boy = []</span><br><span class="line">            girl = []</span><br><span class="line">            count += <span class="number">1</span></span><br><span class="line">    save_file(boy, girl, count)</span><br><span class="line">    f.close()</span><br><span class="line"></span><br><span class="line">split_file()</span><br></pre></td></tr></table></figure>
</image>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://jyue0812.github.io/2018/05/21/python基础7/" data-id="cjhfjx3ek000jw4qxth2glalg" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-python基础6" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog/2018/05/21/python基础6/" class="article-date">
  <time datetime="2018-05-21T01:01:10.113Z" itemprop="datePublished">2018-05-21</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>#Lesson_06</p>
<hr>
<p>##第九章</p>
<p>###【4】集合（set）</p>
<p>在我的世界里你就是唯一，集合是个专一的类型</p>
<p>那么什么是集合了，集合就是没有key的dict，我们看个例子：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">dict1 = &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">4</span>,<span class="number">3</span>,<span class="number">2</span>,<span class="number">1</span>&#125;</span><br><span class="line"></span><br><span class="line">print(dict1,type(dict1))</span><br><span class="line"></span><br><span class="line"><span class="comment">#&#123;1, 2, 3, 4, 5&#125; &lt;class 'set'&gt;</span></span><br></pre></td></tr></table></figure>
<p>上面提到了，set是很专一的，它会把重复的类型给去除掉。</p>
<p>那么set不像dict那样是映射关系，那么我们怎么去找它的索引了。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">dict1 = &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">4</span>,<span class="number">3</span>,<span class="number">2</span>,<span class="number">1</span>&#125;</span><br><span class="line"></span><br><span class="line">print(dict1[<span class="number">1</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment">#TypeError: 'set' object does not support indexing</span></span><br></pre></td></tr></table></figure>
<p>上面的例子中出现了错误，为什么了，因为set是无序的,也就是它的索引会变动，所以要取出set中的值要把它转成其它类型,才能访问索引。</p>
<p>####创建set</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">set1 = &#123;<span class="string">'nihao'</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="string">'hello'</span>&#125;</span><br><span class="line"></span><br><span class="line">set2 = set()</span><br><span class="line"></span><br><span class="line">set3 = set([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>])</span><br><span class="line"></span><br><span class="line">print(set1,type(set1))</span><br><span class="line">print(set2,type(set2))</span><br><span class="line">print(set3,type(set3))</span><br><span class="line"></span><br><span class="line"><span class="comment">#&#123;'nihao', 2, 3, 'hello'&#125; &lt;class 'set'&gt;</span></span><br><span class="line"><span class="comment">#set() &lt;class 'set'&gt;</span></span><br><span class="line"><span class="comment">#&#123;1, 2, 3, 4, 5&#125; &lt;class 'set'&gt;</span></span><br></pre></td></tr></table></figure>
<p>课堂小练习：</p>
<p>去除list中的重复值</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">list1 = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">4</span>,<span class="number">3</span>,<span class="number">2</span>,<span class="number">1</span>]</span><br><span class="line"></span><br><span class="line">print(list(set(list1)))</span><br><span class="line"></span><br><span class="line"><span class="comment">#[1, 2, 3, 4, 5]</span></span><br></pre></td></tr></table></figure>
<p>####访问集合</p>
<p>由于集合是无序的，所以了不能用下标的方法进行访问，我们可以用迭代的方法：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">set1 = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> v <span class="keyword">in</span> set1:</span><br><span class="line">    print(v,end=<span class="string">' '</span>)</span><br><span class="line">    </span><br><span class="line"><span class="comment">#1 2 3 4 5 6 7</span></span><br></pre></td></tr></table></figure>
<p>当然也可以使用 in  和 not in 判断值在不在set中：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">set1 = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>]</span><br><span class="line"></span><br><span class="line">print(<span class="number">2</span> <span class="keyword">not</span> <span class="keyword">in</span> set1)</span><br><span class="line">print(<span class="number">1</span> <span class="keyword">in</span> set1)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#False</span></span><br><span class="line"><span class="comment">#True</span></span><br></pre></td></tr></table></figure>
<p>也可以使用add()和remove()去添加和删除元素</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">set1 = &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>&#125;</span><br><span class="line"></span><br><span class="line">set1.add(<span class="number">8</span>)</span><br><span class="line">set1.remove(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">print(set1)</span><br><span class="line"></span><br><span class="line">&#123;<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>&#125;</span><br></pre></td></tr></table></figure>
<p>###【5】不可变集合</p>
<p>有的时候我们也希望集合更具有稳定性，也就是像元祖那样不能随意的增加或删除集合中的元素。那么我们定义不可变的集合，这里使用的是frozenset（）函数，没错，就是把元素frozen(冰冻)。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">set1 = frozenset(&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>&#125;)</span><br><span class="line"></span><br><span class="line">set1.add(<span class="number">8</span>)</span><br><span class="line"></span><br><span class="line">print(set1)</span><br><span class="line"></span><br><span class="line"><span class="comment">#AttributeError: 'frozenset' object has no attribute 'add'</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">s8 = set([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>])</span><br><span class="line">s9 = set([<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>])</span><br><span class="line"><span class="comment">#交集</span></span><br><span class="line">a1 = s8 &amp; s9</span><br><span class="line">print(a1)</span><br><span class="line">print(type(a1))</span><br><span class="line"><span class="comment">#并集</span></span><br><span class="line">a2 = s8 | s9</span><br><span class="line">print(a2)</span><br><span class="line">print(type(a2))</span><br><span class="line"><span class="comment">#差集</span></span><br><span class="line">a3 = s9 ^ s8</span><br><span class="line">print(a3)</span><br><span class="line">print(type(type(a3)))</span><br><span class="line"></span><br><span class="line"><span class="comment">#&#123;2, 3&#125;</span></span><br><span class="line"><span class="comment">#&lt;class 'set'&gt;</span></span><br><span class="line"><span class="comment">#&#123;1, 2, 3, 4&#125;</span></span><br><span class="line"><span class="comment">#&lt;class 'set'&gt;</span></span><br><span class="line"><span class="comment">#&#123;1, 4&#125;</span></span><br><span class="line"><span class="comment">#&lt;class 'type'&gt;</span></span><br></pre></td></tr></table></figure>
<p>###【5】再回首，类型转换</p>
<p>以前我们学习了int、float、str、bool等类型的转换，<br>现在我们学习set、dict、tuple、list的类型转换。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">#list--&gt;set</span></span><br><span class="line">l1 = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>]</span><br><span class="line">s1 = set(l1)</span><br><span class="line">print(s1)</span><br><span class="line"></span><br><span class="line"><span class="comment">#tuple--&gt;set</span></span><br><span class="line">t2 = (<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">3</span>,<span class="number">2</span>)</span><br><span class="line">s2 = set(t2)</span><br><span class="line">print(s2)</span><br><span class="line"></span><br><span class="line"><span class="comment">#set--&gt;list</span></span><br><span class="line">s3 = &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>&#125;</span><br><span class="line">l3 = list(s3)</span><br><span class="line">print(l3)</span><br><span class="line"></span><br><span class="line"><span class="comment">#set--&gt;tuple</span></span><br><span class="line">s4 = &#123;<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>&#125;</span><br><span class="line">t4 = tuple(s4)</span><br><span class="line">print(t4)</span><br></pre></td></tr></table></figure>
<p>#####来一个有趣的练习：</p>
<p>使用zip(key,value)函数</p>
<p>使用zip函数的是把两个list或者tuple合拼成一个（（key,value），key,value））格式</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">val = (<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>)</span><br><span class="line">key = [<span class="string">'one'</span>,<span class="string">'two'</span>,<span class="string">'three'</span>,<span class="string">'foul'</span>,<span class="string">'five'</span>]</span><br><span class="line">dict1 = dict(zip(key,val))</span><br><span class="line">print(dict1)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#&#123;'one': 1, 'two': 2, 'three': 3, 'foul': 4, 'five': 5&#125;</span></span><br></pre></td></tr></table></figure>
<p>二维矩阵变换（矩阵的行列互换）</p>
<p>比如我们有一个由列表描述的二维矩阵</p>
<p>zip([seql, …])接受一系列可迭代对象作为参数，将对象中对应的元素打包成一个个tuple（元组），然后返回由这些tuples组成的list（列表）。若传入参数的长度不等，则返回list的长度和参数中长度最短的对象相同。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">a = [[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>], [<span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>]]</span><br><span class="line">print(list(zip(*a)))</span><br><span class="line"></span><br><span class="line"><span class="comment">#[(1, 4, 7), (2, 5, 8), (3, 6, 9)]</span></span><br></pre></td></tr></table></figure>
<p>#####另一种生成方式,生成器生成列表</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">print(list(x <span class="keyword">for</span> x <span class="keyword">in</span> range(<span class="number">10</span>)))</span><br><span class="line">print(tuple(x <span class="keyword">for</span> x <span class="keyword">in</span> range(<span class="number">10</span>)))</span><br><span class="line">print(set(x <span class="keyword">for</span> x <span class="keyword">in</span> range(<span class="number">10</span>)))</span><br><span class="line"></span><br><span class="line"><span class="comment">#[0, 1, 2, 3, 4, 5, 6, 7, 8, 9]</span></span><br><span class="line"><span class="comment">#(0, 1, 2, 3, 4, 5, 6, 7, 8, 9)</span></span><br><span class="line"><span class="comment">#&#123;0, 1, 2, 3, 4, 5, 6, 7, 8, 9&#125;</span></span><br></pre></td></tr></table></figure>
<p>###【6】迭代器</p>
<p>####可迭代对象</p>
<p>可迭代对象：可以直接作用于for循环的对象统称为可迭代对象(Iterable)。可以用isinstance()去判断一个对象是否是Iterable对象</p>
<p>可以直接作用于for的数据类型一般分两种</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>、集合数据类型，如list、tuple、dict、set、string</span><br><span class="line"><span class="number">2</span>、是generator，包括生成器和带<span class="keyword">yield</span>的generator function</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span>  collections <span class="keyword">import</span> Iterable</span><br><span class="line"></span><br><span class="line"><span class="comment">#首先引入collections文件Iterable的类</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span>  collections <span class="keyword">import</span> Iterable</span><br><span class="line"></span><br><span class="line">print(isinstance([], Iterable))</span><br><span class="line">print(isinstance((), Iterable))</span><br><span class="line">print(isinstance(&#123;&#125;, Iterable))</span><br><span class="line">print(isinstance(<span class="string">""</span>, Iterable))</span><br><span class="line">print(isinstance((x <span class="keyword">for</span> x <span class="keyword">in</span> range(<span class="number">10</span>)), Iterable))</span><br><span class="line">print(isinstance(<span class="number">1</span>, Iterable))</span><br><span class="line"></span><br><span class="line"><span class="comment">#True</span></span><br><span class="line"><span class="comment">#True</span></span><br><span class="line"><span class="comment">#True</span></span><br><span class="line"><span class="comment">#True</span></span><br><span class="line"><span class="comment">#True</span></span><br><span class="line"><span class="comment">#False</span></span><br></pre></td></tr></table></figure>
<p>####迭代器</p>
<p>迭代器：不但可以作用于for循环，还可以被next()函数不断调用并返回下一个值，直到最后跑出一个StopIteration错误表示无法继续返回下一个值</p>
<p>可以被next()函数调用并不断返回下一个值的对象称为迭代器(Iterator对象)</p>
<p>可以使用isinstance()函数判断一个对象是否是Iterator对象</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">from</span>  collections <span class="keyword">import</span> Iterator</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span>  collections <span class="keyword">import</span> Iterator</span><br><span class="line"></span><br><span class="line">print(isinstance([], Iterator))</span><br><span class="line">print(isinstance((), Iterator))</span><br><span class="line">print(isinstance(&#123;&#125;, Iterator))</span><br><span class="line">print(isinstance(<span class="string">""</span>, Iterator))</span><br><span class="line">print(isinstance((x <span class="keyword">for</span> x <span class="keyword">in</span> range(<span class="number">10</span>)), Iterator))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#False</span></span><br><span class="line"><span class="comment">#False</span></span><br><span class="line"><span class="comment">#False</span></span><br><span class="line"><span class="comment">#False</span></span><br><span class="line"><span class="comment">#True</span></span><br></pre></td></tr></table></figure>
<p>####可迭代对象指针下移</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">l = (x <span class="keyword">for</span> x <span class="keyword">in</span> [<span class="number">23</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">64</span>,<span class="number">3435</span>])</span><br><span class="line">print(next(l))</span><br><span class="line">print(next(l))</span><br><span class="line">print(next(l))</span><br><span class="line">print(next(l))</span><br><span class="line">print(next(l))</span><br><span class="line"><span class="comment"># print(next(l))</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#23</span></span><br><span class="line"><span class="comment">#4</span></span><br><span class="line"><span class="comment">#5</span></span><br><span class="line"><span class="comment">#64</span></span><br><span class="line"><span class="comment">#3435</span></span><br><span class="line"><span class="comment">##如果后面已经没有值了，指针继续下移会报错</span></span><br></pre></td></tr></table></figure>
<p>####转成Iterator对象</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span>  collections <span class="keyword">import</span> Iterator</span><br><span class="line"></span><br><span class="line">a = iter([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>])</span><br><span class="line">print(next(a))</span><br><span class="line">print(next(a))</span><br><span class="line"></span><br><span class="line">print(isinstance(iter([]), Iterator))</span><br><span class="line">print(isinstance(iter(()), Iterator))</span><br><span class="line">print(isinstance(iter(&#123;&#125;), Iterator))</span><br><span class="line">print(isinstance(iter(<span class="string">''</span>), Iterator))</span><br><span class="line"></span><br><span class="line"><span class="comment">#1</span></span><br><span class="line"><span class="comment">#2</span></span><br><span class="line"><span class="comment">#True</span></span><br><span class="line"><span class="comment">#True</span></span><br><span class="line"><span class="comment">#True</span></span><br><span class="line"><span class="comment">#True</span></span><br></pre></td></tr></table></figure>
<p>##第十章</p>
<p>###【1】函数</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">认识函数：在一个完整的项目中，某些功能会反复的使用。那么会将功能封装成函数，当我们要使用功能的时候直接调用函数即可</span><br><span class="line"></span><br><span class="line">本质：函数就是对功能的封装</span><br><span class="line"></span><br><span class="line">优点</span><br><span class="line"><span class="number">1</span>、简化代码结构，增加了代码的复用度(重复使用的程度)</span><br><span class="line"><span class="number">2</span>、如果想修改某些功能或者调试某个BUG，还需要修改对应的函数即可</span><br></pre></td></tr></table></figure>
<h4 id="一、python的‘’积木“"><a href="#一、python的‘’积木“" class="headerlink" title="一、python的‘’积木“"></a>一、python的‘’积木“</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">函数就像是积木一样通过创意和想想可以自由的组合，从而使我们的代码，变的更加的简单易懂,节约开发时间，不需要去理解底层的运行，把复杂的事情变的简单有乐趣。</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">在学习这一章节之前了，其实我们就已经接触过BIF了，例如print()、range()这些都是python自己封装的函数提供给我们使用的</span><br></pre></td></tr></table></figure>
<h5 id="1、创建和调用函数"><a href="#1、创建和调用函数" class="headerlink" title="1、创建和调用函数"></a>1、创建和调用函数</h5><p>​    函数的定义:    </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">关键字 def 函数名():</span></span><br><span class="line"><span class="string">			函数体</span></span><br><span class="line"><span class="string">			return 返回表达式</span></span><br><span class="line"><span class="string">调用  函数名()</span></span><br><span class="line"><span class="string">		</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="comment">#函数名可以以使用大小写字母、下划线开头，不能以数字开头</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">mydef</span><span class="params">()</span>:</span><span class="comment">#关键字def 函数名()：</span></span><br><span class="line">    print(<span class="string">'这是我的第一个函数'</span>)</span><br><span class="line">    print(<span class="string">'我表示非常的激动...'</span>)</span><br><span class="line">    print(<span class="string">'在这里感谢我的父母，感谢千锋，你们成就了我'</span>)</span><br><span class="line">mydef()</span><br><span class="line"><span class="comment">#注意：在函数名后面一定要加上小括号，小括号的作用是用来保存参数的</span></span><br><span class="line"><span class="comment">#函数的运行机制：mydef()发生调用操作时，python会自动往上去寻找 def mydef（）：定义的过程，然后依次执行该代码块内所包含的所用代码部分。</span></span><br></pre></td></tr></table></figure>
<p>调用代码三次：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">mydef</span><span class="params">()</span>:</span></span><br><span class="line">    print(<span class="string">'这是我的第一个函数'</span>)</span><br><span class="line">    print(<span class="string">'我表示非常的激动...'</span>)</span><br><span class="line">    print(<span class="string">'在这里感谢我的父母，感谢千锋，你们成就了我'</span>)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">3</span>):     <span class="comment">#使用循环反复的调用</span></span><br><span class="line">	mydef()</span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">result:</span></span><br><span class="line"><span class="string">这是我的第一个函数</span></span><br><span class="line"><span class="string">我表示非常的激动...</span></span><br><span class="line"><span class="string">在这里感谢我的父母，感谢千锋，你们成就了我</span></span><br><span class="line"><span class="string">这是我的第一个函数</span></span><br><span class="line"><span class="string">我表示非常的激动...</span></span><br><span class="line"><span class="string">在这里感谢我的父母，感谢千锋，你们成就了我</span></span><br><span class="line"><span class="string">这是我的第一个函数</span></span><br><span class="line"><span class="string">我表示非常的激动...</span></span><br><span class="line"><span class="string">在这里感谢我的父母，感谢千锋，你们成就了我</span></span><br><span class="line"><span class="string">'''</span></span><br></pre></td></tr></table></figure>
<h5 id="2、函数的参数"><a href="#2、函数的参数" class="headerlink" title="2、函数的参数"></a>2、函数的参数</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">```python</span><br><span class="line">def mydef(name):      #从某种意义上来说括号中的参数就是个变量</span><br><span class="line">    print(name + &apos;是帅锅&apos;)</span><br><span class="line"></span><br><span class="line">mydef(&apos;刘德华&apos;)</span><br><span class="line">mydef(&apos;郭富城&apos;)</span><br><span class="line">mydef(&apos;张学友&apos;)</span><br><span class="line">mydef(</span><br></pre></td></tr></table></figure>
<h5 id="3、函数的返回值"><a href="#3、函数的返回值" class="headerlink" title="3、函数的返回值"></a>3、函数的返回值</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">```python</span><br><span class="line">def add(num1,num2):</span><br><span class="line">    return num1 + num2</span><br><span class="line">print(add(1,2)) </span><br><span class="line">#注意：当函数内部使用的是return的时候，调用的时候没有print()的话，是不会打印输出的</span><br><span class="line">#如果函数没有了参数，那么函数就变的非常的单一，一个函数就只能完成一个功能</span><br></pre></td></tr></table></figure>
<h4 id="二、灵活强大的用法"><a href="#二、灵活强大的用法" class="headerlink" title="二、灵活强大的用法"></a>二、灵活强大的用法</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">##### 1、形参和实参</span><br><span class="line"></span><br><span class="line">```参数从调用的角度来说，分为形式参数和实际参数。python和绝大数语言一样，形参指的是函数创建和定义过程中的小括号里面的参数（可以理解卫一个新的变量）而实参指的是函数在调用的时候传递进来的参数或值</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">mydef</span><span class="params">(name)</span>:</span> <span class="comment">#小括号里面的name就是形参</span></span><br><span class="line">    <span class="keyword">return</span> name</span><br><span class="line">myname = <span class="string">'成龙'</span></span><br><span class="line">print(mydef(myname)) <span class="comment">#调用时候的myname就是实参</span></span><br><span class="line"><span class="comment">#在这个代码段中把 myname 中的值（成龙）赋值给了 name</span></span><br><span class="line"><span class="comment">#相当于 name = myname</span></span><br><span class="line"><span class="comment">#可以理解为结婚以后夫妻的财产是共有的，没有为什么，法律规定的，这里也一样，语法规定的</span></span><br><span class="line"><span class="comment">#不论是形参还是实参都只是一个概念和名词，只需要去记住他，不需要去纠结为什么</span></span><br></pre></td></tr></table></figure>
<h5 id="2、函数的文档"><a href="#2、函数的文档" class="headerlink" title="2、函数的文档"></a>2、函数的文档</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">```python</span><br><span class="line">def mydef(params):</span><br><span class="line">    #引号中的部分就是我们书写文档的地方   并且文档部分应该写在函数的开头</span><br><span class="line">    &apos;&apos;&apos; </span><br><span class="line">    这是我们第一个文档</span><br><span class="line">    :param params:</span><br><span class="line">    :return:</span><br><span class="line">    &apos;&apos;&apos;</span><br><span class="line">    return params</span><br><span class="line">#print(mydef.__doc__)     #显示文档的内容  函数名（不带小括号）.__doc__</span><br><span class="line">help(mydef)               </span><br><span class="line">#当函数不知道怎么去使用的时候可以用help()去查看文档，当然使用方法需要自己去写</span><br></pre></td></tr></table></figure>
<h5 id="3、关键字参数"><a href="#3、关键字参数" class="headerlink" title="3、关键字参数"></a>3、关键字参数</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">```python</span><br><span class="line">def mydef(name,age):</span><br><span class="line">    print(name,&apos;他的年龄是&apos;,age,&apos;岁&apos;)</span><br><span class="line">mydef(21,&apos;hal&apos;)</span><br><span class="line"></span><br><span class="line">#应为参数顺序错误导致结果不正确</span><br><span class="line">#result：21 他的年龄是 hal 岁</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">```python</span><br><span class="line">def mydef(name,age):</span><br><span class="line">    print(name,&apos;他的年纪是&apos;,age,&apos;岁&apos;)</span><br><span class="line">mydef(age=23,name=&apos;小米&apos;)</span><br><span class="line"></span><br><span class="line">#使用了关键字参数以后顺序错了，但是结果依然正确，所谓的关键字就是指定的形参</span><br><span class="line">#result:小米 他的年纪是 23 岁</span><br></pre></td></tr></table></figure>
<h5 id="4、默认参数"><a href="#4、默认参数" class="headerlink" title="4、默认参数"></a>4、默认参数</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">```python</span><br><span class="line">def mydef(name=&apos;千锋&apos;,action=&apos;是最好的IT教育机构&apos;):</span><br><span class="line">    print(name,action)</span><br><span class="line">    </span><br><span class="line">mydef()</span><br><span class="line">#在参数没有传递值的时候也不会报错，因为有了默认的值</span><br><span class="line">#result:千锋 是最好的IT教育机构</span><br><span class="line"></span><br><span class="line">mydef(name=&apos;中国&apos;,action=&apos;是最伟大的国家&apos;)</span><br><span class="line">#在参数传递的过程中，替换了默认的值</span><br><span class="line">#result:中国 是最伟大的国家</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">##### 5、收集参数（可变参数）</span><br><span class="line"></span><br><span class="line">```这个名字听起来比较的新鲜。发明这种机制的人就是不知道在特定的情况下会用到多少的参数...听起来您认不解，但是确实有这种情况，这时候需要在参数前面加上（*）星号就可以了</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">test</span><span class="params">(* params)</span>:</span></span><br><span class="line">    print(<span class="string">'params 有%d个参数'</span>%len(params))</span><br><span class="line">    print(<span class="string">'最后一个参数是：'</span>,params[<span class="number">-1</span>])</span><br><span class="line">    print(type(params))</span><br><span class="line">    print(params)</span><br><span class="line">test(<span class="number">1</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">7</span>,<span class="number">9</span>)</span><br><span class="line"></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">result:</span></span><br><span class="line"><span class="string">params 有5个参数</span></span><br><span class="line"><span class="string">最后一个参数是： 9</span></span><br><span class="line"><span class="string">&lt;class 'tuple'&gt;</span></span><br><span class="line"><span class="string">(1, 3, 5, 7, 9)</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#调用的时候传递多个参数，python会把多个收集参数打包成tuple(元祖)</span></span><br><span class="line"><span class="comment">#所以在查找第几个参数的时候可以使用元祖的查找方法</span></span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">```python</span><br><span class="line">def test(* params):</span><br><span class="line">    print(&apos;有%d个参数&apos; % len(params))</span><br><span class="line">    print(params[-1])</span><br><span class="line">    print(type(params))</span><br><span class="line">    print(type(params[-1]))  #list是被嵌套在tuple里面的</span><br><span class="line">    print(params)</span><br><span class="line">list = [1,3,5,7,9]</span><br><span class="line">test( list)</span><br><span class="line"></span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line">result:</span><br><span class="line">有1个参数</span><br><span class="line">[1, 3, 5, 7, 9]</span><br><span class="line">&lt;class &apos;tuple&apos;&gt;</span><br><span class="line">&lt;class &apos;list&apos;&gt;</span><br><span class="line">([1, 3, 5, 7, 9],)</span><br><span class="line">&apos;&apos;&apos;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">```python</span><br><span class="line">def test(* params):</span><br><span class="line">    print(&apos;有%d个参数&apos; % len(params))</span><br><span class="line">    print(params[-1])</span><br><span class="line">    print(type(params))  </span><br><span class="line">    print(type(params[-1]))</span><br><span class="line">    print(params)</span><br><span class="line">list = [1,3,5,7,9]</span><br><span class="line">test(* list)  #解包以后的list是逐个传递的</span><br><span class="line"></span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line">result:</span><br><span class="line">有5个参数</span><br><span class="line">9</span><br><span class="line">&lt;class &apos;tuple&apos;&gt;</span><br><span class="line">&lt;class &apos;int&apos;&gt;</span><br><span class="line">(1, 3, 5, 7, 9)</span><br><span class="line">&apos;&apos;&apos;</span><br></pre></td></tr></table></figure>
<h4 id="三、函数的地盘"><a href="#三、函数的地盘" class="headerlink" title="三、函数的地盘"></a>三、函数的地盘</h4><h5 id="1、函数的过程"><a href="#1、函数的过程" class="headerlink" title="1、函数的过程"></a>1、函数的过程</h5><p>很多编程语言中，函数和过程其实是区分开的。一般认为函数(function)是返回值的，而过程(procedure)是简单、特殊并且没有返回值的。</p>
<p>也就是说，函数是干完事儿必须写报告的“苦逼”，而过程是完事后拍拍屁股一走了之的“小混蛋”。</p>
<p>python严格来说只有函数，没有过程！但是通过上面的例子看过去，没有return之前，python的function也是没有返回值？我们看看下面的例子</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">mydef</span><span class="params">()</span>:</span></span><br><span class="line">    print(<span class="number">123</span>)</span><br><span class="line">print(mydef())</span><br><span class="line"></span><br><span class="line"><span class="comment">#123</span></span><br><span class="line"><span class="comment">#None</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#没有return默认返回一个None</span></span><br></pre></td></tr></table></figure>
<h5 id="2、谈谈返回值"><a href="#2、谈谈返回值" class="headerlink" title="2、谈谈返回值"></a>2、谈谈返回值</h5><p>python可以利用序列打包多种类型的一次性返回值。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">mydef</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span></span><br><span class="line">print(mydef())</span><br><span class="line"></span><br><span class="line"><span class="comment">#(1, 2, 3, 4)</span></span><br></pre></td></tr></table></figure>
<h5 id="3、函数变量的作用域"><a href="#3、函数变量的作用域" class="headerlink" title="3、函数变量的作用域"></a>3、函数变量的作用域</h5><p>变量的作用域也就是平时所说的变量可见性</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">discounts</span><span class="params">(price,rate)</span>:</span></span><br><span class="line">    final_price= price * rate</span><br><span class="line">    <span class="keyword">return</span> final_price</span><br><span class="line"></span><br><span class="line">old_price = <span class="number">80</span></span><br><span class="line">rate = <span class="number">0.5</span></span><br><span class="line">new_price = discounts(old_price,rate)</span><br><span class="line">print(new_price)</span><br><span class="line">print(final_price)</span><br><span class="line"></span><br><span class="line"><span class="comment">#40.0</span></span><br><span class="line"><span class="comment">#NameError: name 'final_price' is not defined</span></span><br></pre></td></tr></table></figure>
<p>错误的原因是final_price没有被定义过，因为他是discounts函数里面的内容，再有在函数体内部才有效，出了这个范围就不是它的地盘了。</p>
<p>总结一下：在函数里面定义的参数以及变量，都称谓局部变量，出了函数外，它们都是无效的。事实上，python在运行函数的时候，是利用内存中的‘栈（stack）’区域进行储存的，当执行完函数以后，函数中的所有内容都要被自动删去，所以在函数体外是找不到的。</p>
<p>和局部变量相对应的就是全局变量，全局变量拥有更加庞大的作用域</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">discounts</span><span class="params">(price,rate)</span>:</span></span><br><span class="line">    final_price= price * rate</span><br><span class="line">    print(old_price)</span><br><span class="line">    <span class="keyword">return</span> final_price</span><br><span class="line"></span><br><span class="line">old_price = <span class="number">80</span></span><br><span class="line">rate = <span class="number">0.5</span></span><br><span class="line">new_price = discounts(old_price,rate)</span><br><span class="line">print(new_price)</span><br><span class="line"></span><br><span class="line"><span class="comment">#80     #old_price在函数内部输出</span></span><br><span class="line"><span class="comment">#40.0</span></span><br></pre></td></tr></table></figure>
<p>看起来全局变量更加霸道，但是我们看看下面的例子：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">discounts</span><span class="params">(price,rate)</span>:</span></span><br><span class="line">    old_price = <span class="number">100</span></span><br><span class="line">    final_price= price * rate</span><br><span class="line">    print(<span class="string">'这是里面的old_price'</span>,old_price)</span><br><span class="line">    <span class="keyword">return</span> final_price</span><br><span class="line"></span><br><span class="line">old_price = <span class="number">80</span></span><br><span class="line">rate = <span class="number">0.5</span></span><br><span class="line">new_price = discounts(old_price,rate)</span><br><span class="line">print(<span class="string">'这是外面的old_price'</span>,old_price)</span><br><span class="line">print(new_price)</span><br><span class="line"></span><br><span class="line"><span class="comment">#这是里面的old_price 100</span></span><br><span class="line"><span class="comment">#这是外面的old_price 80</span></span><br><span class="line"><span class="comment">#40.0</span></span><br></pre></td></tr></table></figure>
<p>这样的话就已经出现奇怪的问题。</p>
<p>其实函数里面的old_price是python自己创建的新的局部变量，但是全局的old_price纹丝不动。</p>
<p>####四、内嵌函数和闭包</p>
<h5 id="1、global关键字"><a href="#1、global关键字" class="headerlink" title="1、global关键字"></a>1、global关键字</h5><p>刚刚我们在上一个例子中看到了Python中对于全局变量的保护，也就是在函数内部重新复制的话，python会创建一个变量名一样的局部变量，但是在不经意中会出现衡多的bug，代码的维护也会变得困难。</p>
<p>衡多编程语言为了避免这一个情况，都会使用<code>global</code>关键字，也就是说我们上面的那种方法就不要在用了。例子如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">count = <span class="number">5</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">myfun</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">global</span> count</span><br><span class="line">    count = <span class="number">10</span></span><br><span class="line">    <span class="keyword">return</span> count</span><br><span class="line">print(myfun())</span><br><span class="line">print(count)</span><br><span class="line"></span><br><span class="line"><span class="comment">#10</span></span><br><span class="line"><span class="comment">#10</span></span><br></pre></td></tr></table></figure>
<p>看上面的例子内部的count重新复制，外层的count也随之改变</p>
<h5 id="2、内嵌函数"><a href="#2、内嵌函数" class="headerlink" title="2、内嵌函数"></a>2、内嵌函数</h5><p>什么是内嵌函数，就是允许在函数内部创建另外一个函数。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">myfun</span><span class="params">()</span>:</span></span><br><span class="line">    print(<span class="string">'fun1'</span>)</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">myfun2</span><span class="params">()</span>:</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">'fun2'</span></span><br><span class="line">    <span class="keyword">return</span> myfun2()</span><br><span class="line">print(myfun())</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#fun1</span></span><br><span class="line"><span class="comment">#fun2</span></span><br></pre></td></tr></table></figure>
<p>这个函数虽小，但五脏俱全，不过看起来好像没什么用。</p>
<font color="red">注意：myfun2是myfun1的内部函数，所以它的作用域也在myfun1的函数体内。如果要在外部调用就会报错。</font>

<h5 id="3、闭包（closure）"><a href="#3、闭包（closure）" class="headerlink" title="3、闭包（closure）"></a>3、闭包（closure）</h5><p>闭包是函数重要的组成结构，函数编程是一种编程范式。著名的函数编程语言LISP，这个大家可能知道，主要用于绘图和人工智能，一直被认为是天才使用的语言。</p>
<p>那么语言不同，那么闭包的的实现方式也就不同。</p>
<p>python中的闭包定义：一个内部函数里，对外部的作用域（而不是全局作用域）的变量进行引用，那么内部函数就被认为是闭包。看例子：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">funx</span><span class="params">(x)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">funy</span><span class="params">(y)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> x * y</span><br><span class="line">    <span class="keyword">return</span> funy  <span class="comment">#这里是不带括号的</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#两种调用格式</span></span><br><span class="line">i = funx(<span class="number">8</span>)</span><br><span class="line">print(i(<span class="number">5</span>))</span><br><span class="line">print(funx(<span class="number">10</span>)(<span class="number">5</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment">#40</span></span><br><span class="line"><span class="comment">#50</span></span><br></pre></td></tr></table></figure>
<font color="red">注意：它和闭包是一个意思，所以不能直接去调用funy()，否则会报错。</font>

<p>#####闭包中的变量关系对应</p>
<p>在闭包中外面一层函数中定义的变量是不能再内层函数中直接修改的，只能访问，相当于全局变量和局部变量的关系，看例子：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">funx</span><span class="params">()</span>:</span></span><br><span class="line">    x = <span class="number">5</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">funy</span><span class="params">()</span>:</span></span><br><span class="line">        x *= x</span><br><span class="line">        <span class="keyword">return</span> x</span><br><span class="line">    <span class="keyword">return</span> funy  <span class="comment">#这里是不带括号的</span></span><br><span class="line"></span><br><span class="line">print(funx()())</span><br><span class="line"></span><br><span class="line"><span class="comment">#UnboundLocalError: local variable 'x' referenced before assignment</span></span><br></pre></td></tr></table></figure>
<p>这个报错信息和全局变量是一样的，python认为内部函数的x是局部变量，外部的函数x被屏蔽了起来。所以</p>
<h4 id="五、lambda表达式（匿名函数）"><a href="#五、lambda表达式（匿名函数）" class="headerlink" title="五、lambda表达式（匿名函数）"></a>五、lambda表达式（匿名函数）</h4><p>python允许使用 lambda 关键字来创建匿名函数，我们提到一个新的关键字<code>匿名函数</code>。那是一个什么函数了？匿名函数和普通的函数在使用上又有什么不同了，使用匿名函数又有哪些优势了？</p>
<p>看看比较，这是平常的定义：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">de</span><span class="params">(x)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">2</span> * x+<span class="number">1</span></span><br><span class="line">print(de(<span class="number">2</span>))</span><br></pre></td></tr></table></figure>
<p>zai看看lambda：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">a = <span class="keyword">lambda</span> x: <span class="number">2</span> * x + <span class="number">1</span></span><br><span class="line">print(a(<span class="number">2</span>))</span><br></pre></td></tr></table></figure>
<p>我们可以看到lambda的语法风格非常的简洁</p>
<p>lambda 关键字 冒号左边是参数，多个参数可以用逗号隔开；冒号右边是表达式，lambda返回的是函数表达式，所以要把它赋给一个变量，那么变量就相当于一个函数名</p>
<p>演示一个多参数的lambda：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">f = <span class="keyword">lambda</span> x,y: x + y</span><br><span class="line">print(f(<span class="number">3</span>,<span class="number">4</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment">#7</span></span><br></pre></td></tr></table></figure>
<p>看上去好像是没用，因为我们现在遇不到使用它的场景：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>、python在编写一些执行脚本的时候可以使用<span class="keyword">lambda</span>，这样可以接受定义函数的过程，比如写一个简单的脚本管理服务器。</span><br><span class="line"><span class="number">2</span>、对于一些比较抽象，并且整个程序执行下来只需要调用一两次的，有时候给函数起名实在想不出来的。</span><br><span class="line"><span class="number">3</span>、简化代码的可读性。</span><br></pre></td></tr></table></figure>
<h5 id="1、filter"><a href="#1、filter" class="headerlink" title="1、filter()"></a>1、filter()</h5><p>它是一个内建函数过滤器，就是一个BIF</p>
<p>第一个参数是一个函数也可以是一个None，如果是None的话会把值为True的选取出来；如果是函数的话，就把第二个参数传递进去计算，第二个参数应该是一个可迭代的序列；</p>
<p>我们可以用help()来查看它</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">print(help(filter))</span><br><span class="line"></span><br><span class="line"><span class="comment">#Help on class filter in module builtins:</span></span><br></pre></td></tr></table></figure>
<p>看看我们使用的例子：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">temp = filter(<span class="keyword">None</span>,[<span class="number">2</span>,<span class="number">0</span>,<span class="keyword">False</span>,<span class="keyword">True</span>])</span><br><span class="line">print(list(temp)</span><br><span class="line"></span><br><span class="line"><span class="comment">#[1, 2, True]</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">odd</span><span class="params">(x)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> x % <span class="number">2</span></span><br><span class="line">temp = filter(odd,range(<span class="number">10</span>))</span><br><span class="line">print(list(temp))</span><br><span class="line"></span><br><span class="line"><span class="comment">#[1, 3, 5, 7, 9]</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">print(set(filter(<span class="keyword">lambda</span> x: x % <span class="number">2</span>,range(<span class="number">10</span>))))</span><br><span class="line"></span><br><span class="line"><span class="comment">#&#123;1, 3, 5, 7, 9&#125;</span></span><br></pre></td></tr></table></figure>
<h5 id="2、map"><a href="#2、map" class="headerlink" title="2、map()"></a>2、map()</h5><p>map()了在这里不是地图的意思，在编程领域，map一般作“映射”来解释。map()这个内置数也有两个参数，和filter()相似，但是它的第一个参数只能是函数：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">print(help(map))</span><br><span class="line"></span><br><span class="line"><span class="comment">#Help on class map in module builtins:</span></span><br></pre></td></tr></table></figure>
<p>看下面例子：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">print(list(map(<span class="keyword">lambda</span> x: x * <span class="number">2</span> , range(<span class="number">10</span>))))</span><br><span class="line"></span><br><span class="line"><span class="comment">#[0, 2, 4, 6, 8, 10, 12, 14, 16, 18]</span></span><br></pre></td></tr></table></figure>
<h3 id="【2】递归"><a href="#【2】递归" class="headerlink" title="【2】递归"></a>【2】递归</h3><h4 id="1、驾驭递归"><a href="#1、驾驭递归" class="headerlink" title="1、驾驭递归"></a>1、驾驭递归</h4><p>优秀的程序员是伯乐，那么递归就是千里马、万里马。普通的程序员用迭代，‘天才的程序员’用递归。</p>
<p>递归的这个概念，是算法的范畴，不是属于python的东西，但是当你掌握了递归的技巧和思路后，你会发现这是一个非常棒的编程思路。</p>
<p>那么递归在我们日常生活中有那些例子？</p>
<p>谢尔宾斯基三角形：</p>
<image src="images/timg-2.jpeg" width="500">

<p>其实它就是一个树形的结构：</p>
<image src="images/timg.jpeg" width="500">


<p>说了这么多，递归的概念就是自身调用自身。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">mydef</span><span class="params">(x)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> mydef(x+<span class="number">1</span>)</span><br><span class="line">print(mydef(<span class="number">1</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment">#RecursionError: maximum recursion depth exceeded</span></span><br></pre></td></tr></table></figure>
<p>尝试这个例子，很多人都会出现这个错误，从理论上来说，这个程序会永远的执行下去，一直耗尽内存资源。但是python3出于保护机制，默认的递归深度是100次，所以你的代码才会停下来。不过你写写网络爬虫等其它工具，可能会爬的很深，那么可以自己设置递归的深度，如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line">sys.setrecursionlimit(<span class="number">10000</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#设置最大深度为一万层</span></span><br></pre></td></tr></table></figure>
<p>####2、写一个求阶乘的函数<br>整数阶乘是指10 <em> 9 </em> 8 <em> 7…..</em> 1:</p>
<p>我们用迭代函数写一个：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">mydef</span><span class="params">(n)</span>:</span></span><br><span class="line">    res = n</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>,n):</span><br><span class="line">        res *= i</span><br><span class="line">    <span class="keyword">return</span> res</span><br><span class="line">print(mydef(<span class="number">5</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment">#120</span></span><br></pre></td></tr></table></figure>
<p>用递归写一个：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">myrecursion</span><span class="params">(n)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> n ==<span class="number">1</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> n * myrecursion(n<span class="number">-1</span>)</span><br><span class="line">print(myrecursion(<span class="number">5</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment">#120</span></span><br></pre></td></tr></table></figure>
<p>这个例子递归满足了两个条件：<br>(1）调用函数本身<br>(2)设置了正确的返回值</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">myrecursion(<span class="number">5</span>) = <span class="number">5</span> * myrecursion(<span class="number">4</span>)</span><br><span class="line">	myrecursion(<span class="number">4</span>) = <span class="number">4</span> * myrecursion(<span class="number">3</span>)</span><br><span class="line">		myrecursion(<span class="number">3</span>) = <span class="number">5</span> * myrecursion(<span class="number">2</span>)</span><br><span class="line">			myrecursion(<span class="number">2</span>) = <span class="number">5</span> * myrecursion(<span class="number">1</span>)</span><br><span class="line">				myrecursion(<span class="number">1</span>) = <span class="number">1</span></span><br></pre></td></tr></table></figure>
<p>最后郑重的说一下，不是说会使用递归，把所用可以迭代的东西用递归来替代，真的这样作就是乌龟程序员了。为什么这么说，递归是自己调用自己，每次函数调用都需要进行压栈、弹栈、保存和恢复寄存器的栈操作，所以非常的耗费时间和空间。</p>
<p>另外，如果递归一旦忘记了返回，或者错误的设置了返回条件，那么执行这样的递归代码，就会是一个无底洞：只进不出！，所以递归，有来有回。</p>
<h4 id="3、斐波那契数列"><a href="#3、斐波那契数列" class="headerlink" title="3、斐波那契数列"></a>3、斐波那契数列</h4><p>斐波那契数列（Fibonacci sequence），又称黄金分割数列、因数学家列昂纳多·斐波那契（Leonardoda Fibonacci）以兔子繁殖为例子而引入，故又称为“兔子数列”，指的是这样一个数列：1、1、2、3、5、8、13、21、34、……在数学上，斐波纳契数列以如下被以递归的方法定义：F(0)=0，F(1)=1, F(n)=F(n-1)+F(n-2)（n&gt;=2，n∈N*）在现代物理、准晶体结构、化学等领域，斐波纳契数列都有直接的应用，为此，美国数学会从1963起出版了以《斐波纳契数列季刊》为名的一份数学杂志，用于专门刊载这方面的研究成果。</p>
<p>下面是他讲过的故事，如果兔子在出生两个月后就有繁殖能力，在拥有繁殖能力后，这对兔子每个月能生出一对兔子来，假设所有兔子都不会死去，那么一年后能有多少对兔子？</p>
<table>
<thead>
<tr>
<th>所有经过的月数</th>
<th>1</th>
<th>2</th>
<th>3</th>
<th>4</th>
<th>5</th>
<th>6</th>
<th>7</th>
<th>8</th>
<th>9</th>
<th>10</th>
<th>11</th>
<th>12</th>
</tr>
</thead>
<tbody>
<tr>
<td>兔子的总对数</td>
<td>1</td>
<td>1</td>
<td>2</td>
<td>3</td>
<td>5</td>
<td>8</td>
<td>13</td>
<td>21</td>
<td>34</td>
<td>55</td>
<td>89</td>
<td>144</td>
</tr>
</tbody>
</table>
<p>数学中的定义：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">		|  <span class="number">1</span>,               当 n = <span class="number">1</span> 时</span><br><span class="line">F(n) =  |  <span class="number">1</span>,               当 n = <span class="number">2</span> 时</span><br><span class="line">		|  F(n<span class="number">-1</span>)+F(n<span class="number">-2</span>)    当 n &gt; <span class="number">2</span> 时</span><br></pre></td></tr></table></figure>
<p>假设现在我们经历了20个月，现在有多少对：</p>
<p>迭代实现：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">fab</span><span class="params">(n)</span>:</span> <span class="comment">#n代表月数</span></span><br><span class="line">    a1 = <span class="number">1</span>  <span class="comment">#代表这个月现有对数</span></span><br><span class="line">    a2 = <span class="number">1</span>  <span class="comment">#代表下个月要出生的对数</span></span><br><span class="line">    a3 = <span class="number">1</span>  <span class="comment">#代表这个月总对数</span></span><br><span class="line">    <span class="keyword">if</span> n &lt;<span class="number">1</span>:</span><br><span class="line">        print(<span class="string">'输入有误'</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span></span><br><span class="line">    <span class="keyword">while</span> (n - <span class="number">2</span>) &gt; <span class="number">0</span>:</span><br><span class="line">        a3 = a1 + a2</span><br><span class="line">        a1 = a2</span><br><span class="line">        a2 = a3</span><br><span class="line">        n -= <span class="number">1</span></span><br><span class="line">    <span class="keyword">return</span> a3</span><br><span class="line"></span><br><span class="line">result = fab(<span class="number">20</span>)</span><br><span class="line"><span class="keyword">if</span> result != <span class="number">-1</span>:</span><br><span class="line">    print(<span class="string">'总共有 % d对小兔崽子诞生！'</span> % result)</span><br><span class="line">    </span><br><span class="line"><span class="comment">#总共有  6765对小兔崽子诞生！</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">fab</span><span class="params">(n)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> n &lt; <span class="number">1</span>:</span><br><span class="line">        print(<span class="string">'输入有误！'</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span></span><br><span class="line">    <span class="keyword">if</span> n ==<span class="number">1</span> <span class="keyword">or</span> n ==<span class="number">2</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> fab(n<span class="number">-1</span>) + fab(n<span class="number">-2</span>)</span><br><span class="line">result = fab(<span class="number">20</span>)</span><br><span class="line"><span class="keyword">if</span> result != <span class="number">-1</span>:</span><br><span class="line">    print(<span class="string">'总共有 % d对小兔崽子诞生！'</span> % result)</span><br><span class="line">    </span><br><span class="line"><span class="comment">#总共有  6765对小兔崽子诞生！</span></span><br></pre></td></tr></table></figure>
<p>上面的例子看，递归实现起来要简单一些，但是说过了递归消耗内存，消耗cpu，效率低，我们试试35个月的递归和迭代。</p>
<p>如果你想测试你的电脑牛不牛逼，不妨用递归试试。<br>递归实现。</p>
<h4 id="4、汉诺塔（课堂小练习）"><a href="#4、汉诺塔（课堂小练习）" class="headerlink" title="4、汉诺塔（课堂小练习）"></a>4、汉诺塔（课堂小练习）</h4><p>汉诺塔：汉诺塔（又称河内塔）问题是源于印度一个古老传说的益智玩具。大梵天创造世界的时候做了三根金刚石柱子，在一根柱子上从下往上按照大小顺序摞着64片黄金圆盘。大梵天命令婆罗门把圆盘从下面开始按大小顺序重新摆放在另一根柱子上。并且规定，在小圆盘上不能放大圆盘，在三根柱子之间一次只能移动一个圆盘。</p>
<p>汉罗塔游戏：</p>
<image src="images/timg-3.jpeg" width="500">


<pre><code>三根柱子分别是： X                  Y                Z
</code></pre><p>对于游戏的玩法:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">(<span class="number">1</span>)将前<span class="number">63</span>个盘子从X移动到Y上，确保大盘在小盘下。</span><br><span class="line">(<span class="number">2</span>)将最底下的第<span class="number">64</span>个盘子从X移动到Z。</span><br><span class="line">(<span class="number">3</span>)将Y上的<span class="number">63</span>个盘子移动到Z上。</span><br></pre></td></tr></table></figure>
<p>思路如下：<br>最底下的盘子我们给它编号第64个，最上面的给编号第1个。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">hanoi</span><span class="params">(n,x,y,z)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> n == <span class="number">1</span>:</span><br><span class="line">        print(x,<span class="string">'--&gt;'</span>,z) <span class="comment">#如果只有一层就直接x移动到z</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        hanoi(n<span class="number">-1</span>,x,z,y) <span class="comment">#将n-1的盘子从x移动到y上</span></span><br><span class="line">        print(x,<span class="string">'--&gt;'</span>,z) <span class="comment">#将最底下的第64个盘子从x移动到z</span></span><br><span class="line">        hanoi(n<span class="number">-1</span>,y,x,z) <span class="comment">#将Y上的63个盘子移动到z上</span></span><br><span class="line">hanoi(<span class="number">64</span>,<span class="string">'X'</span>,<span class="string">'Y'</span>,<span class="string">'Z'</span>)</span><br></pre></td></tr></table></figure>
<p>这就是递归的魔力</p>
<p>##作业</p>
<p>####封装函数，输入一个数字判断它是不是闰年<br>闰年的条件是 能被4整除 且不能被100整除</p>
</image></image></image>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://jyue0812.github.io/2018/05/21/python基础6/" data-id="cjhfjx3ee000hw4qx9xhgnnti" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-python基础5" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog/2018/05/21/python基础5/" class="article-date">
  <time datetime="2018-05-21T01:00:58.012Z" itemprop="datePublished">2018-05-21</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>#Lesson_5<br>——————</p>
<p>##第九章</p>
<p>###【1】元祖(牢笼中的的列表)<br>元祖 tuple</p>
<p>我们这里说的元祖不是那个赫赫有名的元祖零食、元祖蛋糕。</p>
<p>能力越大的人都有可能滥用权力，反而导致自身万劫不复。</p>
<p>同样，因为列表过于强大，python的作者发明了它的表亲—元祖。</p>
<p>元祖和列表的最大区别就是，元祖里面的数据是不可动的。</p>
<p>####访问和创建一个元祖</p>
<p>元祖和列表，除了不可变这个特征意外，那就是list用的中括号，tuple用的是小括号</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">tuple1 = ()</span><br><span class="line"></span><br><span class="line">tuple2 = (<span class="number">1</span>,) <span class="comment">#只有一个元素的时候一定要在结尾加上一个逗号，不加上逗号就是number</span></span><br><span class="line"></span><br><span class="line">tuple3 = (<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>)</span><br><span class="line"></span><br><span class="line">print(<span class="string">'tuple1:'</span>,tuple1,type(tuple1))</span><br><span class="line">print(<span class="string">'tuple2:'</span>,tuple2,type(tuple2))</span><br><span class="line">print(<span class="string">'tuple3:'</span>,tuple3,type(tuple3))</span><br><span class="line"></span><br><span class="line"><span class="comment">#tuple1: () &lt;class 'tuple'&gt;</span></span><br><span class="line"><span class="comment">#tuple2: (1,) &lt;class 'tuple'&gt;</span></span><br><span class="line"><span class="comment">#tuple3: (1, 2, 3) &lt;class 'tuple'&gt;</span></span><br></pre></td></tr></table></figure>
<p>另类定义：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">tuple1 = <span class="number">1</span>,  <span class="comment">#number加上逗号就是tuple，不加就是数字</span></span><br><span class="line"></span><br><span class="line">tuple2 = <span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">print(<span class="string">'tuple1:'</span>,tuple1,type(tuple1))</span><br><span class="line">print(<span class="string">'tuple2:'</span>,tuple2,type(tuple2))</span><br><span class="line"></span><br><span class="line"><span class="comment">#tuple1: (1,) &lt;class 'tuple'&gt;</span></span><br><span class="line"><span class="comment">#tuple2: (1, 2, 3) &lt;class 'tuple'&gt;</span></span><br></pre></td></tr></table></figure>
<p>我们尝试一下不带逗号会怎么样：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">tuple1 = (<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">tuple2 = (<span class="number">1</span>,)</span><br><span class="line"></span><br><span class="line">print(tuple1 * <span class="number">3</span>)</span><br><span class="line">print(tuple2 * <span class="number">3</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#3</span></span><br><span class="line"><span class="comment">#(1, 1, 1)</span></span><br></pre></td></tr></table></figure>
<p>访问tuple的索引和list是一样的：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">tuple1 = ((<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>),<span class="number">4</span>,(<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>),[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>])</span><br><span class="line"><span class="comment">#二维的元祖，可以嵌套多类型的数据</span></span><br><span class="line"></span><br><span class="line">print(tuple1[<span class="number">0</span>][<span class="number">0</span>])</span><br><span class="line">print(tuple1[<span class="number">1</span>])</span><br><span class="line">print(tuple1[<span class="number">3</span>][<span class="number">2</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment">#1</span></span><br><span class="line"><span class="comment">#4</span></span><br><span class="line"><span class="comment">#3</span></span><br></pre></td></tr></table></figure>
<p>tuple也是可以切片的：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">tuple1 = <span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span></span><br><span class="line"></span><br><span class="line">print(tuple1[:<span class="number">5</span>])  <span class="comment">#从0开始取列表中钱5个元素</span></span><br><span class="line">print(tuple1[<span class="number">-1</span>])  <span class="comment">#查找最后一个元素</span></span><br><span class="line">print(tuple1[::<span class="number">2</span>]) <span class="comment">#隔2个查一次</span></span><br><span class="line">print(tuple1[::<span class="number">-1</span>]) <span class="comment">#返回翻转的结果</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#(1, 2, 3, 4, 5)</span></span><br><span class="line"><span class="comment">#9</span></span><br><span class="line"><span class="comment">#(1, 3, 5, 7, 9)</span></span><br><span class="line"><span class="comment">#(9, 8, 7, 6, 5, 4, 3, 2, 1)</span></span><br></pre></td></tr></table></figure>
<p>tuple的元素是不可变的：</p>
<p>修改：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">tuple1 = <span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span></span><br><span class="line"></span><br><span class="line">tuple1[<span class="number">0</span>] = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">print(tuple1)</span><br><span class="line"></span><br><span class="line"><span class="comment">#TypeError: 'tuple' object does not support item assignment</span></span><br></pre></td></tr></table></figure>
<p>删除：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">tuple1 = <span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">del</span> tuple1[<span class="number">-1</span>]</span><br><span class="line"></span><br><span class="line">print(tuple1)</span><br><span class="line"></span><br><span class="line"><span class="comment">#TypeError: 'tuple' object does not support item assignment</span></span><br></pre></td></tr></table></figure>
<p>####更新和删除元祖</p>
<p>#####修改</p>
<p>前面说过了，元祖的元素具有不可变性，那么有没有其它办法了？</p>
<p>我们可以通过合并的方式向元祖的尾部或者头部插入数据</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">tuple1 = <span class="string">'成龙'</span>,<span class="string">'李连杰'</span>,<span class="string">'李小龙'</span></span><br><span class="line"></span><br><span class="line">name1 = <span class="string">'梁小龙'</span>,  </span><br><span class="line"></span><br><span class="line">name2 = <span class="string">'元彪'</span>,<span class="string">'洪金宝'</span></span><br><span class="line"></span><br><span class="line">tuple1 = tuple1 + name1 <span class="comment">#通过拼接在重新赋值给 tuple1</span></span><br><span class="line"></span><br><span class="line">tuple1 = name2 + tuple1</span><br><span class="line"></span><br><span class="line">print(tuple1)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#('元彪', '洪金宝', '成龙', '李连杰', '李小龙', '梁小龙')</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#注意：拼接只能是同类型之间拼接</span></span><br></pre></td></tr></table></figure>
<p>得到结论，元祖要修改就必须要重新赋值。</p>
<p>#####删除元祖</p>
<p>删除元祖的元素我们在上面的内容已经尝试过了，是不可实现的。</p>
<p>元祖的删除和修改差不多，要删就全删。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">tuple1 = <span class="string">'成龙'</span>,<span class="string">'李连杰'</span>,<span class="string">'李小龙'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">del</span> tuple1</span><br></pre></td></tr></table></figure>
<p>####返回指定值得下标</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">tuple1 = <span class="string">'成龙'</span>,<span class="string">'李连杰'</span>,<span class="string">'李小龙'</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">print(tuple1.index(<span class="string">'成龙'</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment">#0</span></span><br></pre></td></tr></table></figure>
<p>####返回元祖的个数</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">tuple1 = <span class="string">'成龙'</span>,<span class="string">'李连杰'</span>,<span class="string">'李小龙'</span></span><br><span class="line"></span><br><span class="line">print(len(tuple1))</span><br><span class="line"></span><br><span class="line"><span class="comment">#3</span></span><br></pre></td></tr></table></figure>
<p>####返回元祖中的最大值和最小值</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">tuple1 = <span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">print(max(tuple1))</span><br><span class="line">print(min(tuple1))</span><br><span class="line"></span><br><span class="line"><span class="comment">#7</span></span><br><span class="line"><span class="comment">#1</span></span><br></pre></td></tr></table></figure>
<p>####返回数组的和</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">tuple1 = <span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span></span><br><span class="line"></span><br><span class="line">tuple1 = <span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span></span><br><span class="line"></span><br><span class="line">print(sum(tuple1))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#28</span></span><br></pre></td></tr></table></figure>
<p>####将元祖转成列表</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">tuple1 = <span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span></span><br><span class="line"></span><br><span class="line">print(list(tuple1))</span><br><span class="line"></span><br><span class="line"><span class="comment">#[1, 2, 3, 4, 5, 6, 7]</span></span><br></pre></td></tr></table></figure>
<p>####将其它类型转成tuple</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">list1 = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>]</span><br><span class="line"></span><br><span class="line">string = <span class="string">'123344'</span></span><br><span class="line"></span><br><span class="line">print(tuple(list1))</span><br><span class="line">print(tuple(string))</span><br><span class="line"></span><br><span class="line"><span class="comment">#(1, 2, 3, 4, 5, 6, 7)</span></span><br><span class="line"><span class="comment">#('1', '2', '3', '3', '4', '4')</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#number 和 bool 类型的值是不可迭代的，所以不能转换</span></span><br></pre></td></tr></table></figure>
<p>####元祖的遍历</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">tuple1 = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> tuple1:</span><br><span class="line">    print(i)</span><br></pre></td></tr></table></figure>
<p>###【2】string补充</p>
<p>字符串我们在前面的内容里面已经学过不少了，想必大家消化的差不多了，<br>我们今天再来一波新的用法。</p>
<p>####splitlines([keepends]) 多行分割</p>
<p>默认keepends = false的，表示不保留换行符</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">str40 = <span class="string">'''sunck is a good man!</span></span><br><span class="line"><span class="string">sunck is a nice man!</span></span><br><span class="line"><span class="string">sunck is handsome man!</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line">print(str40.splitlines(<span class="keyword">True</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment">#['sunck is a good man!\n', 'sunck is a nice man!\n', 'sunck is handsome man!\n']</span></span><br></pre></td></tr></table></figure>
<p>####max()、min()</p>
<p>max()、min(）可以判断字符串大小值</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">str1 = <span class="string">"abcdefg!"</span></span><br><span class="line">print(max(str1))</span><br><span class="line">print(min(str1))</span><br><span class="line"></span><br><span class="line"><span class="comment">#g</span></span><br><span class="line"><span class="comment">#!</span></span><br></pre></td></tr></table></figure>
<image src="images/timg.jpeg">

<p>####创建字符映射的转换表</p>
<p>str.maketrans(intab, outtab) 方法用于创建字符映射的转换表，对于接受两个参数的最简单的调用方式，第一个参数是字符串，表示需要转换的字符，第二个参数也是字符串表示转换的目标。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">str1 = str.maketrans(<span class="string">"ac"</span>, <span class="string">"65"</span>)</span><br><span class="line"></span><br><span class="line">print(str1)</span><br><span class="line"></span><br><span class="line"><span class="comment">#&#123;97: 54, 99: 53&#125;</span></span><br></pre></td></tr></table></figure>
<p>####过滤字符映射</p>
<p>translate() 方法根据参数table给出的表(包含 256 个字符)转换字符串的字符,要过滤掉的字符放到 deletechars 参数中。</p>
<p>str.translate(table, deletechars) </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">table -- 翻译表，翻译表是通过 maketrans() 方法转换而来。</span><br><span class="line">deletechars -- 字符串中要过滤的字符列表。</span><br></pre></td></tr></table></figure>
<p>例如：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">intab = <span class="string">"aeiou"</span></span><br><span class="line">outtab = <span class="string">"12345"</span></span><br><span class="line">trantab = str.maketrans(intab, outtab)  <span class="comment"># 制作翻译表</span></span><br><span class="line"></span><br><span class="line">str = <span class="string">"this is string example....wow!!!"</span></span><br><span class="line">print(str.translate(trantab))</span><br><span class="line"></span><br><span class="line"><span class="comment">#th3s 3s str3ng 2x1mpl2....w4w!!!</span></span><br></pre></td></tr></table></figure>
<p>####编码</p>
<p>encode() 方法以 encoding 指定的编码格式编码字符串。errors参数可以指定不同的错误处理方案。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">encoding -- 要使用的编码，如<span class="string">"UTF-8"</span>。</span><br><span class="line"></span><br><span class="line">errors -- 设置不同错误的处理方案。默认为 <span class="string">'strict'</span>,意为编码错误引起一个UnicodeError。 其他可能得值有 <span class="string">'ignore'</span>, <span class="string">'replace'</span>, <span class="string">'xmlcharrefreplace'</span>, <span class="string">'backslashreplace'</span> 以及通过 codecs.register_error() 注册的任何值。</span><br></pre></td></tr></table></figure>
<p>看个例子：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">str1 = <span class="string">"这是一个字符串"</span></span><br><span class="line"><span class="comment">#ignore忽略错误</span></span><br><span class="line">data2 = str1.encode(<span class="string">"utf-8"</span>, <span class="string">"ignore"</span>)</span><br><span class="line">print(data2)</span><br><span class="line">print(type(data2))</span><br><span class="line"></span><br><span class="line"><span class="comment">#解码  注意：要与编码时的编码格式一致</span></span><br><span class="line">str3 = data2.decode(<span class="string">"gbk"</span>, <span class="string">"ignore"</span>)</span><br><span class="line">print(str3)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#b'\xe8\xbf\x99\xe6\x98\xaf\xe4\xb8\x80\xe4\xb8\xaa\xe5\xad\x97\xe7\xac\xa6\xe4\xb8\xb2'</span></span><br><span class="line"><span class="comment">#&lt;class 'bytes'&gt;</span></span><br><span class="line"><span class="comment">#杩欐槸涓涓瀛楃︿覆</span></span><br></pre></td></tr></table></figure>
<p>####字符判断</p>
<p>#####isalpha()<br>如果字符串中至少有一个字符且所有的字符都是字母返回True,否则返回False</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">str1 = <span class="string">"abcde"</span></span><br><span class="line">print(str1.isalpha())</span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt;<span class="keyword">True</span></span><br></pre></td></tr></table></figure>
<p>#####isalnum()<br>如果字符串中至少有一个字符且所有的字符都是字母或数字返回True,否则返回False</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">str1 = <span class="string">"1a2b3"</span></span><br><span class="line">print(str1.isalnum())</span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt;<span class="keyword">True</span></span><br></pre></td></tr></table></figure>
<p>#####isspace()</p>
<p>如果字符中只包含空格则返回True,否则返回False</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">print(<span class="string">" "</span>.isspace())</span><br><span class="line">print(<span class="string">"      "</span>.isspace())</span><br><span class="line">print(<span class="string">"\t"</span>.isspace())</span><br><span class="line">print(<span class="string">"\n"</span>.isspace())</span><br><span class="line">print(<span class="string">"\r"</span>.isspace())</span><br></pre></td></tr></table></figure>
<p>###【3】字典(dict)</p>
<p>我们在翻开《新华字典》的时候想查一个字的时候，比如“万“，我们不会从‘a’到‘z’开始逐个查找，而是直接从‘w’开始，接着找wan这个发音，最终找个”万“字。</p>
<p>python中的字典类型会把‘wan’看着是 键（key）,”万“字看着是值（value），另外python中的 dict在有些地方称为哈希（hash），有些地方称为 关系数组，也和javascript 的轻量数据交换格式（json）是一样的。</p>
<p>用键-值(key-value)存储，具有极快的查找速度</p>
<font color="red">注意：字典是映射关系,字典不能被切片</font>

<p>key的特性：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>、字典中的key必须唯一</span><br><span class="line"><span class="number">2</span>、key必须是不可变对象</span><br><span class="line"><span class="number">3</span>、字符串、整数等都是不可变的，可以作为key</span><br><span class="line"><span class="number">4</span>、list是可变的，不能作为key</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">字典是Python语言中唯一的映射类型。</span><br><span class="line">映射类型对象里哈希值（键，key）和指向的对象（值，value）是一对多的的关系，通常被认为是可变的哈希表。</span><br><span class="line">字典对象是可变的，它是一个容器类型，能存储任意个数的Python对象，其中也可包括其他容器类型。</span><br><span class="line">字典类型与序列类型的区别：</span><br><span class="line"><span class="number">1.</span>存取和访问数据的方式不同。</span><br><span class="line"><span class="number">2.</span>序列类型只用数字类型的键（从序列的开始按数值顺序索引）；</span><br><span class="line"><span class="number">3.</span>映射类型可以用其他对象类型作键（如：数字、字符串、元祖，一般用字符串作键），和序列类型的键不同，映射类型的键直接或间接地和存储数据值相关联。</span><br><span class="line"><span class="number">4.</span>映射类型中的数据是无序排列的。这和序列类型是不一样的，序列类型是以数值序排列的。</span><br><span class="line"><span class="number">5.</span>映射类型用键直接“映射”到值。</span><br><span class="line">字典是Python中最强大的数据类型之一。</span><br></pre></td></tr></table></figure>
<h4 id="创建和访问dict"><a href="#创建和访问dict" class="headerlink" title="创建和访问dict"></a>创建和访问dict</h4><p>#####创建dict</p>
<p>字典在创建的时候必须是{‘key’:’value’}</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">dict1 = &#123;&#125;</span><br><span class="line">dict2 = &#123;<span class="string">'name'</span>:<span class="string">'tom'</span>,<span class="string">'sex'</span>:<span class="string">'male'</span>,<span class="string">'age'</span>:<span class="number">25</span>&#125;</span><br><span class="line">dict3 = dict()</span><br><span class="line">print(dict1,type(dict1))</span><br><span class="line">print(dict2,type(dict2))</span><br><span class="line">print(dict3,type(dict3))</span><br><span class="line"></span><br><span class="line"><span class="comment">#&#123;&#125; &lt;class 'dict'&gt;</span></span><br><span class="line"><span class="comment">#&#123;'name': 'tom', 'sex': 'male', 'age': 25&#125; &lt;class 'dict'&gt;</span></span><br><span class="line"><span class="comment">#&#123;&#125; &lt;class 'dict'&gt;</span></span><br></pre></td></tr></table></figure>
<p>#####访问dict</p>
<p>访问dict必须要指定它的<code>key</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">dict1 = &#123;<span class="string">'name'</span>:<span class="string">'tom'</span>,<span class="string">'sex'</span>:<span class="string">'male'</span>,<span class="string">'age'</span>:<span class="number">25</span>&#125;</span><br><span class="line"></span><br><span class="line">print(dict1[<span class="string">'name'</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment">#tom</span></span><br></pre></td></tr></table></figure>
<p>#####添加一个新的值</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">dict1 = &#123;<span class="string">'name'</span>:<span class="string">'tom'</span>,<span class="string">'sex'</span>:<span class="string">'male'</span>,<span class="string">'age'</span>:<span class="number">25</span>&#125;</span><br><span class="line">dict1[<span class="string">'height'</span>] = <span class="string">'175cm'</span></span><br><span class="line">print(dict1)</span><br><span class="line"></span><br><span class="line"><span class="comment">#&#123;'name': 'tom', 'sex': 'male', 'age': 25, 'height': '175cm'&#125;</span></span><br></pre></td></tr></table></figure>
<p>#####修改指定的值</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">dict1 = &#123;<span class="string">'name'</span>:<span class="string">'tom'</span>,<span class="string">'sex'</span>:<span class="string">'male'</span>,<span class="string">'age'</span>:<span class="number">25</span>&#125;</span><br><span class="line">dict1[<span class="string">'age'</span>] = <span class="string">'30'</span></span><br><span class="line">print(dict1)</span><br><span class="line"></span><br><span class="line"><span class="comment">#&#123;'name': 'tom', 'sex': 'male', 'age': '30'&#125;</span></span><br></pre></td></tr></table></figure>
<p>#####删除指定的值</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">dict1 = &#123;<span class="string">'name'</span>:<span class="string">'tom'</span>,<span class="string">'sex'</span>:<span class="string">'male'</span>,<span class="string">'age'</span>:<span class="number">25</span>&#125;</span><br><span class="line"></span><br><span class="line">dict2 = dict1.copy()</span><br><span class="line"></span><br><span class="line">dict3 = dict1.copy()</span><br><span class="line"></span><br><span class="line"><span class="keyword">del</span> dict1[<span class="string">'age'</span>]        <span class="comment">#直接删除</span></span><br><span class="line"></span><br><span class="line">print(dict2.pop(<span class="string">'sex'</span>)) <span class="comment">#弹出一个指定的键，并返回被弹出的值</span></span><br><span class="line"></span><br><span class="line">print(dict3.popitem())  <span class="comment">#弹出最后一项，并返回被弹出的值</span></span><br><span class="line"></span><br><span class="line">print(dict1)</span><br><span class="line">print(dict2)</span><br><span class="line">print(dict3)</span><br><span class="line"></span><br><span class="line"><span class="comment">#male</span></span><br><span class="line"><span class="comment">#('age', 25)</span></span><br><span class="line"><span class="comment">#&#123;'name': 'tom', 'sex': 'male'&#125;</span></span><br><span class="line"><span class="comment">#&#123;'name': 'tom', 'age': 25&#125;</span></span><br><span class="line"><span class="comment">#&#123;'name': 'tom', 'sex': 'male'&#125;</span></span><br></pre></td></tr></table></figure>
<p>#####深度拷贝dict</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">dict1 = &#123;<span class="string">'name'</span>:<span class="string">'tom'</span>,<span class="string">'sex'</span>:<span class="string">'male'</span>,<span class="string">'age'</span>:<span class="number">25</span>&#125;</span><br><span class="line"></span><br><span class="line">dict2 = dict1.copy()  </span><br><span class="line"></span><br><span class="line">dict3 = dict1</span><br><span class="line"></span><br><span class="line">dict1.pop(<span class="string">'age'</span>)</span><br><span class="line"></span><br><span class="line">print(id(dict1),dict1)</span><br><span class="line">print(id(dict2),dict2)</span><br><span class="line">print(id(dict3),dict3)</span><br><span class="line"></span><br><span class="line"><span class="comment">#4303185888 &#123;'name': 'tom', 'sex': 'male'&#125;</span></span><br><span class="line"><span class="comment">#4303185960 &#123;'name': 'tom', 'sex': 'male', 'age': 25&#125;</span></span><br><span class="line"><span class="comment">#4303185888 &#123;'name': 'tom', 'sex': 'male'&#125;</span></span><br></pre></td></tr></table></figure>
<p>#####清除dict</p>
<p>dict.clear()</p>
<p>不管是list还是dict，清除都建议使用clear(),为什么了？举个例子</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">dict1 = &#123;<span class="string">'name'</span>:<span class="string">'tom'</span>,<span class="string">'sex'</span>:<span class="string">'male'</span>,<span class="string">'age'</span>:<span class="number">25</span>&#125;</span><br><span class="line"></span><br><span class="line">dict2 = dict1</span><br><span class="line"></span><br><span class="line">dict1 = &#123;&#125;</span><br><span class="line"></span><br><span class="line">print(id(dict1),id(dict2))</span><br><span class="line">print(dict1,dict2)</span><br><span class="line"></span><br><span class="line"><span class="comment">#4301088808 4301088736</span></span><br><span class="line"><span class="comment">#&#123;&#125; &#123;'name': 'tom', 'sex': 'male', 'age': 25&#125;</span></span><br></pre></td></tr></table></figure>
<p>上面的例子中 dict1 = {} 并没有把内存中的值给去除， 而是从新定义了一个 空dict，把指针指向了另一个地址.</p>
<p>dict2是浅拷贝dict1的，那么原来的值还在内存中。这样做的弊端就是浪费内存的使用空间。</p>
<p>使用clear()试一下</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">dict1 = &#123;<span class="string">'name'</span>:<span class="string">'tom'</span>,<span class="string">'sex'</span>:<span class="string">'male'</span>,<span class="string">'age'</span>:<span class="number">25</span>&#125;</span><br><span class="line"></span><br><span class="line">dict2 = dict1</span><br><span class="line"></span><br><span class="line">print(id(dict1),id(dict2))  <span class="comment">#这是清理之前的内存地址</span></span><br><span class="line"></span><br><span class="line">dict1.clear()</span><br><span class="line"></span><br><span class="line">print(id(dict1),id(dict2))</span><br><span class="line"></span><br><span class="line">print(dict1,dict2)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#4301088736 4301088736</span></span><br><span class="line"><span class="comment">##4301088736 4301088736</span></span><br><span class="line">&#123;&#125; &#123;&#125;</span><br></pre></td></tr></table></figure>
<p>使用clear()以后两个被一起清理了，而且是在原内存空间上做清理的。</p>
<p>所以不论是list、dict都建议使用.clear()</p>
<p>#####修改dict</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">dict1 = &#123;<span class="string">'name'</span>:<span class="string">'tom'</span>,<span class="string">'sex'</span>:<span class="string">'male'</span>,<span class="string">'age'</span>:<span class="number">25</span>&#125;</span><br><span class="line"></span><br><span class="line">dict1[<span class="string">'age'</span>] = <span class="number">26</span></span><br><span class="line"></span><br><span class="line">dict1.update(sex = <span class="string">'female'</span>)</span><br><span class="line"></span><br><span class="line">dict1[<span class="string">'cname'</span>] = <span class="string">'汤姆'</span>       <span class="comment">#指定key可以修改也可以添加</span></span><br><span class="line"></span><br><span class="line">dict1.update(height = <span class="string">'170'</span>)  <span class="comment">#height并不存在</span></span><br><span class="line"></span><br><span class="line">print(dict1)</span><br><span class="line"></span><br><span class="line"><span class="comment">#&#123;'name': 'tom', 'sex': 'female', 'age': 26, 'cname': '汤姆', 'height': '170'&#125;</span></span><br></pre></td></tr></table></figure>
<p>上面的例子我们能看出来.update()和指定key的效果是一样的，如果指定的 键值对 已经存在 则修改，不存在 则添加</p>
<font color="red">注意：update(key = ‘value’)中key是不带引号的，而value是带引号的，除非它是整数</font>

<p>#####宽松访问</p>
<p>get()方法提供了更加合适的访问方式。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">dict1 = &#123;<span class="string">'name'</span>:<span class="string">'tom'</span>,<span class="string">'sex'</span>:<span class="string">'male'</span>,<span class="string">'age'</span>:<span class="number">25</span>&#125;</span><br><span class="line"></span><br><span class="line">print(dict1.get(<span class="string">'age'</span>))</span><br><span class="line"></span><br><span class="line">print(dict1.get(<span class="string">'height'</span>))</span><br><span class="line"></span><br><span class="line">print(dict1.get(<span class="string">'height'</span>,<span class="string">'not find'</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment">#25            找到对应的key则返回value</span></span><br><span class="line"><span class="comment">#None          没有找到key返回None</span></span><br><span class="line"><span class="comment">#not find      如果设置第二个参数，找到key返回对应的value，没有找到返回设定的默认值</span></span><br></pre></td></tr></table></figure>
<p>相同的，可以用 in 和 not in 判断是否在dict里面，但是只能用key作为查找条件</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">dict1 = &#123;<span class="string">'name'</span>:<span class="string">'tom'</span>,<span class="string">'sex'</span>:<span class="string">'male'</span>,<span class="string">'age'</span>:<span class="number">25</span>&#125;</span><br><span class="line"></span><br><span class="line">print(<span class="string">'name'</span> <span class="keyword">in</span> dict1)</span><br><span class="line"></span><br><span class="line"><span class="comment">#True</span></span><br></pre></td></tr></table></figure>
<p>#####其它方式创建dict</p>
<p>fromkeys()用于创建一个新的字典，它有两个参数，第一个参数是字典的 键 ，第二个参数是可选的，是传入键的对应值，第二个参数不写的话，值默认是None。</p>
<font color="red">注意：第一个参数必须是可迭代的序列，在我们python中可迭代的序列中有三种，str，list，tuple。而且它是返回一个新的字典，并不会改变原来的值</font>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">dict1 = &#123;&#125;</span><br><span class="line">print(dict1.fromkeys(<span class="string">'12'</span>,<span class="string">'str'</span>))</span><br><span class="line">print(dict1.fromkeys([<span class="number">2</span>,<span class="number">3</span>],(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>)))</span><br><span class="line">print(dict1.fromkeys((<span class="number">5</span>,<span class="number">6</span>)))</span><br><span class="line"></span><br><span class="line"><span class="comment">#&#123;'1': 'str', '2': 'str'&#125;</span></span><br><span class="line"><span class="comment">#&#123;2: (1, 2, 3), 3: (1, 2, 3)&#125;</span></span><br><span class="line"><span class="comment">#&#123;5: None, 6: None&#125;</span></span><br></pre></td></tr></table></figure>
<p>上面的例子告诉我们做事不能想当然，在第二个print()中并不会将(1,2,3)拆开，而是将他们当着一个值。</p>
<p>#####keys(),values(),items()</p>
<p>访问字典的方法还有keys(),values(),items()</p>
<p>keys()是返回字典中的所有键，values()是返回字典中的值，那么items()就是返回字典中的键值对。items()返回的是一个list，每个元素都是tuple。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">dict1 = &#123;<span class="string">'name'</span>:<span class="string">'tom'</span>,<span class="string">'sex'</span>:<span class="string">'male'</span>,<span class="string">'age'</span>:<span class="number">25</span>&#125;</span><br><span class="line"></span><br><span class="line">print(dict1.keys())</span><br><span class="line">print(dict1.values())</span><br><span class="line">print(dict1.items())</span><br><span class="line"></span><br><span class="line"><span class="comment">#dict_keys(['name', 'sex', 'age'])</span></span><br><span class="line"><span class="comment">#dict_values(['tom', 'male', 25])</span></span><br><span class="line"><span class="comment">#dict_items([('name', 'tom'), ('sex', 'male'), ('age', 25)])</span></span><br></pre></td></tr></table></figure>
<p>课堂小作业：</p>
<p>list1 = [(‘name’, ‘tom’), (‘sex’, ‘male’), (‘age’, 25)]</p>
<p>我们将list转换成dict，不使用dict()。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">list1 = [(<span class="string">'name'</span>, <span class="string">'tom'</span>), (<span class="string">'sex'</span>, <span class="string">'male'</span>), (<span class="string">'age'</span>, <span class="number">25</span>)]</span><br><span class="line"></span><br><span class="line">dict1 = &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> each <span class="keyword">in</span> list1:</span><br><span class="line">    dict1[each[<span class="number">0</span>]] = each[<span class="number">1</span>]</span><br><span class="line">print(dict1)</span><br><span class="line"></span><br><span class="line"><span class="comment">#&#123;'name': 'tom', 'sex': 'male', 'age': 25&#125;</span></span><br></pre></td></tr></table></figure>
<p>###课后作业：</p>
<p>####dict支不支持一件多值？</p>
<p>####dict对key和value有没有类型限制了？</p>
<p>####目测dict1的运行结果是什么？<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>dict1.fromkeys((<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>), (<span class="string">'one'</span>, <span class="string">'two'</span>, <span class="string">'three'</span>)) </span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dict1.fromkeys((<span class="number">1</span>, <span class="number">3</span>), <span class="string">'数字'</span>)</span><br></pre></td></tr></table></figure></p>
<p>####尝试写一个用户登录的小程序</p>
</image>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://jyue0812.github.io/2018/05/21/python基础5/" data-id="cjhfjx3eb000gw4qx3omkhivl" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/blog/">&laquo; Prev</a><a class="page-number" href="/blog/">1</a><span class="page-number current">2</span><a class="page-number" href="/blog/page/3/">3</a><a class="page-number" href="/blog/page/4/">4</a><a class="page-number" href="/blog/page/5/">5</a><a class="extend next" rel="next" href="/blog/page/3/">Next &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2018/06/">June 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2018/05/">May 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2018/04/">April 2018</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/blog/2018/06/19/2018-06-19/">(no title)</a>
          </li>
        
          <li>
            <a href="/blog/2018/06/05/flask配置套路/">(no title)</a>
          </li>
        
          <li>
            <a href="/blog/2018/06/04/2018-06-04/">(no title)</a>
          </li>
        
          <li>
            <a href="/blog/2018/05/21/jquery_3/">(no title)</a>
          </li>
        
          <li>
            <a href="/blog/2018/05/21/pymysql/">(no title)</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2018 ZY<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/blog/" class="mobile-nav-link">Home</a>
  
    <a href="/blog/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/blog/fancybox/jquery.fancybox.css">
  <script src="/blog/fancybox/jquery.fancybox.pack.js"></script>


<script src="/blog/js/script.js"></script>



  </div>
</body>
</html>