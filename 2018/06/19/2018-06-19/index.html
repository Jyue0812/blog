<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>ZY</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="1: 推荐网址[数据结构和算法动态可视化]（有许多实用的功能以及实现)    www.visualgo.net/zh 2: Cache (官方帮助文档)    https://docs.djangoproject.com/en/2.0/topics/cache/) 2.1 缓存框架的核心目标     2.1.1 较少的代码         2.1.1.1 缓存应该尽快         2.1.1.">
<meta property="og:type" content="article">
<meta property="og:title" content="ZY">
<meta property="og:url" content="https://jyue0812.github.io/2018/06/19/2018-06-19/index.html">
<meta property="og:site_name" content="ZY">
<meta property="og:description" content="1: 推荐网址[数据结构和算法动态可视化]（有许多实用的功能以及实现)    www.visualgo.net/zh 2: Cache (官方帮助文档)    https://docs.djangoproject.com/en/2.0/topics/cache/) 2.1 缓存框架的核心目标     2.1.1 较少的代码         2.1.1.1 缓存应该尽快         2.1.1.">
<meta property="og:locale" content="default">
<meta property="og:updated_time" content="2018-06-19T02:27:22.681Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="ZY">
<meta name="twitter:description" content="1: 推荐网址[数据结构和算法动态可视化]（有许多实用的功能以及实现)    www.visualgo.net/zh 2: Cache (官方帮助文档)    https://docs.djangoproject.com/en/2.0/topics/cache/) 2.1 缓存框架的核心目标     2.1.1 较少的代码         2.1.1.1 缓存应该尽快         2.1.1.">
  
    <link rel="alternate" href="/blog/atom.xml" title="ZY" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/blog/css/style.css">
</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/blog/" id="logo">ZY</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/blog/">Home</a>
        
          <a class="main-nav-link" href="/blog/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/blog/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://jyue0812.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-2018-06-19" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog/2018/06/19/2018-06-19/" class="article-date">
  <time datetime="2018-06-19T02:27:22.562Z" itemprop="datePublished">2018-06-19</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>1: 推荐网址[数据结构和算法动态可视化]（有许多实用的功能以及实现)<br>    <a href="http://www.visualgo.net/zh" target="_blank" rel="noopener">www.visualgo.net/zh</a></p>
<p>2: Cache (官方帮助文档)    <a href="https://docs.djangoproject.com/en/2.0/topics/cache/" target="_blank" rel="noopener">https://docs.djangoproject.com/en/2.0/topics/cache/</a>)</p>
<pre><code>2.1 缓存框架的核心目标
    2.1.1 较少的代码
        2.1.1.1 缓存应该尽快
        2.1.1.2 围绕缓存后段的所有框架代码应该保持在绝对最小值，特别是查询
    2.1.2 一致性
    2.1.3 可扩展性

2.2 缓存，django内存的缓存框架，提供了几种常用的缓存。
    2.1 Memcached 缓存  基于内存级数据库 不流行使用了
    2.2 数据库缓存
    2.3 使用文件系统进行缓存
    2.4 使用本地内存进行缓存
    2.5 提供缓存扩展接口

2.3 缓存配置
    2.3.1
        CACHES = {
            &apos;default&apos;: {
                &apos;BACKEND&apos;: &apos;django.core.cache.backends.db.DatabaseCache&apos;,
                &apos;LOCATION&apos;: &apos;my_cache_table&apos;,
                &apos;TIMEOUT&apos;:&apos;60&apos;, //缓存时间
                &apos;OPTIONS&apos;:{
                    &apos;MAX_ENTRIES&apos;:&apos;300&apos;: //文件缓存个数
                },
                &apos;KEY_PREFIX&apos;:&apos;abc&apos;,   //前缀，用作标示
                &apos;VERSION&apos;:1,        //当前缓存版本
            }
        }
    2.3.1 创建缓存表
        python manage.py createcachetable [table_name]

2.4 缓存的使用（缓存原理图）
    在视图中使用（views，使用最多的场景）
    @cache_page()装饰器
        time 单位秒
        cache 缓存配置，默认default
        key_prefix 前置字符串


练习1： 查询用户列表实现缓存，并且使用aop打印每次访问的起始时间和结束时间。
练习2： 自我实现缓存底层
练习3： 安装redis，使用redis实现缓存
</code></pre><ol start="3">
<li><p>缓存底层   urls -&gt; views -&gt; cache -&gt; return views</p>
<pre><code>urls -&gt; views -&gt; cache -&gt; models -&gt; savecache -&gt; return views
</code></pre><p> 3.1 获取cache</p>
<pre><code>from django.core.cache import caches
cache = caches[&apos;cache_name&apos;]
</code></pre><p> 3.2 获取cache</p>
<pre><code>from django.core.cache import cache
</code></pre><p> 3.3 缓存操作</p>
<pre><code>cache.set
    key
    value
    timeout

3.3.1 get
3.3.1 add
3.3.1 get_or _set
3.3.1 get_many
3.3.1 set_many
3.3.1 delete
3.3.1 delete_many
3.3.1 clear

3.3.1 incr 增加
        incr(key, value) key对应的值上添加 value
3.3.1 decr 减少
        decr(key, value) key对应的值上减少value
        如果value不写，默认变更为1
</code></pre><p> 3.4 使用Redis做缓存,常见的有两个实现</p>
<pre><code>3.4.1 django-redis
    http://django-redis-chs.readthedocs.io/zh_CN/latest/#django
    安装插件： pip3 install django-redis
    ========================================================
    源码安装：
        make
        make test
        make install
    ========================================================
    启动redis 。  redis-server
    连接redis 。  redis-cli
    查看redis 。  keys *        进入指定块   select 1     keys*    查看缓存时间  ttl

3.4.2 django-redis-cache
    https://pypi.python.org/pypi/django-redis-cache/

3.4.3配置和内置的缓存配置基本一致

    CACHES = {
        &quot;default&quot;: {
            &quot;BACKEND&quot;: &quot;django_redis.cache.RedisCache&quot;,
            &quot;LOCATION&quot;: &quot;redis://127.0.0.1:6379/1&quot;,
            &quot;OPTIONS&quot;: {
                &quot;CLIENT_CLASS&quot;: &quot;django_redis.client.DefaultClient&quot;,
            }
        }
    }

用法和内置缓存使用一样
</code></pre></li>
</ol>
<p>4: 项目分析<br>    4。1 架构分析<br>        4。1。1 用户中心<br>        4。1。2 首页商品<br>        4。1。3 闪购（商品列表）<br>        4。1。4 购物车<br>            订单系统，收货地址，支付，优惠卷，积分系统，vip，评价模块，黑白名单，判决模块</p>
<pre><code>4。2 开发过程
    4。2。1 首页·闪购·个人模块可以并行开发
    4。2。2 新建项目，完成一些列配置

4。3 虚拟环境依赖 拷贝安装
    4。3。1 查询依赖              pip3 freeze
    4。3。2 将依赖输出至文件       pip3 freeze  &gt; requirements.txt
    4。3。3 创建新的虚拟环境后安装  pip3 install -r requirements.txt
</code></pre>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://jyue0812.github.io/2018/06/19/2018-06-19/" data-id="cjil2pq7k0000d4qx4d8kpyuj" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
  
    <a href="/blog/2018/06/05/flask配置套路/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title"></div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2018/06/">June 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2018/05/">May 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2018/04/">April 2018</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/blog/2018/06/19/2018-06-19/">(no title)</a>
          </li>
        
          <li>
            <a href="/blog/2018/06/05/flask配置套路/">(no title)</a>
          </li>
        
          <li>
            <a href="/blog/2018/06/04/2018-06-04/">(no title)</a>
          </li>
        
          <li>
            <a href="/blog/2018/05/21/jquery_3/">(no title)</a>
          </li>
        
          <li>
            <a href="/blog/2018/05/21/pymysql/">(no title)</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2018 ZY<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/blog/" class="mobile-nav-link">Home</a>
  
    <a href="/blog/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/blog/fancybox/jquery.fancybox.css">
  <script src="/blog/fancybox/jquery.fancybox.pack.js"></script>


<script src="/blog/js/script.js"></script>



  </div>
</body>
</html>