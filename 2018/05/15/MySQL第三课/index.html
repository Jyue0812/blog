<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>ZY</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Lesson_3MySql 1.数据的完整性  12341.实体的完整性:一个实体就是一条记录,如果记录无法区分,称之为失去了数据的完整性.2.域完整性:如果两个字段无法区分,称之为失去了域的完整性.3.引用的完整性:两个表的对应记录不完整.(不可避免的)4.自定义完整性:自己制定的规则在实现后出现了偏差. (1).保证实体的完整性1231.自动增长列(auto_increment)2.主键的约束">
<meta property="og:type" content="article">
<meta property="og:title" content="ZY">
<meta property="og:url" content="https://jyue0812.github.io/2018/05/15/MySQL第三课/index.html">
<meta property="og:site_name" content="ZY">
<meta property="og:description" content="Lesson_3MySql 1.数据的完整性  12341.实体的完整性:一个实体就是一条记录,如果记录无法区分,称之为失去了数据的完整性.2.域完整性:如果两个字段无法区分,称之为失去了域的完整性.3.引用的完整性:两个表的对应记录不完整.(不可避免的)4.自定义完整性:自己制定的规则在实现后出现了偏差. (1).保证实体的完整性1231.自动增长列(auto_increment)2.主键的约束">
<meta property="og:locale" content="default">
<meta property="og:image" content="https://jyue0812.github.io/blog/2018/05/15/MySQL第三课/图片1.png">
<meta property="og:image" content="https://jyue0812.github.io/blog/2018/05/15/MySQL第三课/图片2.png">
<meta property="og:image" content="https://jyue0812.github.io/blog/2018/05/15/MySQL第三课/图片3.png">
<meta property="og:image" content="https://jyue0812.github.io/blog/2018/05/15/MySQL第三课/图片4.png">
<meta property="og:image" content="https://jyue0812.github.io/blog/2018/05/15/MySQL第三课/图片5.png">
<meta property="og:image" content="https://jyue0812.github.io/blog/2018/05/15/MySQL第三课/图片6.png">
<meta property="og:image" content="file:///C:/Users/ruidong/Desktop/1802-mysql/mysql_3/images/%E5%9B%BE%E7%89%877.png?lastModify=1523944968">
<meta property="og:image" content="https://jyue0812.github.io/blog/2018/05/15/MySQL第三课/图片7.png">
<meta property="og:image" content="https://jyue0812.github.io/blog/2018/05/15/MySQL第三课/图片8.png">
<meta property="og:updated_time" content="2018-04-18T03:01:08.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="ZY">
<meta name="twitter:description" content="Lesson_3MySql 1.数据的完整性  12341.实体的完整性:一个实体就是一条记录,如果记录无法区分,称之为失去了数据的完整性.2.域完整性:如果两个字段无法区分,称之为失去了域的完整性.3.引用的完整性:两个表的对应记录不完整.(不可避免的)4.自定义完整性:自己制定的规则在实现后出现了偏差. (1).保证实体的完整性1231.自动增长列(auto_increment)2.主键的约束">
<meta name="twitter:image" content="https://jyue0812.github.io/blog/2018/05/15/MySQL第三课/图片1.png">
  
    <link rel="alternate" href="/blog/atom.xml" title="ZY" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/blog/css/style.css">
</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/blog/" id="logo">ZY</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/blog/">Home</a>
        
          <a class="main-nav-link" href="/blog/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/blog/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://jyue0812.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-MySQL第三课" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog/2018/05/15/MySQL第三课/" class="article-date">
  <time datetime="2018-05-15T07:18:47.012Z" itemprop="datePublished">2018-05-15</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="Lesson-3"><a href="#Lesson-3" class="headerlink" title="Lesson_3"></a>Lesson_3</h1><h2 id="MySql"><a href="#MySql" class="headerlink" title="MySql"></a>MySql</h2><hr>
<h2 id="1-数据的完整性"><a href="#1-数据的完整性" class="headerlink" title="1.数据的完整性"></a>1.数据的完整性</h2><p> <img src="/blog/2018/05/15/MySQL第三课/图片1.png" alt="图片1"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1.实体的完整性:一个实体就是一条记录,如果记录无法区分,称之为失去了数据的完整性.</span><br><span class="line">2.域完整性:如果两个字段无法区分,称之为失去了域的完整性.</span><br><span class="line">3.引用的完整性:两个表的对应记录不完整.(不可避免的)</span><br><span class="line">4.自定义完整性:自己制定的规则在实现后出现了偏差.</span><br></pre></td></tr></table></figure>
<h3 id="1-保证实体的完整性"><a href="#1-保证实体的完整性" class="headerlink" title="(1).保证实体的完整性"></a>(1).保证实体的完整性</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1.自动增长列(auto_increment)</span><br><span class="line">2.主键的约束(primary key)</span><br><span class="line">3.唯一键(unique)</span><br></pre></td></tr></table></figure>
<h3 id="2-保证域的完整性"><a href="#2-保证域的完整性" class="headerlink" title="(2).保证域的完整性"></a>(2).保证域的完整性</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1.数据类型的约束</span><br><span class="line">2.默认值约束</span><br><span class="line">3.非空的约束</span><br></pre></td></tr></table></figure>
<h3 id="3-保证引用的完整性"><a href="#3-保证引用的完整性" class="headerlink" title="(3)保证引用的完整性"></a>(3)保证引用的完整性</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">建立外键</span><br></pre></td></tr></table></figure>
<h3 id="4-自定义完整性"><a href="#4-自定义完整性" class="headerlink" title="(4)自定义完整性"></a>(4)自定义完整性</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1.存储过程(比较像python的自定义函数)</span><br><span class="line">2.触发器</span><br></pre></td></tr></table></figure>
<h2 id="2外键-foreign-key"><a href="#2外键-foreign-key" class="headerlink" title="2外键(foreign key)"></a>2外键(foreign key)</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">外键:从表的公共字段</span><br><span class="line">外键约束用来保证引用的完整性,主外键的名字可以不一样,但是数据类型必须一样.</span><br><span class="line"></span><br><span class="line">特点:</span><br><span class="line">1.主表中不存在的记录,从表中不能插入</span><br><span class="line">2.从表中存在记录,主表中不能先删除</span><br><span class="line">3.先删除从表,再删除主表</span><br></pre></td></tr></table></figure>
<h3 id="1-创建外键"><a href="#1-创建外键" class="headerlink" title="(1)创建外键"></a>(1)创建外键</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">--学生表(主表)</span><br><span class="line">create table stuinfo(</span><br><span class="line">id int auto_increment comment&apos;主键&apos;,</span><br><span class="line">stu_name varchar(255),</span><br><span class="line">primary key(id)</span><br><span class="line">)engine=innodb;</span><br><span class="line">#添加一条数据</span><br><span class="line">insert into stuinfo set `stu_name`=&apos;刘运斌&apos;;</span><br><span class="line"></span><br><span class="line">--成绩表(从表)</span><br><span class="line">create table stumarks(</span><br><span class="line">stuno int  comment&apos;主键&apos;,</span><br><span class="line">ch float,</span><br><span class="line">math float,</span><br><span class="line">#foreign key(stuno) references stuinfo(id)</span><br><span class="line">foreign key (stuno) references stuinfo(id) on delete set null on update cascade</span><br><span class="line">)engine=innodb;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#修改表的时候添加一个外键</span><br><span class="line">alter table stumarks add foreign key (stuno) references stuinfo(id) on delete set null on update cascade;</span><br><span class="line">#添加一条数据</span><br><span class="line">insert into stumarks values(1,88,99);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">mysql&gt; show create table stumarks\G</span><br><span class="line">*************************** 1. row ***************************</span><br><span class="line">       Table: stumarks</span><br><span class="line">Create Table: CREATE TABLE `stumarks` (</span><br><span class="line">  `stuno` int(11) NOT NULL COMMENT &apos;主键&apos;,</span><br><span class="line">  `ch` float DEFAULT NULL,</span><br><span class="line">  `math` float DEFAULT NULL,</span><br><span class="line">  PRIMARY KEY (`stuno`),</span><br><span class="line">  CONSTRAINT `stumarks_ibfk_1` FOREIGN KEY (`stuno`) REFERENCES `stuinfo`(`id`) on delete set null on update cascade ;</span><br><span class="line"></span><br><span class="line">) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4</span><br><span class="line">1 row in set (0.00 sec)</span><br><span class="line">#CONSTRAINT `stumarks_ibfk_1`:是mysql分配给外键的名字</span><br><span class="line"></span><br><span class="line">#指定一个名字给外键(添加一个索引)</span><br><span class="line"></span><br><span class="line">alter table stumarks add CONSTRAINT `stuno` foreign key (stuno) references stuinfo(id) on delete cascade on update cascade;</span><br><span class="line"></span><br><span class="line">#删除外键</span><br><span class="line">alter table stumarks drop foreign key stumarks_ibfk_1;</span><br><span class="line"></span><br><span class="line">#提醒:</span><br><span class="line">如果要在某个字段上添加外键,这个字段必须有索引才可以,如果这个字段没有索引就直接添加外键,那么mysql会自动创建索引.</span><br></pre></td></tr></table></figure>
<h3 id="2-外键的操作"><a href="#2-外键的操作" class="headerlink" title="(2)外键的操作"></a>(2)外键的操作</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1.严格约束(外键约束),保证引用的完整性</span><br><span class="line">2.置空操作(set null):主表记录删除或者更新,从表的外键字段设置为null</span><br><span class="line">3.联级操作(cascade): 主表的记录删除或者更新,从表外键字段一起发生变化</span><br><span class="line">4.一般都是删除的时候外键字段置空,修改的时候更新关联</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">alter table stumarks add  foreign key (stuno) references stuinfo(id) on delete set null on update cascade;</span><br><span class="line"></span><br><span class="line">注意:从表的关联(外键)字段一定不能是主键</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">外键在数据量特别小的时候会用上,一般是开发者自己清楚数据库表的设计,你只懂那个是主表,那个是从表,然后手动修改,使用&apos;事务&apos;,为什么了?</span><br><span class="line">1.mysql表中设置外键会影响效率.</span><br><span class="line">2.一般来说,每个从表都是单独数据,需要用到单独操作.</span><br></pre></td></tr></table></figure>
<h2 id="3-实体之间的关系"><a href="#3-实体之间的关系" class="headerlink" title="3.实体之间的关系"></a>3.实体之间的关系</h2><p>什么是实体?</p>
<p>我们所看到的每一条记录就是一个实体.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1.一对一的关系</span><br><span class="line">2.一对多的关系</span><br><span class="line">3.多对一的关系</span><br><span class="line">4.多对多的关系</span><br></pre></td></tr></table></figure>
<h3 id="1-一对一的关系-主键关系"><a href="#1-一对一的关系-主键关系" class="headerlink" title="(1)一对一的关系:主键关系"></a>(1)一对一的关系:主键关系</h3><p>stuinfo</p>
<table>
<thead>
<tr>
<th>stuno(学号)</th>
<th>stuname(学生的姓名)</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>tom</td>
</tr>
<tr>
<td>2</td>
<td>jack</td>
</tr>
</tbody>
</table>
<p>stumarks</p>
<table>
<thead>
<tr>
<th>stuno</th>
<th>score</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>180</td>
</tr>
<tr>
<td>2</td>
<td>170</td>
</tr>
</tbody>
</table>
<p>主键关系一一对应</p>
<p>应用:分表操作</p>
<p>垂直分表</p>
<h3 id="2-一对多-多对一-的关系"><a href="#2-一对多-多对一-的关系" class="headerlink" title="(2)一对多(多对一)的关系"></a>(2)一对多(多对一)的关系</h3><p>stuinfo</p>
<table>
<thead>
<tr>
<th>stuno(学号)</th>
<th>stuname(学生的姓名)</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>tom</td>
</tr>
<tr>
<td>2</td>
<td>jack</td>
</tr>
</tbody>
</table>
<p>stumarks</p>
<table>
<thead>
<tr>
<th>stuno(他不是主键)</th>
<th>score</th>
<th>create_at</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>180</td>
<td>2018-01-14 14:20:00</td>
</tr>
<tr>
<td>1</td>
<td>170</td>
<td>2018-01-15 15:20:00</td>
</tr>
<tr>
<td>2</td>
<td>181</td>
<td>2018-01-14 14:20:00</td>
</tr>
<tr>
<td>2</td>
<td>171</td>
<td>2018-01-15 15:20:00</td>
</tr>
</tbody>
</table>
<h3 id="3-多对多的关系"><a href="#3-多对多的关系" class="headerlink" title="(3)多对多的关系"></a>(3)多对多的关系</h3><p>class</p>
<table>
<thead>
<tr>
<th>id</th>
<th>name</th>
<th>stu</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>python</td>
<td>1,2,3</td>
</tr>
<tr>
<td>2</td>
<td>java</td>
<td>1,2,3</td>
</tr>
</tbody>
</table>
<p>stu</p>
<table>
<thead>
<tr>
<th>stuno</th>
<th>姓名</th>
<th>class</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>tom</td>
<td>1,2</td>
</tr>
<tr>
<td>2</td>
<td>jack</td>
<td>2,1</td>
</tr>
<tr>
<td>3</td>
<td>lily</td>
<td>1,2</td>
</tr>
</tbody>
</table>
<h2 id="4-数据库的设计"><a href="#4-数据库的设计" class="headerlink" title="4.数据库的设计"></a>4.数据库的设计</h2><p> <img src="/blog/2018/05/15/MySQL第三课/图片2.png" alt="图片2"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">公司要做一个项目,首先产品经理会告诉你做个什么类型的项目,然后他会把他设计的需要理解图发给你.</span><br><span class="line"></span><br><span class="line">读取需要图,判断需要那些表,那些字段,做那些关联(意淫能力)</span><br><span class="line"></span><br><span class="line">你(泛指项目经理)需要根据你的判断,画出E-R图.</span><br><span class="line"></span><br><span class="line">把E-R图发给每个开发者,他们看图建数据库和表.</span><br></pre></td></tr></table></figure>
<h3 id="1-标识的实体"><a href="#1-标识的实体" class="headerlink" title="(1)标识的实体"></a>(1)标识的实体</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">播客:</span><br><span class="line">用户注册,用户登陆,用户关注,发帖,回帖,删帖,发帖拿积分,点赞数量,黑贴就封号</span><br><span class="line"></span><br><span class="line">用户注册,用户登陆:可以建立一个表</span><br><span class="line">	users</span><br><span class="line">	uid  username password create_at sex(null) email(null) mobile(null) id_card jifen</span><br><span class="line">用户关注:</span><br><span class="line">	guanzhu</span><br><span class="line">	uid  byuid</span><br><span class="line">	1    2,3,100,1000</span><br><span class="line">	2    4,3,1</span><br><span class="line">发帖:</span><br><span class="line">	news</span><br><span class="line">	id  uid content title  num     status</span><br><span class="line">	1    1   不详    不详   1000    1(可见)2(被封了)</span><br><span class="line">回帖:</span><br><span class="line">	回帖</span><br><span class="line">	id pid(父级id,如果为0自己就是一级恢复) uid content news_id</span><br></pre></td></tr></table></figure>
<h3 id="2-写出实体的属性"><a href="#2-写出实体的属性" class="headerlink" title="(2)写出实体的属性"></a>(2)写出实体的属性</h3><p> <img src="/blog/2018/05/15/MySQL第三课/图片3.png" alt="图片3"></p>
<h3 id="3-标识实体之间的关系"><a href="#3-标识实体之间的关系" class="headerlink" title="(3)标识实体之间的关系"></a>(3)标识实体之间的关系</h3><p>设计表的人(设计数据库的人自己看图理解)</p>
<h3 id="4-E-R图-语法"><a href="#4-E-R图-语法" class="headerlink" title="(4)E-R图(语法)"></a>(4)E-R图(语法)</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1.矩形代表实体</span><br><span class="line">2.椭圆形代表属性</span><br><span class="line">3.菱形代表关系</span><br></pre></td></tr></table></figure>
<p> <img src="/blog/2018/05/15/MySQL第三课/图片4.png" alt="图片4"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">将E-R图转成表,自己玩.</span><br><span class="line"></span><br><span class="line">如果表中没有适合的字段做主键怎么破?</span><br><span class="line"></span><br><span class="line">答:自己加一个就是喽</span><br></pre></td></tr></table></figure>
<h2 id="4-数据的规范化"><a href="#4-数据的规范化" class="headerlink" title="4.数据的规范化"></a>4.数据的规范化</h2><h3 id="1-第一范式"><a href="#1-第一范式" class="headerlink" title="(1)第一范式"></a>(1)第一范式</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">第一范式:确保每一列的数据原子化(不可在分割)</span><br></pre></td></tr></table></figure>
<p> <img src="/blog/2018/05/15/MySQL第三课/图片5.png" alt="图片5"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">地址到底可不可以在分,那么需要看你有没有这个需求</span><br></pre></td></tr></table></figure>
<h3 id="2-第二范式"><a href="#2-第二范式" class="headerlink" title="(2)第二范式"></a>(2)第二范式</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">第二范式:非主键字段必须依赖主键字段(一个表只描述一件事情)</span><br></pre></td></tr></table></figure>
<p> <img src="/blog/2018/05/15/MySQL第三课/图片6.png" alt="图片6"></p>
<p><code>第二范式是约束普通字段和主键字段的</code></p>
<h3 id="3-第三范式"><a href="#3-第三范式" class="headerlink" title="(3)第三范式"></a>(3)第三范式</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">第三范式:在非主键字段中,一个字段确定了,其它字段也确定称为传递依赖</span><br></pre></td></tr></table></figure>
<p><img src="file:///C:/Users/ruidong/Desktop/1802-mysql/mysql_3/images/%E5%9B%BE%E7%89%877.png?lastModify=1523944968" alt="图片7"></p>
<p> <img src="/blog/2018/05/15/MySQL第三课/图片7.png" alt="图片7"></p>
<p>第三范式的约束是非主键之间的</p>
<h2 id="5-数据库设计"><a href="#5-数据库设计" class="headerlink" title="5.数据库设计"></a>5.数据库设计</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">需求分析:</span><br><span class="line">假如某建筑公司要设计一个数据库.公司的业务规则如下:</span><br><span class="line">1.公司承担多个工程项目,每一个项目要有:工程号,工程名称,施工人员.</span><br><span class="line">2.公司有多名职工,每一名职工都有:职工号,姓名,性别,职务等</span><br><span class="line">3.公司按照工时和小时工资率支付工资,小时的工资率由职务决定(例如,技术人员的小时工资率与工程师不同)</span><br></pre></td></tr></table></figure>
<p> <img src="/blog/2018/05/15/MySQL第三课/图片8.png" alt="![图片8](file:///C:/Users/ruidong/Desktop/1802-mysql/mysql_3/images/%E5%9B%BE%E7%89%878.png?lastModify=1523944968)"></p>
<h2 id="6-规范化和性能的关系"><a href="#6-规范化和性能的关系" class="headerlink" title="6.规范化和性能的关系"></a>6.规范化和性能的关系</h2><table>
<thead>
<tr>
<th>学号stu</th>
<th>姓名</th>
<th>语文成绩</th>
<th>数学成绩</th>
<th>总分</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td></td>
<td>ch</td>
<td>ma</td>
</tr>
</tbody>
</table>
<p>语文和数学成绩确定了,总分就确定了,我在把总分作为一个表.</p>
<table>
<thead>
<tr>
<th>学号a</th>
<th>姓名</th>
<th>语文成绩</th>
<th>数学成绩</th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>学号b</th>
<th>总分</th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
</tr>
</tbody>
</table>
<p><code>select * from stuinfo where name =小明</code> </p>
<p><code>select  * from stuscore where  学号=123455</code></p>
<p>这种简单化的查询性能优先,不需要满足三范式.</p>
<p>三范式在数据结构极其负责的情况下才使用</p>
<h2 id="7-查询语句"><a href="#7-查询语句" class="headerlink" title="7.查询语句"></a>7.查询语句</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select 字段 from 表名 [where 条件] [group by 分组][having 条件][order by 排序 asc|desc][limit限制 s,n]</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">create table stuinfo(</span><br><span class="line">sid int auto_increment primary key comment&apos;学号(主键)&apos;,</span><br><span class="line">sname varchar(255) comment&apos;学生名字&apos;,</span><br><span class="line">sex enum(&apos;男&apos;,&apos;女&apos;) comment&apos;性别&apos;,</span><br><span class="line">age tinyint comment&apos;年龄&apos;,</span><br><span class="line">city varchar(64) comment&apos;地级市&apos;</span><br><span class="line">)engine=innodb;</span><br><span class="line"></span><br><span class="line">create table stumarks(</span><br><span class="line">stuno int primary key comment&apos;学号(主键)&apos;,</span><br><span class="line">ch tinyint comment&apos;语文成绩&apos;,</span><br><span class="line">math tinyint comment&apos;数学成绩&apos;</span><br><span class="line">)engine=innodb;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">insert into stuinfo values(null,&apos;小舒&apos;,2,18,&apos;东北&apos;),(null,&apos;小京&apos;,1,20,&apos;北京&apos;),(null,&apos;小强&apos;,1,22,&apos;北京&apos;),(null,&apos;小力&apos;,1,20,&apos;天津&apos;),(null,&apos;小丽&apos;,2,21,&apos;重庆&apos;),(null,&apos;小芳&apos;,2,20,&apos;天津&apos;);</span><br><span class="line"></span><br><span class="line">insert into stumarks values(1,88,99),(2,89,100),(3,67,76),(4,50,59),(5,100,99),(6,96,91);</span><br></pre></td></tr></table></figure>
<h3 id="1-字段表达式"><a href="#1-字段表达式" class="headerlink" title="(1)字段表达式"></a>(1)字段表达式</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">select 查询也可以用来做计算</span><br><span class="line"></span><br><span class="line">select unix_timestamp(); --显示时间戳</span><br><span class="line"></span><br><span class="line">select rand();--显示随机数</span><br></pre></td></tr></table></figure>
<h3 id="2-from子句"><a href="#2-from子句" class="headerlink" title="(2)from子句"></a>(2)from子句</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">from后面跟的是什么?是数据源(也就是表)</span><br><span class="line">数据源可以有多张表,返回的是笛卡尔积.</span><br></pre></td></tr></table></figure>
<h3 id="3-dual表"><a href="#3-dual表" class="headerlink" title="(3)dual表"></a>(3)dual表</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dual表不是一个实实在在存在的表,它是为了保证select语句的完整性的.</span><br></pre></td></tr></table></figure>
<h3 id="4-where子句"><a href="#4-where子句" class="headerlink" title="(4)where子句"></a>(4)where子句</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">where子句在数据源进行筛选;</span><br><span class="line"></span><br><span class="line">select * from stuinfo where sex=1;</span><br></pre></td></tr></table></figure>
<h3 id="5-is-null-is-not-null"><a href="#5-is-null-is-not-null" class="headerlink" title="(5)is null|is not null"></a>(5)is null|is not null</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">筛选数据为空或不为空</span><br><span class="line"></span><br><span class="line">select * from stumarks where ch is null or math is null;</span><br></pre></td></tr></table></figure>
<h3 id="6-between-not-between"><a href="#6-between-not-between" class="headerlink" title="(6)between| not between"></a>(6)between| not between</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">筛选指定范围内的数据</span><br><span class="line">select * from stumarks where ch between 75 and 100;</span><br><span class="line">select * from stumarks where ch&gt;=75 and ch&lt;=100;</span><br></pre></td></tr></table></figure>
<h3 id="7-运算符"><a href="#7-运算符" class="headerlink" title="(7)运算符"></a>(7)运算符</h3><h4 id="a-算数运算符"><a href="#a-算数运算符" class="headerlink" title="a.算数运算符"></a>a.算数运算符</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">+ - * / % ++ --</span><br></pre></td></tr></table></figure>
<h4 id="b-比较运算符"><a href="#b-比较运算符" class="headerlink" title="b.比较运算符"></a>b.比较运算符</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt; &lt; &gt;= &lt;=  (&lt;&gt; !=)不等于</span><br></pre></td></tr></table></figure>
<h4 id="c-逻辑运算符"><a href="#c-逻辑运算符" class="headerlink" title="c.逻辑运算符"></a>c.逻辑运算符</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">and 与</span><br><span class="line">or  或</span><br><span class="line">not 非</span><br></pre></td></tr></table></figure>
<h3 id="8-聚合函数"><a href="#8-聚合函数" class="headerlink" title="(8)聚合函数"></a>(8)聚合函数</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sum()  #求和</span><br><span class="line">avg()  #求平均值</span><br><span class="line">max()  #最大值</span><br><span class="line">min()  #最小值</span><br><span class="line">count() #统计</span><br></pre></td></tr></table></figure>
<h3 id="9-通配符"><a href="#9-通配符" class="headerlink" title="(9)通配符"></a>(9)通配符</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">_  #匹配一个字符</span><br><span class="line"></span><br><span class="line">%  #匹配所有</span><br></pre></td></tr></table></figure>
<h3 id="10-模糊查询-like"><a href="#10-模糊查询-like" class="headerlink" title="(10)模糊查询(like)"></a>(10)模糊查询(like)</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">select * from stuinfo where sname like &apos;_明&apos;;</span><br><span class="line">select * from stuinfo where sname like &apos;%佰%&apos;;</span><br></pre></td></tr></table></figure>
<h3 id="11-分组查询-group-by"><a href="#11-分组查询-group-by" class="headerlink" title="(11)分组查询 group by"></a>(11)分组查询 group by</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">将查询的结果分组显示,分组的目的在于方便统计.</span><br><span class="line"></span><br><span class="line">select sid,group_concat(sname),sex,age,city from stuinfo group by city;</span><br><span class="line">#每个结果只显示一个</span><br><span class="line"></span><br><span class="line">select stuno,ch,math,(ch+math) as score from stumarks group by score;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#group_concat()可以将同一组的字段连接在一起</span><br><span class="line">mysql&gt; select sid,group_concat(sname),sex,age,city from stuinfo group by city;</span><br><span class="line">+-----+---------------------+------+------+------+</span><br><span class="line">| sid | group_concat(sname) | sex  | age  | city |</span><br><span class="line">+-----+---------------------+------+------+------+</span><br><span class="line">|   1 | 小明                   | ?    |   18 | 上海    |</span><br><span class="line">|   2 | 小刚,小强                | ?    |   20 | 北京     |</span><br><span class="line">|   4 | 尹佰力,小芳                  | ?    |   20 | 天津     |</span><br><span class="line">|   5 | 小丽                   | ?    |   21 | 重庆     |</span><br><span class="line">+-----+---------------------+------+------+------+</span><br><span class="line">4 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">#安数字分组,会按照升序排列</span><br><span class="line">select * from stuinfo group by age;</span><br><span class="line"></span><br><span class="line">#多列分组</span><br><span class="line"></span><br><span class="line">select sid,group_concat(sname),sex,age,city from stuinfo group by sex,city;</span><br></pre></td></tr></table></figure>
<h3 id="12-回溯统计"><a href="#12-回溯统计" class="headerlink" title="(12)回溯统计"></a>(12)回溯统计</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">#在统计的基础上在统计一次</span><br><span class="line"></span><br><span class="line">select sid,group_concat(sname),sex,age,city from stuinfo group by sex,city with rollup;</span><br></pre></td></tr></table></figure>
<h3 id="13-having条件"><a href="#13-having条件" class="headerlink" title="(13)having条件"></a>(13)having条件</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">where:设置查询的条件,字段必须是存在的</span><br><span class="line">having: 设置查询的条件,条件字段必须在结果集中;</span><br><span class="line">#having  的查询效率要高于where</span><br><span class="line"></span><br><span class="line">select * from stuinfo where age&gt;20;   #正确</span><br><span class="line">select * from stuinfo having age&gt;20;  #正确</span><br><span class="line">select sname from stuinfo where age&gt;20;  #正确</span><br><span class="line">select sname from stuinfo having age&gt;20; #错误,原因age不在结果集中(没有查询age这个字段)</span><br><span class="line">select sname,age from stuinfo having age&gt;20; #正确</span><br></pre></td></tr></table></figure>
<h3 id="14-order-by排序-asc-desc"><a href="#14-order-by排序-asc-desc" class="headerlink" title="(14)order by排序[asc|desc]"></a>(14)order by排序[asc|desc]</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">用书数据排序的</span><br><span class="line"></span><br><span class="line">select * from stuinfo order by age asc; #asc 可以不写 ,它是默认值</span><br><span class="line">select * from stuinfo order by age desc;#降序排列</span><br></pre></td></tr></table></figure>
<h3 id="15-limit-限制"><a href="#15-limit-限制" class="headerlink" title="(15)limit(限制)"></a>(15)limit(限制)</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">limit  起始位置,显示长度</span><br><span class="line">select * from stuinfo limit 3; #第一个不写默认从1开始</span><br><span class="line">select * from stuinfo limit 2,3;</span><br></pre></td></tr></table></figure>
<h3 id="16-查询语句中的选项"><a href="#16-查询语句中的选项" class="headerlink" title="(16)查询语句中的选项"></a>(16)查询语句中的选项</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">all :和 * 是一个意思,表示查询所有的</span><br><span class="line">distinct: 去除重复的数据</span><br><span class="line"></span><br><span class="line">select all from stuinfo;</span><br><span class="line">select distinct city from stuinfo;</span><br></pre></td></tr></table></figure>
<h3 id="17-insert…select…"><a href="#17-insert…select…" class="headerlink" title="(17)insert…select…"></a>(17)insert…select…</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE `stuinfoo` (</span><br><span class="line">  `sid` int(11) NOT NULL AUTO_INCREMENT ,</span><br><span class="line">  `sname` varchar(255) DEFAULT NULL,</span><br><span class="line">  `sex` enum(&apos;男&apos;,&apos;女&apos;) DEFAULT NULL ,</span><br><span class="line">  `age` tinyint(4) DEFAULT NULL ,</span><br><span class="line">  `city` varchar(64) DEFAULT NULL ,</span><br><span class="line">  PRIMARY KEY (`sid`)</span><br><span class="line">) ENGINE=InnoDB AUTO_INCREMENT=7 DEFAULT CHARSET=utf8mb4;</span><br><span class="line"></span><br><span class="line">#选择一个表中的数据插入到另一个表中(两个表结构要一致)</span><br><span class="line">insert into stuinfoo select sid,sname,sex,age,city from stuinfo;</span><br></pre></td></tr></table></figure>
<h3 id="18-on-duplicate-key-update"><a href="#18-on-duplicate-key-update" class="headerlink" title="(18)on duplicate key update"></a>(18)on duplicate key update</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">作用:在插入数据的时候,如果这个数据已经存在或不满足唯一约束的条件就执行更新;</span><br><span class="line"></span><br><span class="line">insert into stuinfo values(13,&apos;小月&apos;,&apos;male&apos;,18,&apos;重庆&apos;) on duplicate key update sname=&apos;小月&apos;,sex=2;</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://jyue0812.github.io/2018/05/15/MySQL第三课/" data-id="cjhfjx3dg0003w4qx3f9peyk0" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/blog/2018/05/21/源码、反码、补码/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          (no title)
        
      </div>
    </a>
  
  
    <a href="/blog/2018/05/14/MySQL第二课/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title"></div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2018/05/">May 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2018/04/">April 2018</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/blog/2018/05/21/pymysql/">(no title)</a>
          </li>
        
          <li>
            <a href="/blog/2018/05/21/Mysql主从复制/">(no title)</a>
          </li>
        
          <li>
            <a href="/blog/2018/05/21/MySQL第五课/">(no title)</a>
          </li>
        
          <li>
            <a href="/blog/2018/05/21/MySQL第四课/">(no title)</a>
          </li>
        
          <li>
            <a href="/blog/2018/05/21/python基础17/">(no title)</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2018 ZY<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/blog/" class="mobile-nav-link">Home</a>
  
    <a href="/blog/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/blog/fancybox/jquery.fancybox.css">
  <script src="/blog/fancybox/jquery.fancybox.pack.js"></script>


<script src="/blog/js/script.js"></script>



  </div>
</body>
</html>